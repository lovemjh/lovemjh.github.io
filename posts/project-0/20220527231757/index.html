<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="Thymeleafå®ç°æœç´¢é¡µé¢æ¸²æŸ“åŠå•†å“é™æ€é¡µ - https://lovemjh.vercel.app/posts/project-0/20220527231757/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>Thymeleafå®ç°æœç´¢é¡µé¢æ¸²æŸ“åŠå•†å“é™æ€é¡µ</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="https://lovemjh.vercel.app/style.min.824365c118b34524ce845ac2a294220354719cca11af5b27a81b04c173bbba57.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"hasFoldAllCodeBlocks": false,
		"svgColor": "#6c757d",
		"en": false,
		"dark": false
	}
</div>
    <h1 class="title">
        
            Thymeleafå®ç°æœç´¢é¡µé¢æ¸²æŸ“åŠå•†å“é™æ€é¡µ
            
        
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill=#6c757d p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill=#6c757d></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill=#6c757d></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill=#6c757d p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill=#6c757d p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill=#6c757d p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill=#6c757d p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill=#6c757d></path></svg></a></div>
        
    </div>

    
</div>

            <div id="toc">ğŸ“œ</div>
        
    
    
</div>
</div>
        <div id="content">












<div class="container-main 
     container-page 
">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2022-05-27&nbsp;
        </span>
        <span>
            
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2022-05-27&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            15928 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            32 åˆ†é’Ÿ</span><div class="container-ctgtag">
	<div class="taxonomy">
		
		<div class="ctg">
			
			
			<a href="/categories/"></a>
			
		</div>
		<div class="tag">
			
			 - 
			
			<a href="/tags/"></a>
			
		</div>
	</div>
</div>
    </div>
    
    <div class="toc">
        
        <div class="page-operation">
            <div><a href="#"><img src="/imgs/icons/arrow-up-circle.svg" alt=""></a></div>
            <div><a href="https://lovemjh.vercel.app/posts/tool/_20220527215246/"><img src="/imgs/icons/arrow-left-circle.svg" alt=""></a></div>
            <div><a href="https://lovemjh.vercel.app/posts/project-0/20220527220542/"><img src="/imgs/icons/arrow-right-circle.svg" alt=""></a></div>
        </div>
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#å­¦ä¹ ç›®æ ‡">å­¦ä¹ ç›®æ ‡</a></li>
    <li><a href="#ä¸€-thymeleafå…¥é—¨">ä¸€ Thymeleafå…¥é—¨</a>
      <ul>
        <li><a href="#1-thymeleafä»‹ç»">1 Thymeleafä»‹ç»</a></li>
        <li><a href="#2-springbootæ•´åˆthymeleaf">2 Springbootæ•´åˆthymeleaf</a></li>
        <li><a href="#3-thymeleafåŸºæœ¬è¯­æ³•">3 ThymeleafåŸºæœ¬è¯­æ³•</a>
          <ul>
            <li><a href="#1thaction">(1)th:action</a></li>
            <li><a href="#2theach">(2)th:each</a></li>
            <li><a href="#3mapè¾“å‡º">(3)Mapè¾“å‡º</a></li>
            <li><a href="#4æ•°ç»„è¾“å‡º">(4)æ•°ç»„è¾“å‡º</a></li>
            <li><a href="#5dateè¾“å‡º">(5)Dateè¾“å‡º</a></li>
            <li><a href="#6thifæ¡ä»¶">(6)th:ifæ¡ä»¶</a></li>
            <li><a href="#7ä½¿ç”¨javascript">(7)ä½¿ç”¨javascript</a></li>
            <li><a href="#8å­—ç¬¦æ‹¼æ¥-ä½¿ç”¨">(8)å­—ç¬¦æ‹¼æ¥ ä½¿ç”¨||</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#äºŒ-æœç´¢é¡µé¢æ¸²æŸ“äº†è§£">äºŒ æœç´¢é¡µé¢æ¸²æŸ“ï¼ˆäº†è§£ï¼‰</a>
      <ul>
        <li><a href="#1-æœç´¢åˆ†æ">1 æœç´¢åˆ†æ</a></li>
        <li><a href="#2-æœç´¢å®ç°">2 æœç´¢å®ç°</a>
          <ul>
            <li><a href="#21-æœç´¢å·¥ç¨‹æ­å»º">2.1 æœç´¢å·¥ç¨‹æ­å»º</a></li>
            <li><a href="#22-æœç´¢æ•°æ®å¡«å……">2.2 æœç´¢æ•°æ®å¡«å……</a></li>
            <li><a href="#23-å…³é”®å­—æœç´¢">2.3 å…³é”®å­—æœç´¢</a></li>
            <li><a href="#24-æœç´¢æ¡ä»¶å›æ˜¾">2.4 æœç´¢æ¡ä»¶å›æ˜¾</a></li>
            <li><a href="#25-æ¡ä»¶æœç´¢å®ç°">2.5 æ¡ä»¶æœç´¢å®ç°</a></li>
            <li><a href="#26-ç§»é™¤æœç´¢æ¡ä»¶">2.6 ç§»é™¤æœç´¢æ¡ä»¶</a></li>
            <li><a href="#27-é€‰ä¸­æœç´¢æ¡ä»¶éšè—æœç´¢é¢æ¿é¡¹">2.7 é€‰ä¸­æœç´¢æ¡ä»¶éšè—æœç´¢é¢æ¿é¡¹</a></li>
            <li><a href="#heading"></a></li>
            <li><a href="#28-æ’åºä½œä¸š">2.8 æ’åº(ä½œä¸š)</a></li>
            <li><a href="#29-åˆ†é¡µ">2.9 åˆ†é¡µ</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#ä¸‰-ä¸œæ˜“ä¹°å•†å“è¯¦æƒ…é¡µ">ä¸‰ ä¸œæ˜“ä¹°å•†å“è¯¦æƒ…é¡µ</a>
      <ul>
        <li><a href="#1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç½‘é¡µé™æ€åŒ–æŠ€æœ¯">1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç½‘é¡µé™æ€åŒ–æŠ€æœ¯</a></li>
        <li><a href="#2-éœ€æ±‚åˆ†æ">2 éœ€æ±‚åˆ†æ</a></li>
        <li><a href="#3-å•†å“é™æ€åŒ–å¾®æœåŠ¡åˆ›å»º">3 å•†å“é™æ€åŒ–å¾®æœåŠ¡åˆ›å»º</a>
          <ul>
            <li><a href="#31-æ­å»ºé¡¹ç›®">3.1 æ­å»ºé¡¹ç›®</a></li>
            <li><a href="#32-ç”Ÿæˆé™æ€é¡µ">3.2 ç”Ÿæˆé™æ€é¡µ</a>
              <ul>
                <li><a href="#321-éœ€æ±‚åˆ†æ">3.2.1 éœ€æ±‚åˆ†æ</a></li>
                <li><a href="#322-feignåˆ›å»º">3.2.2 Feignåˆ›å»º</a></li>
                <li><a href="#323-é™æ€é¡µç”Ÿæˆä»£ç ">3.2.3 é™æ€é¡µç”Ÿæˆä»£ç </a></li>
                <li><a href="#324-æ¨¡æ¿å¡«å……">3.2.4 æ¨¡æ¿å¡«å……</a></li>
                <li><a href="#325-å¯åŠ¨æµ‹è¯•">3.2.5 å¯åŠ¨æµ‹è¯•</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#å››-canalç›‘å¬ç”Ÿæˆé™æ€é¡µ">å›› canalç›‘å¬ç”Ÿæˆé™æ€é¡µ</a>
      <ul>
        <li><a href="#1-éœ€æ±‚åˆ†æ">1 éœ€æ±‚åˆ†æ</a></li>
        <li><a href="#2-feignåˆ›å»º">2 Feignåˆ›å»º</a></li>
        <li><a href="#3-canalç›‘å¬æ•°æ®å˜åŒ–">3 canalç›‘å¬æ•°æ®å˜åŒ–</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  content '>
        <h1 align = "center">ç¬¬å…«ç« </h1>
<h1 align = "center">Thymeleafå®ç°æœç´¢é¡µé¢æ¸²æŸ“åŠå•†å“é™æ€é¡µ</h1>
<h3 align="center">ä¼˜å°±ä¸š.JAVAæ•™ç ”å®¤</h3>
<h1 id="å­¦ä¹ ç›®æ ‡">å­¦ä¹ ç›®æ ‡</h1>
<p>ç›®æ ‡1ï¼šæœç´¢é¡µé¢æ¸²æŸ“</p>
<p>ç›®æ ‡2ï¼šThymeleafçš„ä»‹ç»</p>
<p>ç›®æ ‡3ï¼šThymeleafçš„å…¥é—¨</p>
<p>ç›®æ ‡4ï¼šThymeleafçš„è¯­æ³•åŠæ ‡ç­¾</p>
<p>ç›®æ ‡5ï¼šæœç´¢é¡µé¢æ¸²æŸ“</p>
<p>ç›®æ ‡6ï¼šå•†å“è¯¦æƒ…é¡µé™æ€åŒ–å·¥ç¨‹æ­å»º</p>
<p>ç›®æ ‡7ï¼šå•†å“è¯¦æƒ…é¡µé™æ€åŒ–åŠŸèƒ½å®ç°</p>
<p>ç›®æ ‡8ï¼šç”¨æˆ·ä¿®æ”¹å•†å“ä¿¡æ¯ï¼ŒåŒæ­¥æ›´æ–°åˆ›å»ºå•†å“è¯¦æƒ…é¡µ</p>
<h1 id="ä¸€-thymeleafå…¥é—¨">ä¸€ Thymeleafå…¥é—¨</h1>
<h2 id="1-thymeleafä»‹ç»">1 Thymeleafä»‹ç»</h2>
<p>thymeleafæ˜¯ä¸€ä¸ªXML/XHTML/HTML5æ¨¡æ¿å¼•æ“ï¼Œå¯ç”¨äºWebä¸éWebç¯å¢ƒä¸­çš„åº”ç”¨å¼€å‘ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„Javaåº“ï¼ŒåŸºäºApache License 2.0è®¸å¯ï¼Œç”±Daniel FernÃ¡ndezåˆ›å»ºï¼Œè¯¥ä½œè€…è¿˜æ˜¯JavaåŠ å¯†åº“Jasyptçš„ä½œè€…ã€‚</p>
<p>Thymeleafæä¾›äº†ä¸€ä¸ªç”¨äºæ•´åˆSpring MVCçš„å¯é€‰æ¨¡å—ï¼Œåœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Thymeleafæ¥å®Œå…¨ä»£æ›¿JSPæˆ–å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œå¦‚Velocityã€FreeMarkerç­‰ã€‚Thymeleafçš„ä¸»è¦ç›®æ ‡åœ¨äºæä¾›ä¸€ç§å¯è¢«æµè§ˆå™¨æ­£ç¡®æ˜¾ç¤ºçš„ã€æ ¼å¼è‰¯å¥½çš„æ¨¡æ¿åˆ›å»ºæ–¹å¼ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ç”¨ä½œé™æ€å»ºæ¨¡ã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒåˆ›å»ºç»è¿‡éªŒè¯çš„XMLä¸HTMLæ¨¡æ¿ã€‚ç›¸å¯¹äºç¼–å†™é€»è¾‘æˆ–ä»£ç ï¼Œå¼€å‘è€…åªéœ€å°†æ ‡ç­¾å±æ€§æ·»åŠ åˆ°æ¨¡æ¿ä¸­å³å¯ã€‚æ¥ä¸‹æ¥ï¼Œè¿™äº›æ ‡ç­¾å±æ€§å°±ä¼šåœ¨DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ä¸Šæ‰§è¡Œé¢„å…ˆåˆ¶å®šå¥½çš„é€»è¾‘ã€‚</p>
<p>å®ƒçš„ç‰¹ç‚¹ä¾¿æ˜¯ï¼šå¼€ç®±å³ç”¨ï¼ŒThymeleafå…è®¸æ‚¨å¤„ç†å…­ç§æ¨¡æ¿ï¼Œæ¯ç§æ¨¡æ¿ç§°ä¸ºæ¨¡æ¿æ¨¡å¼ï¼š</p>
<ul>
<li>XML</li>
<li>æœ‰æ•ˆçš„XML</li>
<li>XHTML</li>
<li>æœ‰æ•ˆçš„XHTML</li>
<li>HTML5</li>
<li>æ—§ç‰ˆHTML5</li>
</ul>
<p>æ‰€æœ‰è¿™äº›æ¨¡å¼éƒ½æŒ‡çš„æ˜¯æ ¼å¼è‰¯å¥½çš„XMLæ–‡ä»¶ï¼Œä½†<code>*Legacy HTML5*</code>æ¨¡å¼é™¤å¤–ï¼Œå®ƒå…è®¸æ‚¨å¤„ç†HTML5æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ç‹¬ç«‹ï¼ˆéå…³é—­ï¼‰æ ‡è®°ï¼Œæ²¡æœ‰å€¼çš„æ ‡è®°å±æ€§æˆ–ä¸åœ¨å¼•å·ä¹‹é—´å†™å…¥çš„æ ‡è®°å±æ€§ã€‚ä¸ºäº†åœ¨è¿™ç§ç‰¹å®šæ¨¡å¼ä¸‹å¤„ç†æ–‡ä»¶ï¼ŒThymeleafå°†é¦–å…ˆæ‰§è¡Œè½¬æ¢ï¼Œå°†æ‚¨çš„æ–‡ä»¶è½¬æ¢ä¸ºæ ¼å¼è‰¯å¥½çš„XMLæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä»ç„¶æ˜¯å®Œå…¨æœ‰æ•ˆçš„HTML5ï¼ˆå®é™…ä¸Šæ˜¯åˆ›å»ºHTML5ä»£ç çš„æ¨èæ–¹æ³•ï¼‰<a class="link" href="/posts/project-0/https://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#fn1"  target="_blank" rel="noopener"
    >1</a>ã€‚</p>
<p>å¦è¯·æ³¨æ„ï¼ŒéªŒè¯ä»…é€‚ç”¨äºXMLå’ŒXHTMLæ¨¡æ¿ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™äº›å¹¶ä¸æ˜¯Thymeleafå¯ä»¥å¤„ç†çš„å”¯ä¸€æ¨¡æ¿ç±»å‹ï¼Œå¹¶ä¸”ç”¨æˆ·å§‹ç»ˆèƒ½å¤Ÿé€šè¿‡æŒ‡å®šåœ¨æ­¤æ¨¡å¼ä¸‹<em>è§£æ</em>æ¨¡æ¿çš„æ–¹æ³•å’Œ<em>ç¼–å†™</em>ç»“æœçš„æ–¹å¼æ¥å®šä¹‰ä»–/å¥¹è‡ªå·±çš„æ¨¡å¼ã€‚è¿™æ ·ï¼Œä»»ä½•å¯ä»¥å»ºæ¨¡ä¸ºDOMæ ‘ï¼ˆæ— è®ºæ˜¯å¦ä¸ºXMLï¼‰çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«Thymeleafæœ‰æ•ˆåœ°ä½œä¸ºæ¨¡æ¿å¤„ç†ã€‚</p>
<h2 id="2-springbootæ•´åˆthymeleaf">2 Springbootæ•´åˆthymeleaf</h2>
<p>ä½¿ç”¨springboot æ¥é›†æˆä½¿ç”¨Thymeleafå¯ä»¥å¤§å¤§å‡å°‘å•çº¯ä½¿ç”¨thymleafçš„ä»£ç é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥ä½¿ç”¨springbooté›†æˆä½¿ç”¨thymeleaf.</p>
<p>å®ç°çš„æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªsprinbooté¡¹ç›®</li>
<li>æ·»åŠ thymeleafçš„èµ·æ­¥ä¾èµ–</li>
<li>æ·»åŠ spring webçš„èµ·æ­¥ä¾èµ–</li>
<li>ç¼–å†™html ä½¿ç”¨thymleafçš„è¯­æ³•è·å–å˜é‡å¯¹åº”åå°ä¼ é€’çš„å€¼</li>
<li>ç¼–å†™controller è®¾ç½®å˜é‡çš„å€¼åˆ°modelä¸­</li>
</ul>
<p>(1)åˆ›å»ºå·¥ç¨‹</p>
<p>åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ç¨‹springboot-thymeleaf,è¯¥å·¥ç¨‹ä¸ºæ¡ˆä¾‹å·¥ç¨‹ï¼Œä¸éœ€è¦æ”¾åˆ°dongyimai-parentå·¥ç¨‹ä¸­ã€‚</p>
<p><strong>pom.xmlä¾èµ–</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;project</span> <span style="color:#008080">xmlns=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xmlns:xsi=</span><span style="color:#d14">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xsi:schemaLocation=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;modelVersion&gt;</span>4.0.0<span style="color:#000080">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;artifactId&gt;</span>springboot-thymeleaf<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;version&gt;</span>1.0-SNAPSHOT<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;parent&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;version&gt;</span>2.3.9.RELEASE<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/parent&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">&lt;!--webèµ·æ­¥ä¾èµ–--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">&lt;!--thymeleafé…ç½®--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/project&gt;</span>
</span></span></code></pre></div><p>(2)åˆ›å»ºhtml</p>
<p>åœ¨resourcesä¸­åˆ›å»ºtemplatesç›®å½•ï¼Œåœ¨templatesç›®å½•åˆ›å»º demo1.html,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">html</span> <span style="color:#008080">xmlns:th</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;http://www.thymeleaf.org&#34;</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">title</span>&gt;Thymeleafçš„å…¥é—¨&lt;/<span style="color:#000080">title</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">meta</span> <span style="color:#008080">http-equiv</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Content-Type&#34;</span> <span style="color:#008080">content</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text/html; charset=UTF-8&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">head</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">body</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--è¾“å‡ºhelloæ•°æ®--&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">p</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${hello}&#34;</span>&gt;&lt;/<span style="color:#000080">p</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">html</span>&gt;
</span></span></code></pre></div><p>è§£é‡Šï¼š</p>
<p><code>&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</code>:è¿™å¥å£°æ˜ä½¿ç”¨thymeleafæ ‡ç­¾</p>
<p><code>&lt;p th:text=&quot;${hello}&quot;&gt;&lt;/p&gt;</code>:è¿™å¥ä½¿ç”¨ th:text=&quot;${å˜é‡å}&quot; è¡¨ç¤º ä½¿ç”¨thymeleafè·å–æ–‡æœ¬æ•°æ®ï¼Œç±»ä¼¼äºELè¡¨è¾¾å¼ã€‚</p>
<p>(3)ä¿®æ”¹application.ymlé…ç½®</p>
<p>åˆ›å»ºapplication.yml,å¹¶è®¾ç½®thymeleafçš„ç¼“å­˜è®¾ç½®ï¼Œè®¾ç½®ä¸ºfalseã€‚é»˜è®¤åŠ ç¼“å­˜çš„ï¼Œç”¨äºæµ‹è¯•ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">spring</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">thymeleaf</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">cache</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span></span></span></code></pre></div><p>åœ¨è¿™é‡Œï¼Œå…¶å®è¿˜æœ‰ä¸€äº›é»˜è®¤é…ç½®ï¼Œæ¯”å¦‚è§†å›¾å‰ç¼€ï¼šclasspath:/templates/,è§†å›¾åç¼€ï¼š.html</p>
<p><code>org.springframework.boot.autoconfigure.thymeleaf.ThymeleafProperties</code>éƒ¨åˆ†æºç å¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527231931353.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>(4)æ§åˆ¶å±‚</p>
<p>åˆ›å»ºcontrollerç”¨äºæµ‹è¯•åå° è®¾ç½®æ•°æ®åˆ°modelä¸­ã€‚</p>
<p>åˆ›å»ºcom.offcn.controller.TestControllerï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Controller</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/test&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">TestController</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * è®¿é—®/test/hello  è·³è½¬åˆ°demo1é¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param model
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/hello&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> String <span style="color:#900;font-weight:bold">hello</span><span style="color:#000;font-weight:bold">(</span>Model model<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;hello&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;hello welcome&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;demo1&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(5)æµ‹è¯•</p>
<p>åˆ›å»ºå¯åŠ¨ç±»<code>com.offcn.ThymeleafApplication</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@SpringBootApplication</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">ThymeleafApplication</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        SpringApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">run</span><span style="color:#000;font-weight:bold">(</span>ThymeleafApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">,</span>args<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>å¯åŠ¨ç³»ç»Ÿï¼Œå¹¶åœ¨æµè§ˆå™¨è®¿é—®</p>
<pre tabindex="0"><code>http://localhost:8080/test/hello
</code></pre><p><img src="/posts/project-0/20220527231757/image-20220527231940177.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="3-thymeleafåŸºæœ¬è¯­æ³•">3 ThymeleafåŸºæœ¬è¯­æ³•</h2>
<h3 id="1thaction">(1)th:action</h3>
<p>å®šä¹‰åå°æ§åˆ¶å™¨è·¯å¾„ï¼Œç±»ä¼¼<code>&lt;form&gt;</code>æ ‡ç­¾çš„actionå±æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">form</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;login-form&#34;</span> <span style="color:#008080">th:action</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{/test/hello}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">button</span>&gt;æäº¤&lt;/<span style="color:#000080">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">form</span>&gt;
</span></span></code></pre></div><p>è¡¨ç¤ºæäº¤çš„è¯·æ±‚åœ°å€ä¸º<code>/test/hello</code></p>
<h3 id="2theach">(2)th:each</h3>
<p>å¯¹è±¡éå†ï¼ŒåŠŸèƒ½ç±»ä¼¼jstlä¸­çš„<code>&lt;c:forEach&gt;</code>æ ‡ç­¾ã€‚</p>
<p>åˆ›å»ºcom.offcn.model.User,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">User</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> Integer id<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> String name<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> String address<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//æ— å‚å’Œå…¨å‚æ„é€ å™¨ä»¥åŠ..get..set
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Controlleræ·»åŠ æ•°æ®</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * è®¿é—®/test/hello  è·³è½¬åˆ°demo1é¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param model
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/hello&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> String <span style="color:#900;font-weight:bold">hello</span><span style="color:#000;font-weight:bold">(</span>Model model<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>    model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;hello&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;hello welcome&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//é›†åˆæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    List<span style="color:#000;font-weight:bold">&lt;</span>User<span style="color:#000;font-weight:bold">&gt;</span> users <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;</span>User<span style="color:#000;font-weight:bold">&gt;();</span>
</span></span><span style="display:flex;"><span>    users<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> User<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;å¼ ä¸‰&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;æ·±åœ³&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    users<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> User<span style="color:#000;font-weight:bold">(</span>2<span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;æå››&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;åŒ—äº¬&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    users<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> User<span style="color:#000;font-weight:bold">(</span>3<span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;ç‹äº”&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;æ­¦æ±‰&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;users&#34;</span><span style="color:#000;font-weight:bold">,</span>users<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;demo1&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>é¡µé¢è¾“å‡º</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">table</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">tr</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span>&gt;ä¸‹æ ‡&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span>&gt;ç¼–å·&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span>&gt;å§“å&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span>&gt;ä½å€&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#000080">tr</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">tr</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;user,userStat:${users}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>            ä¸‹æ ‡:&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${userStat.index}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;,
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${user.id}&#34;</span>&gt;&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${user.name}&#34;</span>&gt;&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">td</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${user.address}&#34;</span>&gt;&lt;/<span style="color:#000080">td</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#000080">tr</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">table</span>&gt;
</span></span></code></pre></div><p>æµ‹è¯•æ•ˆæœ
<img src="/posts/project-0/20220527231757/image-20220527231951362.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="3mapè¾“å‡º">(3)Mapè¾“å‡º</h3>
<p>åå°æ·»åŠ Map</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//Mapå®šä¹‰
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>Object<span style="color:#000;font-weight:bold">&gt;</span> dataMap <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> HashMap<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>Object<span style="color:#000;font-weight:bold">&gt;();</span>
</span></span><span style="display:flex;"><span>dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;No&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;123&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;address&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;æ·±åœ³&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;dataMap&#34;</span><span style="color:#000;font-weight:bold">,</span>dataMap<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>é¡µé¢è¾“å‡º</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;map,mapStat:${dataMap}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">div</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${map}&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>    key:&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${mapStat.current.key}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;&lt;<span style="color:#000080">br</span>/&gt;
</span></span><span style="display:flex;"><span>    value:&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${mapStat.current.value}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;&lt;<span style="color:#000080">br</span>/&gt;
</span></span><span style="display:flex;"><span>    ==============================================
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>æµ‹è¯•æ•ˆæœ
<img src="/posts/project-0/20220527231757/image-20220527231959198.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="4æ•°ç»„è¾“å‡º">(4)æ•°ç»„è¾“å‡º</h3>
<p>åå°æ·»åŠ æ•°ç»„</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//å­˜å‚¨ä¸€ä¸ªæ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>String<span style="color:#000;font-weight:bold">[]</span> names <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#d14">&#34;å¼ ä¸‰&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;æå››&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;ç‹äº”&#34;</span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;names&#34;</span><span style="color:#000;font-weight:bold">,</span>names<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>é¡µé¢è¾“å‡º</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;nm,nmStat:${names}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${nmStat.count}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${nm}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>    ==============================================
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>æµ‹è¯•æ•ˆæœ
<img src="/posts/project-0/20220527231757/image-20220527232005560.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="5dateè¾“å‡º">(5)Dateè¾“å‡º</h3>
<p>åå°æ·»åŠ æ—¥æœŸ</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//æ—¥æœŸ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;now&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">());</span>
</span></span></code></pre></div><p>é¡µé¢è¾“å‡º</p>
<pre tabindex="0"><code class="language-php+HTML" data-lang="php+HTML">&lt;div&gt;
    &lt;h1&gt;Dateè¾“å‡º th:text&lt;/h1&gt;
    &lt;span th:text=&#34;${#dates.format(now,&#39;yyyy-MM-dd hh:ss:mm&#39;)}&#34;&gt;&lt;/span&gt;
&lt;/div&gt;
</code></pre><p>æµ‹è¯•æ•ˆæœ
<img src="/posts/project-0/20220527231757/image-20220527232012182.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="6thifæ¡ä»¶">(6)th:ifæ¡ä»¶</h3>
<p>åå°æ·»åŠ å¹´é¾„</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//ifæ¡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;age&#34;</span><span style="color:#000;font-weight:bold">,</span>22<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>é¡µé¢è¾“å‡º</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>     &lt;<span style="color:#000080">h1</span>&gt;æ¡ä»¶åˆ¤æ–­ th:if&lt;/<span style="color:#000080">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">span</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${(age&gt;=18)}&#34;</span>&gt;ç»ˆäºé•¿å¤§äº†ï¼&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>æµ‹è¯•æ•ˆæœ
<img src="/posts/project-0/20220527231757/image-20220527232019197.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="7ä½¿ç”¨javascript">(7)ä½¿ç”¨javascript</h3>
<p><img src="/posts/project-0/20220527231757/image-20220527232024623.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>javaä»£ç ä¸º:
<img src="/posts/project-0/20220527231757/image-20220527232029596.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">button</span> <span style="color:#008080">onclick</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;abc()&#34;</span>&gt;aaaaaaa&lt;/<span style="color:#000080">button</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">script</span> <span style="color:#008080">th:inline</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> hhh<span style="color:#000;font-weight:bold">=</span>[[${hello}]];
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">function</span> abc(){
</span></span><span style="display:flex;"><span>        alert(hhh);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">html</span>&gt;
</span></span></code></pre></div><p>è¿è¡Œç»“æœï¼šï¼ˆæ³¨æ„scriptæ”¾ç½®åœ¨bodyå¤–é¢ï¼‰</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232036664.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="8å­—ç¬¦æ‹¼æ¥-ä½¿ç”¨">(8)å­—ç¬¦æ‹¼æ¥ ä½¿ç”¨||</h3>
<p>åå°ä»£ç :
<img src="/posts/project-0/20220527231757/image-20220527232042777.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æ¨¡æ¿:
<img src="/posts/project-0/20220527231757/image-20220527232049016.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æŸ¥çœ‹ç”Ÿæˆçš„é¡µé¢demo1.htmlçš„æºç ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232055293.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="äºŒ-æœç´¢é¡µé¢æ¸²æŸ“äº†è§£">äºŒ æœç´¢é¡µé¢æ¸²æŸ“ï¼ˆäº†è§£ï¼‰</h1>
<h2 id="1-æœç´¢åˆ†æ">1 æœç´¢åˆ†æ</h2>
<p><img src="/posts/project-0/20220527231757/image-20220527232101303.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220527231757/image-20220527232106209.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æœç´¢é¡µé¢è¦æ˜¾ç¤ºçš„å†…å®¹ä¸»è¦åˆ†ä¸º3å—ã€‚</p>
<p>1)æœç´¢çš„æ•°æ®ç»“æœ</p>
<p>2)ç­›é€‰å‡ºçš„æ•°æ®æœç´¢æ¡ä»¶</p>
<p>3)ç”¨æˆ·å·²ç»å‹¾é€‰çš„æ•°æ®æ¡ä»¶</p>
<h2 id="2-æœç´¢å®ç°">2 æœç´¢å®ç°</h2>
<p><img src="/posts/project-0/20220527231757/image-20220527232114255.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æœç´¢çš„ä¸šåŠ¡æµç¨‹å¦‚ä¸Šå›¾ï¼Œç”¨æˆ·æ¯æ¬¡æœç´¢çš„æ—¶å€™ï¼Œå…ˆç»è¿‡æœç´¢ä¸šåŠ¡å·¥ç¨‹ï¼Œæœç´¢ä¸šåŠ¡å·¥ç¨‹è°ƒç”¨æœç´¢å¾®æœåŠ¡å·¥ç¨‹ï¼Œè¿™é‡Œæœç´¢ä¸šåŠ¡å·¥ç¨‹å•ç‹¬æŒªå‡ºæ¥çš„åŸå› æ˜¯å®ƒè¿™é‡Œæ¶‰åŠåˆ°äº†æ¨¡æ¿æ¸²æŸ“ä»¥åŠå…¶ä»–ç»¼åˆä¸šåŠ¡å¤„ç†ï¼Œä»¥åå¾ˆæœ‰å¯èƒ½ä¼šæœ‰ç§»åŠ¨ç«¯çš„æœç´¢å’ŒPCç«¯çš„æœç´¢ï¼Œåç«¯æ¸²æŸ“å¦‚æœç›´æ¥åœ¨æœç´¢å¾®æœåŠ¡ä¸­è¿›è¡Œï¼Œä¼šå¯¹å¾®æœåŠ¡é€ æˆä¸€å®šçš„ä¾µå…¥ï¼Œä¸æ¨èè¿™ä¹ˆåšï¼Œæ¨èå¾®æœåŠ¡ç‹¬ç«‹ï¼Œåªæä¾›æœåŠ¡ï¼Œå¦‚æœæœ‰å…¶ä»–é¡µé¢æ¸²æŸ“æ“ä½œï¼Œå¯ä»¥æ­å»ºä¸€ä¸ªç‹¬ç«‹çš„æ¶ˆè´¹å·¥ç¨‹è°ƒç”¨å¾®æœåŠ¡è¾¾åˆ°ç›®çš„ã€‚</p>
<h3 id="21-æœç´¢å·¥ç¨‹æ­å»º">2.1 æœç´¢å·¥ç¨‹æ­å»º</h3>
<p>(1)å·¥ç¨‹åˆ›å»º</p>
<p>åœ¨dongyimai-webå·¥ç¨‹ä¸­åˆ›å»ºdongyimai-search-webå·¥ç¨‹,</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232120176.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å¹¶åœ¨dongyimai-webçš„pom.xmlä¸­å¼•å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>spring-cloud-starter-netflix-eureka-client<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!--feign--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>spring-cloud-starter-openfeign<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependencies&gt;</span>
</span></span></code></pre></div><p>(2)é™æ€èµ„æºå¯¼å…¥</p>
<p>å°†èµ„æºä¸­çš„<code>é¡µé¢/å‰ç«¯é¡µé¢/search.html</code>æ‹·è´åˆ°å·¥ç¨‹çš„<code>resources/templates</code>ç›®å½•ä¸‹ï¼Œjsã€cssç­‰æ‹·è´åˆ°<code>static</code>ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232127204.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>(3)Feignåˆ›å»º</p>
<p>dongyimai-search-service-apiï¼Œæ·»åŠ <code>com.offcn.search.feign.SearchSkuFeign</code>ï¼Œ</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232132589.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å®ç°è°ƒç”¨æœç´¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@FeignClient</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;search&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/search&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">SearchSkuFeign</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æœç´¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param searchMap
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@GetMapping</span>
</span></span><span style="display:flex;"><span>    Map <span style="color:#900;font-weight:bold">search</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@RequestBody</span><span style="color:#000;font-weight:bold">(</span>required <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">)</span> Map searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>ç”±äºä»¥ååšæœç´¢éƒ½æ˜¯åŸºäºGETè¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†ä¹‹å‰çš„æœç´¢æ”¹æˆGETè¯·æ±‚æ“ä½œï¼Œä¿®æ”¹<code>dongyimai-search-service</code>å¾®æœåŠ¡çš„<code>com.offcn.search.controller.SkuController</code>é‡Œé¢çš„<code>search</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232359336.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>(4)dongyimai-search-webçš„pom.xmlä¾èµ–dongyimai-search-service-api</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-search-service-api<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;exclusions&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000080">&lt;exclusion&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000080">&lt;groupId&gt;</span>com.alibaba<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#000080">&lt;artifactId&gt;</span>druid-spring-boot-starter<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000080">&lt;/exclusion&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#000080">&lt;/exclusions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>(5)æœç´¢è°ƒç”¨</p>
<p>åœ¨dongyimai-search-webä¸­åˆ›å»ºcom.offcn.search.controller.SkuController,å®ç°è°ƒç”¨æœç´¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Controller</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/search&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SkuController</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> SearchSkuFeign searchSkuFeign<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æœç´¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param searchMap
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@GetMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/list&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> String <span style="color:#900;font-weight:bold">search</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@RequestParam</span><span style="color:#000;font-weight:bold">(</span>required <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">)</span> Map searchMap<span style="color:#000;font-weight:bold">,</span> Model model<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//dongyimai-search-serviceå¾®æœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Map resultMap <span style="color:#000;font-weight:bold">=</span> searchSkuFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">search</span><span style="color:#000;font-weight:bold">(</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;result&#34;</span><span style="color:#000;font-weight:bold">,</span>resultMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;search&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(6)å¯åŠ¨ç±»åˆ›å»º</p>
<p>ä¿®æ”¹dongyimai-search-web,æ·»åŠ å¯åŠ¨ç±»com.offcn.search.SearchWebApplicationï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@SpringBootApplication</span><span style="color:#000;font-weight:bold">(</span>exclude<span style="color:#000;font-weight:bold">={</span>DataSourceAutoConfiguration<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableDiscoveryClient</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableFeignClients</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SearchWebApplication</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        SpringApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">run</span><span style="color:#000;font-weight:bold">(</span>SearchWebApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">,</span>args<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(7)application.ymlé…ç½®æ–‡ä»¶</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">server:
  port: 9101
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka
  instance:
    prefer-ip-address: true
feign:
  hystrix:
    enabled: true
spring:
  thymeleaf:
    cache: false
  application:
    name: search-web
  main:
    allow-bean-definition-overriding: true  
</code></pre><p>(8)é¡¹ç›®å®Œæ•´ç»“æ„
<img src="/posts/project-0/20220527231757/image-20220527232412682.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>åœ¨search.htmlçš„å¤´éƒ¨å¼•å…¥thymeleafæ ‡ç­¾</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;html</span> <span style="color:#008080">xmlns:th=</span><span style="color:#d14">&#34;http://www.thymeleaf.org&#34;</span><span style="color:#000080">&gt;</span>
</span></span></code></pre></div><p>å°†æ ·å¼ä¿®æ”¹ä¸ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">link</span> <span style="color:#008080">rel</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;stylesheet&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text/css&#34;</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;css/webbase.css&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{/css/webbase.css}&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">link</span> <span style="color:#008080">rel</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;stylesheet&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text/css&#34;</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;css/pages-list.css&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{/css/pages-list.css}&#34;</span>/&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">link</span> <span style="color:#008080">rel</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;stylesheet&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text/css&#34;</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;css/widget-cartPanelView.css&#34;</span>
</span></span><span style="display:flex;"><span>			  <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{/css/widget-cartPanelView.css}&#34;</span>/&gt;
</span></span></code></pre></div><p>æµ‹è¯•ï¼š<code>http://localhost:9101/search</code>,æ•ˆæœå¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232419302.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="22-æœç´¢æ•°æ®å¡«å……">2.2 æœç´¢æ•°æ®å¡«å……</h3>
<p>åç«¯æœç´¢åˆ°æ•°æ®åï¼Œå‰ç«¯é¡µé¢è¿›è¡Œæ•°æ®æ˜¾ç¤ºï¼Œæ˜¾ç¤ºçš„æ•°æ®åˆ†ä¸º3éƒ¨åˆ†</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">1)æœç´¢çš„æ•°æ®ç»“æœ
2)ç­›é€‰å‡ºçš„æ•°æ®æœç´¢æ¡ä»¶
3)ç”¨æˆ·å·²ç»å‹¾é€‰çš„æ•°æ®æ¡ä»¶
</code></pre><h3 id="23-å…³é”®å­—æœç´¢">2.3 å…³é”®å­—æœç´¢</h3>
<p>ç”¨æˆ·æ¯æ¬¡è¾“å…¥å…³é”®å­—çš„æ—¶å€™ï¼Œç›´æ¥æ ¹æ®å…³é”®å­—æœç´¢ï¼Œå…³é”®å­—æœç´¢çš„æ•°æ®ä¼šå­˜å‚¨åˆ°<code>result.rows</code>ä¸­ï¼Œé¡µé¢æ¯æ¬¡æ ¹æ®resultè·å–rowsï¼Œç„¶åå¾ªç¯è¾“å‡ºå³å¯,åŒæ—¶é¡µé¢çš„æœç´¢æ¡†æ¯æ¬¡éœ€è¦å›æ˜¾æœç´¢çš„å…³é”®è¯ã€‚</p>
<p>å®ç°æ€è·¯</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">1.å‰ç«¯è¡¨å•æäº¤æœç´¢çš„å…³é”®è¯
2.åç«¯æ ¹æ®å…³é”®è¯è¿›è¡Œæœç´¢
3.å°†æœç´¢æ¡ä»¶å­˜å‚¨åˆ°Modelä¸­
4.é¡µé¢å¾ªç¯è¿­ä»£è¾“å‡ºæ•°æ®
5.æœç´¢è¡¨å•å›æ˜¾æœç´¢çš„å…³é”®è¯
</code></pre><p>(1)åå°æœç´¢å®ç°</p>
<p>ä¿®æ”¹SkuControllerçš„searchæ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * æœç´¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param searchMap
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@GetMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/list&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> String <span style="color:#900;font-weight:bold">search</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@RequestParam</span><span style="color:#000;font-weight:bold">(</span>required <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">)</span> Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>String<span style="color:#000;font-weight:bold">&gt;</span> searchMap<span style="color:#000;font-weight:bold">,</span> Model model<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//è°ƒç”¨dongyimai-search-serviceå¾®æœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>Object<span style="color:#000;font-weight:bold">&gt;</span> resultMap <span style="color:#000;font-weight:bold">=</span> searchSkuFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">search</span><span style="color:#000;font-weight:bold">(</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//æœç´¢æ•°æ®ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;result&#34;</span><span style="color:#000;font-weight:bold">,</span>resultMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//æœç´¢æ¡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;searchMap&#34;</span><span style="color:#000;font-weight:bold">,</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;search&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)é¡µé¢æœç´¢å®ç°</p>
<p>ä¿®æ”¹search.html
<img src="/posts/project-0/20220527231757/image-20220527232426786.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">form</span> <span style="color:#008080">action</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;/search/list&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-form form-inline&#34;</span>&gt;
</span></span><span style="display:flex;"><span>   <span style="color:#998;font-style:italic">&lt;!--searchAutoComplete--&gt;</span>
</span></span><span style="display:flex;"><span>   &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;input-append&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#000080">input</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;text&#34;</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;autocomplete&#34;</span> <span style="color:#008080">name</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;keywords&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#008080">th:value</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;keywords&#39;)}?${searchMap.keywords}:&#39;&#39;&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;input-error input-xxlarge&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#000080">button</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn btn-xlarge btn-danger&#34;</span> <span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;submit&#34;</span>&gt;æœç´¢&lt;/<span style="color:#000080">button</span>&gt;
</span></span><span style="display:flex;"><span>   &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">form</span>&gt;
</span></span></code></pre></div><p>æ³¨æ„ï¼šæœç´¢æŒ‰é’®ä¸ºsubmitæäº¤ã€‚</p>
<p>(3)é¡µé¢ç»“æœè¾“å‡º</p>
<p>ä¿®æ”¹search.htmlï¼Œä»£ç å¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232434952.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;yui3-g&#34;</span>&gt;
</span></span><span style="display:flex;"><span>   &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;yui3-u-1-5&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sku,skuStat:${result.rows}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;list-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;p-img&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;item.html&#34;</span> <span style="color:#008080">target</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;_blank&#34;</span>&gt;&lt;<span style="color:#000080">img</span> <span style="color:#008080">th:src</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${sku.image}&#34;</span> /&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;price&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">strong</span>&gt;
</span></span><span style="display:flex;"><span>                  &lt;<span style="color:#000080">em</span>&gt;Â¥&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>                  &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${sku.price}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>               &lt;/<span style="color:#000080">strong</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;attr&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">em</span> <span style="color:#008080">th:utext</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#strings.abbreviate(sku.title,45)}&#34;</span>&gt;&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;cu&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">em</span>&gt;&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;commit&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">i</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;command&#34;</span>&gt;å·²æœ‰2000äººè¯„ä»·&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;operate&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;success-cart.html&#34;</span> <span style="color:#008080">target</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;_blank&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn btn-bordered btn-danger&#34;</span>&gt;åŠ å…¥è´­ç‰©è½¦&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn btn-bordered&#34;</span>&gt;å¯¹æ¯”&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn btn-bordered&#34;</span>&gt;å…³æ³¨&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>   &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">ul</span>&gt;
</span></span></code></pre></div><p>(4)æµ‹è¯•ï¼Œåœ¨åœ°å€æ è¾“å…¥ï¼šhttp://localhost:9101/search/list/</p>
<p>æœç´¢<code>åä¸º</code>å…³é”®å­—,æ•ˆæœå¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232443319.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="24-æœç´¢æ¡ä»¶å›æ˜¾">2.4 æœç´¢æ¡ä»¶å›æ˜¾</h3>
<p><img src="/posts/project-0/20220527231757/image-20220527232448536.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æœç´¢æ¡ä»¶é™¤äº†å…³é”®å­—å¤–ï¼Œè¿˜æœ‰åˆ†ç±»ã€å“ç‰Œã€ä»¥åŠè§„æ ¼ï¼Œè¿™äº›åœ¨æˆ‘ä»¬å‰é¢å·²ç»å°†æ•°æ®å­˜å…¥åˆ°äº†Mapä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»Mapä¸­å°†æ•°æ®å–å‡ºï¼Œç„¶ååœ¨é¡µé¢è¾“å‡ºå³å¯ã€‚</p>
<p>åˆ†ç±»ï¼š<code>result.categoryList</code></p>
<p>å“ç‰Œï¼š<code>result.brandList</code></p>
<p>è§„æ ¼ï¼š<code>result.specList</code></p>
<p>ä¿®æ”¹search.htmlçš„æ¡ä»¶æ˜¾ç¤ºéƒ¨åˆ†<img src="/posts/project-0/20220527231757/image-20220527232456274.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220527231757/image-20220527232501990.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ä¸Šå›¾ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span> 			<span style="color:#998;font-style:italic">&lt;!--selector--&gt;</span>
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;clearfix selector&#34;</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;categoryList&#39;)&amp;&amp;!#maps.containsKey(searchMap,&#39;category&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;å•†å“åˆ†ç±»&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;category,categoryStat:${result.categoryList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;<span style="color:#800080">&amp;nbsp;</span>  <span style="color:#800080">&amp;nbsp;</span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap logo&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;brandList&#39;)&amp;&amp;!#maps.containsKey(searchMap,&#39;brand&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key brand&#34;</span>&gt;å“ç‰Œ&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;value logos&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;logo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;brand,brandStat:${result.brandList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${brand}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn&#34;</span>&gt;å¤šé€‰&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span>&gt;æ›´å¤š&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec,specStat:${result.specMap}&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;spec_&#39;+spec.key)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.key}&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;op,opStat:${spec.value}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${op}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;price&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;ä»·æ ¼&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;0-500å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;500-1000å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;1000-1500å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;1500-2000å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;2000-3000å…ƒ&#34;</span>&gt; &lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;3000å…ƒä»¥ä¸Š&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;æ›´å¤šç­›é€‰é¡¹&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span>&gt;ç‰¹ç‚¹&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span>&gt;ç³»ç»Ÿ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span>&gt;æ‰‹æœºå†…å­˜ &lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span>&gt;å•å¡åŒå¡&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span>&gt;å…¶ä»–&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>			<span style="color:#998;font-style:italic">&lt;!--details--&gt;</span>
</span></span></code></pre></div><p>è§£é‡Šï¼š</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">th:unless:æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œæ‰æ˜¾ç¤º
${#maps.containsKey(result,&#39;brandList&#39;)}:mapä¸­åŒ…å«æŸä¸ªkey
</code></pre><p>æµ‹è¯•ï¼šè®¿é—®ï¼šhttp://localhost:9101/search/list è¾“å…¥ å…³é”®å­— é»‘è‰²</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232513672.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="25-æ¡ä»¶æœç´¢å®ç°">2.5 æ¡ä»¶æœç´¢å®ç°</h3>
<p><img src="/posts/project-0/20220527231757/image-20220527232522080.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ç”¨æˆ·æ¯æ¬¡ç‚¹å‡»æœç´¢çš„æ—¶å€™ï¼Œå…¶å®åœ¨ä¸Šæ¬¡æœç´¢çš„åŸºç¡€ä¹‹ä¸ŠåŠ ä¸Šäº†æ–°çš„æœç´¢æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸Šä¸€æ¬¡è¯·æ±‚çš„URLåé¢è¿½åŠ äº†æ–°çš„æœç´¢æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åå°æ¯æ¬¡æ‹¼æ¥ç»„è£…å‡ºä¸Šæ¬¡æœç´¢çš„URLï¼Œç„¶åæ¯æ¬¡å°†URLå­˜å…¥åˆ°Modelä¸­ï¼Œé¡µé¢æ¯æ¬¡ç‚¹å‡»ä¸åŒæ¡ä»¶çš„æ—¶å€™ï¼Œä»Modelä¸­å–å‡ºä¸Šæ¬¡è¯·æ±‚çš„URLï¼Œç„¶åå†åŠ ä¸Šæ–°ç‚¹å‡»çš„æ¡ä»¶å‚æ•°å®ç°è·³è½¬å³å¯ã€‚</p>
<p>(1)åå°è®°å½•æœç´¢URL</p>
<p>ä¿®æ”¹SkuControllerï¼Œæ·»åŠ ç»„è£…URLçš„æ–¹æ³•ï¼Œå¹¶å°†ç»„è£…å¥½çš„URLå­˜å‚¨èµ·æ¥,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æœç´¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param searchMap
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@GetMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/list&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> String <span style="color:#900;font-weight:bold">search</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@RequestParam</span><span style="color:#000;font-weight:bold">(</span>required <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">)</span> Map searchMap<span style="color:#000;font-weight:bold">,</span> Model model<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//1.è°ƒç”¨æœç´¢å¾®æœåŠ¡çš„ feign  æ ¹æ®æœç´¢çš„æ¡ä»¶å‚æ•° æŸ¥è¯¢ æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//è°ƒç”¨dongyimai-search-serviceå¾®æœåŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Map resultMap <span style="color:#000;font-weight:bold">=</span> searchSkuFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">search</span><span style="color:#000;font-weight:bold">(</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//2.å°†æ•°æ®è®¾ç½®åˆ°modelä¸­     (æ¨¡æ¿æ–‡ä»¶ä¸­ æ ¹æ®th:æ ‡ç­¾æ•°æ®å±•ç¤º)
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;result&#34;</span><span style="color:#000;font-weight:bold">,</span>resultMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//3.è®¾ç½®æœç´¢çš„æ¡ä»¶ å›æ˜¾
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;searchMap&#34;</span><span style="color:#000;font-weight:bold">,</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//4.è®°ä½ä¹‹å‰çš„URL
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//æ‹¼æ¥url
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        String url <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setUrl</span><span style="color:#000;font-weight:bold">(</span>searchMap<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;url&#34;</span><span style="color:#000;font-weight:bold">,</span>url<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#d14">&#34;search&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#000;font-weight:bold">private</span> String <span style="color:#900;font-weight:bold">setUrl</span><span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> String<span style="color:#000;font-weight:bold">&gt;</span> searchMap<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        String url <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/search/list&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>searchMap<span style="color:#000;font-weight:bold">!=</span><span style="color:#000;font-weight:bold">null</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> searchMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()&gt;</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>            url<span style="color:#000;font-weight:bold">+=</span><span style="color:#d14">&#34;?&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Entry</span><span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> String<span style="color:#000;font-weight:bold">&gt;</span> stringStringEntry <span style="color:#000;font-weight:bold">:</span> searchMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">entrySet</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                String key <span style="color:#000;font-weight:bold">=</span> stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getKey</span><span style="color:#000;font-weight:bold">();</span><span style="color:#998;font-style:italic">// keywords / brand  / category
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                String value <span style="color:#000;font-weight:bold">=</span> stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">();</span><span style="color:#998;font-style:italic">//åä¸º  / åä¸º  / ç¬”è®°æœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>key<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;pageNum&#34;</span><span style="color:#000;font-weight:bold">)){</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">continue</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>                url<span style="color:#000;font-weight:bold">+=</span>key<span style="color:#000;font-weight:bold">+</span><span style="color:#d14">&#34;=&#34;</span><span style="color:#000;font-weight:bold">+</span>value<span style="color:#000;font-weight:bold">+</span><span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//å»æ‰å¤šä½™çš„&amp;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastIndexOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">)!=-</span>1<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                url <span style="color:#000;font-weight:bold">=</span>  url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">substring</span><span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">,</span>url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastIndexOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> url<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)é¡µé¢æœç´¢å¯¹æ¥
<img src="/posts/project-0/20220527231757/image-20220527232530986.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220527231757/image-20220527232538480.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--selector--&gt;</span>
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;clearfix selector&#34;</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;categoryList&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;å•†å“åˆ†ç±»&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;category,categoryStat:${result.categoryList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(category=${category})}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;<span style="color:#800080">&amp;nbsp;</span>  <span style="color:#800080">&amp;nbsp;</span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap logo&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;brandList&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key brand&#34;</span>&gt;å“ç‰Œ&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;value logos&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;logo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;brand,brandStat:${result.brandList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(brand=${brand})}&#34;</span>  <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${brand}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn&#34;</span>&gt;å¤šé€‰&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span>&gt;æ›´å¤š&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec,specStat:${result.specMap}&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;spec_&#39;+spec.key)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.key}&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;op,opStat:${spec.value}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(&#39;spec_&#39;+${spec.key}=${op})}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${op}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;price&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;ä»·æ ¼&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;0-500&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;0-500å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;500-1000&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;500-1000å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;1000-1500&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;1000-1500å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;1500-2000&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;1500-2000å…ƒ&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;2000-3000&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;2000-3000å…ƒ&#34;</span>&gt; &lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;3000-*&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;3000å…ƒä»¥ä¸Š&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>th:href è¿™é‡Œæ˜¯è¶…é“¾æ¥çš„è¯­æ³•ï¼Œä¾‹å¦‚ï¼š<code>th:href=&quot;@{${url}(price='500-1000')}&quot;</code>è¡¨ç¤ºè¯·æ±‚åœ°å€æ˜¯å–<code>url</code>å‚æ•°çš„å€¼ï¼ŒåŒæ—¶å‘åå°ä¼ é€’å‚æ•°priceçš„å€¼ä¸º500-100ã€‚</p>
<p>å¦‚ä¸‹æ˜¯æŸ¥è¯¢çš„æ—¶å€™ï¼Œåå°ä½¿ç”¨æ‰“å°è¾“å‡ºè¯­å¥è¾“å‡ºçš„ç»“æœ
<img src="/posts/project-0/20220527231757/image-20220527232548932.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="26-ç§»é™¤æœç´¢æ¡ä»¶">2.6 ç§»é™¤æœç´¢æ¡ä»¶</h3>
<p><img src="/posts/project-0/20220527231757/image-20220527232553986.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å¦‚ä¸Šå›¾ï¼Œç”¨æˆ·ç‚¹å‡»æ¡ä»¶æœç´¢åï¼Œè¦å°†é€‰ä¸­çš„æ¡ä»¶æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶æä¾›ç§»é™¤æ¡ä»¶çš„<code>x</code>æŒ‰é’®,æ˜¾ç¤ºæ¡ä»¶æˆ‘ä»¬å¯ä»¥ä»searchMapä¸­è·å–ï¼Œç§»é™¤å…¶å®å°±æ˜¯å°†ä¹‹å‰çš„è¯·æ±‚åœ°å€ä¸­çš„æŒ‡å®šæ¡ä»¶åˆ é™¤å³å¯ã€‚</p>
<p>(1)æ¡ä»¶æ˜¾ç¤º</p>
<p>ä¿®æ”¹search.htmlï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--bread--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;bread&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl sui-breadcrumb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${result.total}&#34;</span>&gt;å…¨éƒ¨ç»“æœ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tags-choose&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;category&#39;)}&#34;</span>&gt;å•†å“åˆ†ç±»:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.category}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;brand&#39;)}&#34;</span>&gt;å“ç‰Œ:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.brand}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;price&#39;)}&#34;</span>&gt;ä»·æ ¼:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.price}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec,specStat:${searchMap}&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#strings.startsWith(spec.key,&#39;spec_&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#strings.substring(spec.key,5)}&#34;</span>&gt;æ‰‹æœºå±å¹•å°ºå¯¸&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                    :
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.value}&#34;</span>&gt;5.5å¯¸&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;clearfix&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>è§£é‡Šï¼š</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">${#strings.startsWith(spec.key,&#39;spec_&#39;)}:è¡¨ç¤ºä»¥spec_å¼€å§‹çš„key
${#strings.replace(spec.key,&#39;spec_&#39;,&#39;&#39;)}:è¡¨ç¤ºå°†spec.keyä¸­çš„spec_æ›¿æ¢æˆç©º
</code></pre><p>(2)ç§»é™¤æœç´¢æ¡ä»¶</p>
<p>ä¿®æ”¹search.htmlï¼Œç§»é™¤åˆ†ç±»ã€å“ç‰Œã€ä»·æ ¼ã€è§„æ ¼æœç´¢æ¡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--bread--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;bread&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl sui-breadcrumb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${result.total}&#34;</span>&gt;å…¨éƒ¨ç»“æœ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tags-choose&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;category&#39;)}&#34;</span>&gt;å•†å“åˆ†ç±»:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.category}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;&lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-icon icon-tb-close&#34;</span>
</span></span><span style="display:flex;"><span>                                                               <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${#strings.replace(url,&#39;category=&#39;+searchMap.category,&#39;&#39;)}}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;brand&#39;)}&#34;</span>&gt;å“ç‰Œ:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.brand}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;&lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-icon icon-tb-close&#34;</span>
</span></span><span style="display:flex;"><span>                                                            <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${#strings.replace(url,&#39;brand=&#39;+searchMap.brand,&#39;&#39;)}}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;price&#39;)}&#34;</span>&gt;ä»·æ ¼:&lt;<span style="color:#000080">i</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${searchMap.price}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;&lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-icon icon-tb-close&#34;</span>
</span></span><span style="display:flex;"><span>                                                            <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${#strings.replace(url,&#39;price=&#39;+searchMap.price,&#39;&#39;)}}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;tag&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec,specStat:${searchMap}&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#strings.startsWith(spec.key,&#39;spec_&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#strings.substring(spec.key,5)}&#34;</span>&gt;æ‰‹æœºå±å¹•å°ºå¯¸&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                    :
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.value}&#34;</span>&gt;5.5å¯¸&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-icon icon-tb-close&#34;</span>
</span></span><span style="display:flex;"><span>                       <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${#strings.replace(url,spec.key+&#39;=&#39;+spec.value,&#39;&#39;)}}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;clearfix&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><h3 id="27-é€‰ä¸­æœç´¢æ¡ä»¶éšè—æœç´¢é¢æ¿é¡¹">2.7 é€‰ä¸­æœç´¢æ¡ä»¶éšè—æœç´¢é¢æ¿é¡¹</h3>
<p>å½“æœ‰é€‰ä¸­çš„æœç´¢æ¡ä»¶çš„æ—¶å€™ï¼Œå¯¹åº”çš„æœç´¢é¢æ¿é¡¹å°±éšè—æ‰ï¼Œé¿å…å‡ºç°ç”¨æˆ·é‡å¤é€‰æ‹©çš„æƒ…å†µ
<img src="/posts/project-0/20220527231757/image-20220527232604235.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å®ç°ä»£ç ï¼Œåœ¨æ²¡ä¸ªæœç´¢é¡¹ä¸Šå¢åŠ æ§åˆ¶æ¡ä»¶ï¼Œå½“å­˜åœ¨æœç´¢æ¡ä»¶çš„æ—¶å€™ï¼Œå°±éšè—æœç´¢é¢æ¿é¡¹</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;categoryList&#39;)} and !${#maps.containsKey(searchMap,&#39;category&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;å•†å“åˆ†ç±»&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;category,categoryStat:${result.categoryList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						 &lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(category=${category})}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category}&#34;</span>&gt;æ‰‹æœº&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap logo&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(result,&#39;brandList&#39;)} and !${#maps.containsKey(searchMap,&#39;brand&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key brand&#34;</span>&gt;å“ç‰Œ&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;value logos&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;logo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;brand:${result.brandList}&#34;</span>&gt;&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(brand=${brand})}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${brand}&#34;</span>&gt;&lt;/<span style="color:#000080">li</span>&gt;							
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-btn&#34;</span>&gt;å¤šé€‰&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:void(0);&#34;</span>&gt;æ›´å¤š&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec:${result.specMap}&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;spec_&#39;+spec.key)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.key}&#34;</span>&gt;ç½‘ç»œåˆ¶å¼&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;op:${spec.value}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${op}&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(&#39;spec_&#39;+${spec.key}=${op})}&#34;</span>&gt;GSMï¼ˆç§»åŠ¨/è”é€š2Gï¼‰&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;							
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;		
</span></span><span style="display:flex;"><span>				
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-wrap&#34;</span> <span style="color:#008080">th:unless</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${#maps.containsKey(searchMap,&#39;price&#39;)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl key&#34;</span>&gt;ä»·æ ¼&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl value&#34;</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;type-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;0-500&#39;)}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;0-500å…ƒ&#34;</span>&gt;0-500å…ƒ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;500-1000&#39;)}&#34;</span>&gt;500-1000å…ƒ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;1000-1500&#39;)}&#34;</span>&gt;1000-1500å…ƒ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;1500-2000&#39;)}&#34;</span>&gt;1500-2000å…ƒ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;2000-3000&#39;)}&#34;</span>&gt;2000-3000å…ƒ &lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>								&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(price=&#39;3000-*&#39;)}&#34;</span>&gt;3000å…ƒä»¥ä¸Š&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>							&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>						&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl ext&#34;</span>&gt;
</span></span><span style="display:flex;"><span>					&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><h3 id="heading"></h3>
<h3 id="28-æ’åºä½œä¸š">2.8 æ’åº(ä½œä¸š)</h3>
<p><img src="/posts/project-0/20220527231757/image-20220527232617035.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ä¸Šå›¾ä»£ç æ˜¯æ’åºä»£ç ï¼Œéœ€è¦2ä¸ªå±æ€§ï¼Œ<code>sortRule</code>:æ’åºè§„åˆ™ï¼ŒASCæˆ–è€…DESCï¼Œ<code>sortField</code>:æ’åºçš„åŸŸï¼Œå‰ç«¯æ¯æ¬¡åªéœ€è¦å°†è¿™2ä¸ªåŸŸçš„å€¼ä¼ å…¥åˆ°åå°å³å¯å®ç°æ’åºã€‚</p>
<p>(1)åå°ç»„è£…æ’åºURL</p>
<p>æ¯æ¬¡æ’åºçš„æ—¶å€™æ¢å¤ç¬¬1é¡µæŸ¥è¯¢ï¼Œæ‰€ä»¥urlåœ°å€æˆ‘ä»¬éœ€è¦é‡æ–°æ‹¼æ¥,æ¯æ¬¡åˆ‡æ¢æ’åºçš„æ—¶å€™ï¼Œä¸éœ€è¦ä¹‹å‰çš„æ’åºä¿¡æ¯ï¼Œä¿®æ”¹SkuController,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">private</span> String <span style="color:#900;font-weight:bold">url</span><span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> String<span style="color:#000;font-weight:bold">&gt;</span> searchMap<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#998;font-style:italic">// { spec_ç½‘ç»œ:&#34;ç§»åŠ¨4G&#34;,&#34;keywords&#34;:&#34;åä¸º&#34;}
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    String url <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/search/list&#34;</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#998;font-style:italic">// a/b?id=1&amp;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>searchMap <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        url <span style="color:#000;font-weight:bold">+=</span> <span style="color:#d14">&#34;?&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Entry</span><span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> String<span style="color:#000;font-weight:bold">&gt;</span> stringStringEntry <span style="color:#000;font-weight:bold">:</span> searchMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">entrySet</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//å¦‚æœæ˜¯æ’åº åˆ™ è·³è¿‡ æ‹¼æ¥æ’åºçš„åœ°å€ å› ä¸ºæœ‰æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getKey</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;sortField&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">||</span> stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getKey</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;sortRule&#34;</span><span style="color:#000;font-weight:bold">)){</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">continue</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            url <span style="color:#000;font-weight:bold">+=</span> stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getKey</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34;=&#34;</span> <span style="color:#000;font-weight:bold">+</span> stringStringEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastIndexOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">)!=-</span>1<span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>            url <span style="color:#000;font-weight:bold">=</span> url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">substring</span><span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">,</span> url<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastIndexOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;&amp;&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> url<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)å‰ç«¯æ’åºå®ç°</p>
<p>ä¿®æ”¹search.htmlï¼Œå®ç°æ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(sortField=price,sortRule=ASC)}&#34;</span>&gt;ä»·æ ¼â†‘&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>		&lt;<span style="color:#000080">a</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(sortField=price,sortRule=DESC)}&#34;</span>&gt;ä»·æ ¼â†“&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">li</span>&gt;
</span></span></code></pre></div><p>è¿™ä¸€å—æˆ‘ä»¬å®ç°äº†ä»·æ ¼æ’åºï¼ŒåŒå­¦ä»¬è¯¾åå»å®ç°ä»¥ä¸‹é”€é‡å’Œæ–°å“æ’åºã€‚</p>
<h3 id="29-åˆ†é¡µ">2.9 åˆ†é¡µ</h3>
<p>çœŸå®çš„åˆ†é¡µåº”è¯¥åƒäº¬ä¸œé‚£æ ·ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232625302.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220527231757/image-20220527232630762.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220527231757/image-20220527232636463.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>(1)åˆ†é¡µå·¥å…·ç±»å®šä¹‰</p>
<p>åœ¨dongyimai-commonå·¥ç¨‹ä¸­æ·»åŠ Pageåˆ†é¡µå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Page</span><span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">implements</span> Serializable <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> list<span style="color:#000;font-weight:bold">;</span> <span style="color:#998;font-style:italic">// æ¯é¡µæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®å­˜æ”¾çš„é›†åˆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">int</span> pageSize <span style="color:#000;font-weight:bold">=</span> 10<span style="color:#000;font-weight:bold">;</span> <span style="color:#998;font-style:italic">// æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">int</span> pageNo<span style="color:#000;font-weight:bold">;</span> <span style="color:#998;font-style:italic">// å½“å‰é¡µï¼Œé€šè¿‡ç”¨æˆ·ä¼ å…¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">//	private int totalPageNo; // æ€»é¡µæ•°ï¼Œé€šè¿‡è®¡ç®—å¾—åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">long</span> totalRecord<span style="color:#000;font-weight:bold">;</span> <span style="color:#998;font-style:italic">// æ€»è®°å½•æ•°ï¼Œé€šè¿‡æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">int</span> firstPage<span style="color:#000;font-weight:bold">;</span>    <span style="color:#998;font-style:italic">//åˆ†é¡µé¡µç é›†åˆèµ·å§‹è®°å½•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">int</span> lastPage<span style="color:#000;font-weight:bold">;</span>      <span style="color:#998;font-style:italic">//åˆ†é¡µé¡µç é›†åˆç»“æŸè®°å½•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">int</span> maxPage<span style="color:#000;font-weight:bold">;</span>  <span style="color:#998;font-style:italic">//åˆ†é¡µæœ€å¤§é¡µç 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">boolean</span> firstDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">boolean</span> lastDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">Page</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">Page</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> totalRecord<span style="color:#000;font-weight:bold">,</span><span style="color:#458;font-weight:bold">int</span> pageNo<span style="color:#000;font-weight:bold">,</span><span style="color:#458;font-weight:bold">int</span> pageSize<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">pageSize</span> <span style="color:#000;font-weight:bold">=</span> pageSize<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">totalRecord</span> <span style="color:#000;font-weight:bold">=</span> totalRecord<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">pageNo</span> <span style="color:#000;font-weight:bold">=</span> pageNo<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">firstPage</span> <span style="color:#000;font-weight:bold">=</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastPage</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTotalPageNo</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">maxPage</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTotalPageNo</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        setPageLabel<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">getList</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> list<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setList</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> list<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">list</span> <span style="color:#000;font-weight:bold">=</span> list<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getPageNo</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>pageNo <span style="color:#000;font-weight:bold">&lt;</span> 1<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// å¦‚æœå½“å‰é¡µç å°äº1ï¼Œç›´æ¥è¿”å›1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">return</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>pageNo <span style="color:#000;font-weight:bold">&gt;</span> getTotalPageNo<span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">// å¦‚æœå½“å‰é¡µç å¤§äºæ€»é¡µæ•°ï¼Œè¿”å›æ€»é¡µæ•°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">return</span> getTotalPageNo<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> pageNo<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setPageNo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> pageNo<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">pageNo</span> <span style="color:#000;font-weight:bold">=</span> pageNo<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// æ€»é¡µæ•°æ˜¯ç”±æ€»è®°å½•æ•°å’Œæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°è®¡ç®—å¾—åˆ°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getTotalPageNo</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>totalRecord <span style="color:#000;font-weight:bold">%</span> pageSize <span style="color:#000;font-weight:bold">==</span> 0<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> totalRecord <span style="color:#000;font-weight:bold">/</span> pageSize<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">return</span> totalRecord <span style="color:#000;font-weight:bold">/</span> pageSize <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setPageLabel</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>maxPage<span style="color:#000;font-weight:bold">&gt;</span>5<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>pageNo<span style="color:#000;font-weight:bold">&lt;=</span>3<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                lastPage <span style="color:#000;font-weight:bold">=</span> 5<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                firstDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>pageNo<span style="color:#000;font-weight:bold">&gt;=</span>maxPage<span style="color:#000;font-weight:bold">-</span>2<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                firstPage <span style="color:#000;font-weight:bold">=</span> maxPage<span style="color:#000;font-weight:bold">-</span>4<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                lastDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                firstPage <span style="color:#000;font-weight:bold">=</span> pageNo<span style="color:#000;font-weight:bold">-</span>2<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                lastPage <span style="color:#000;font-weight:bold">=</span> pageNo<span style="color:#000;font-weight:bold">+</span>2<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            firstDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            lastDot <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getFirstPage</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">firstPage</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getLastPage</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastPage</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// public void setTotalPageNo(int totalPageNo) {
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// this.totalPageNo = totalPageNo;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// }
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getTotalRecord</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> totalRecord<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setTotalRecord</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> totalRecord<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">totalRecord</span> <span style="color:#000;font-weight:bold">=</span> totalRecord<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">getPageSize</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> pageSize<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// åˆ¤æ–­æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">hasPrev</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> getPageNo<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// è·å–ä¸Šä¸€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getPrev</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> hasPrev<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">?</span> getPageNo<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">-</span> 1 <span style="color:#000;font-weight:bold">:</span> 1<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// åˆ¤æ–­æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">hasNext</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> getPageNo<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&lt;</span> getTotalPageNo<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">// è·å–ä¸‹ä¸€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getNext</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> hasNext<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">?</span> getPageNo<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">+</span> 1 <span style="color:#000;font-weight:bold">:</span> getTotalPageNo<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">isFirstDot</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">firstDot</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">isLastDot</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lastDot</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)åˆ†é¡µå®ç°</p>
<p>ç”±äºè¿™é‡Œéœ€è¦è·å–åˆ†é¡µä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>dongyimai-search-service</code>æœåŠ¡ä¸­ä¿®æ”¹æœç´¢æ–¹æ³•å®ç°è·å–åˆ†é¡µæ•°æ®ï¼Œä¿®æ”¹<code>com.offcn.search.service.impl.SkuServiceImpl</code>çš„searchæ–¹æ³•ï¼Œåœ¨returnä¹‹å‰æ·»åŠ å¦‚ä¸‹æ–¹æ³•è·å–ä»½é¢ä¸æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//åˆ†é¡µæ•°æ®ä¿å­˜
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">//è®¾ç½®å½“å‰é¡µç 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>resultMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;pageNum&#34;</span><span style="color:#000;font-weight:bold">,</span> pageNum<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>resultMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;pageSize&#34;</span><span style="color:#000;font-weight:bold">,</span> 30<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>ä¿®æ”¹SkuController,å®ç°åˆ†é¡µä¿¡æ¯å°è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//5.åˆ›å»ºä¸€ä¸ªåˆ†é¡µçš„å¯¹è±¡  å¯ä»¥è·å–å½“å‰é¡µ å’Œæ€»ä¸ªè®°å½•æ•°å’Œæ˜¾ç¤ºçš„é¡µç (ä»¥å½“å‰é¡µä¸ºä¸­å¿ƒçš„5ä¸ªé¡µç )
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Page<span style="color:#000;font-weight:bold">&lt;</span>SkuInfo<span style="color:#000;font-weight:bold">&gt;</span> infoPage <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Page<span style="color:#000;font-weight:bold">&lt;</span>SkuInfo<span style="color:#000;font-weight:bold">&gt;(</span>
</span></span><span style="display:flex;"><span>                Long<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">valueOf</span><span style="color:#000;font-weight:bold">(</span>resultMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;total&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">toString</span><span style="color:#000;font-weight:bold">()),</span>
</span></span><span style="display:flex;"><span>                Integer<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">valueOf</span><span style="color:#000;font-weight:bold">(</span>resultMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;pageNum&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">toString</span><span style="color:#000;font-weight:bold">()),</span>
</span></span><span style="display:flex;"><span>                Integer<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">valueOf</span><span style="color:#000;font-weight:bold">(</span>resultMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;pageSize&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">toString</span><span style="color:#000;font-weight:bold">())</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>       model<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAttribute</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;page&#34;</span><span style="color:#000;font-weight:bold">,</span>infoPage<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>(3)é¡µé¢åˆ†é¡µå®ç°</p>
<p>ä¿®æ”¹search.htmlï¼Œå®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fr page&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-pagination pagination-large&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;prev&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.pageNo&gt;1}&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(pageNum=${page.prev})}&#34;</span>&gt;Â«ä¸Šä¸€é¡µ&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;dotted&#34;</span>&gt;&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.firstDot}&#34;</span>&gt;...&lt;/<span style="color:#000080">span</span>&gt;&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">li</span> <span style="color:#008080">th:class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.pageNo}==${i}?&#39;active&#39;:&#39;&#39;&#34;</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;i:${#numbers.sequence(page.firstPage,page.lastPage)}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(pageNum=${i})}&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${i}&#34;</span>&gt;1&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;dotted&#34;</span>&gt;&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.lastDot}&#34;</span>&gt;...&lt;/<span style="color:#000080">span</span>&gt;&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">li</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;next&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:if</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.pageNo&lt;page.next}&#34;</span> <span style="color:#008080">th:href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;@{${url}(pageNum=${page.next})}&#34;</span>&gt;ä¸‹ä¸€é¡µÂ»&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">div</span>&gt;&lt;<span style="color:#000080">span</span>&gt;å…±&lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${page.totalPageNo}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;é¡µ<span style="color:#800080">&amp;nbsp;</span>&lt;/<span style="color:#000080">span</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>æ³¨æ„ï¼šæ¯æ¬¡å¦‚æœæœæ¡ä»¶å‘ç”Ÿå˜åŒ–éƒ½è¦ä»ç¬¬1é¡µæŸ¥è¯¢ï¼Œè€Œç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œåˆ†é¡µæ•°æ®åœ¨é¡µé¢ç»™å‡ºï¼Œä¸éœ€è¦åœ¨åå°æ‹¼æ¥çš„urlä¸­ç»™å‡ºï¼Œæ‰€ä»¥åœ¨æ‹¼æ¥urlçš„æ—¶å€™ï¼Œéœ€è¦è¿‡æ»¤æ‰åˆ†é¡µå‚æ•°ï¼Œä¿®æ”¹<code>dongyimai-search-web</code>çš„æ§åˆ¶å±‚<code>com.offcn.search.controller.SkuController</code>çš„urlæ‹¼æ¥æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232718606.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æµ‹è¯•æ•ˆæœï¼š</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232724838.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="ä¸‰-ä¸œæ˜“ä¹°å•†å“è¯¦æƒ…é¡µ">ä¸‰ ä¸œæ˜“ä¹°å•†å“è¯¦æƒ…é¡µ</h1>
<h2 id="1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç½‘é¡µé™æ€åŒ–æŠ€æœ¯">1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç½‘é¡µé™æ€åŒ–æŠ€æœ¯</h2>
<p>ç½‘é¡µé™æ€åŒ–è§£å†³æ–¹æ¡ˆåœ¨å®é™…å¼€å‘ä¸­è¿ç”¨æ¯”è¾ƒå¤šï¼Œä¾‹å¦‚æ–°é—»ç½‘ç«™ï¼Œé—¨æˆ·ç½‘ç«™ä¸­çš„æ–°é—»é¢‘é“æˆ–è€…æ˜¯æ–‡ç« ç±»çš„é¢‘é“ã€‚
<img src="/posts/project-0/20220527231757/clip_image002.gif"
    
    
    
    loading="lazy"
    
    
>
å¯¹äºç”µå•†ç½‘ç«™çš„å•†å“è¯¦ç»†é¡µæ¥è¯´ï¼Œè‡³å°‘å‡ ç™¾ä¸‡ä¸ªå•†å“ï¼Œæ¯ä¸ªå•†å“åˆæœ‰å¤§é‡çš„ä¿¡æ¯ï¼Œè¿™æ ·çš„æƒ…å†µåŒæ ·ä¹Ÿé€‚ç”¨äºä½¿ç”¨ç½‘é¡µé™æ€åŒ–æ¥è§£å†³ã€‚</p>
<p>ç½‘é¡µé™æ€åŒ–æŠ€æœ¯å’Œç¼“å­˜æŠ€æœ¯çš„å…±åŒç‚¹éƒ½æ˜¯ä¸ºäº†å‡è½»æ•°æ®åº“çš„è®¿é—®å‹åŠ›ï¼Œä½†æ˜¯å…·ä½“çš„åº”ç”¨åœºæ™¯ä¸åŒï¼Œç¼“å­˜æ¯”è¾ƒé€‚åˆå°è§„æ¨¡çš„æ•°æ®ï¼Œè€Œç½‘é¡µé™æ€åŒ–æ¯”è¾ƒé€‚åˆå¤§è§„æ¨¡ä¸”ç›¸å¯¹å˜åŒ–ä¸å¤ªé¢‘ç¹çš„æ•°æ®ã€‚å¦å¤–ç½‘é¡µé™æ€åŒ–è¿˜æœ‰åˆ©äºSEOã€‚</p>
<p>å¦å¤–æˆ‘ä»¬å¦‚æœå°†ç½‘é¡µä»¥çº¯é™æ€åŒ–çš„å½¢å¼å±•ç°ï¼Œå°±å¯ä»¥ä½¿ç”¨Nginxè¿™æ ·çš„é«˜æ€§èƒ½çš„webæœåŠ¡å™¨æ¥éƒ¨ç½²ï¼ŒNginxå¯ä»¥æ‰¿è½½5ä¸‡çš„å¹¶å‘ï¼Œè€ŒTomcatåªæœ‰å‡ ç™¾ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±ç ”ç©¶ç½‘é¡µé™æ€åŒ–æŠ€æœ¯</p>
<h2 id="2-éœ€æ±‚åˆ†æ">2 éœ€æ±‚åˆ†æ</h2>
<p>å½“ç³»ç»Ÿå®¡æ ¸å®Œæˆå•†å“ï¼Œéœ€è¦å°†å•†å“è¯¦æƒ…é¡µè¿›è¡Œå±•ç¤ºï¼Œé‚£ä¹ˆé‡‡ç”¨é™æ€é¡µé¢ç”Ÿæˆçš„æ–¹å¼ç”Ÿæˆï¼Œå¹¶éƒ¨ç½²åˆ°é«˜æ€§èƒ½çš„webæœåŠ¡å™¨ä¸­è¿›è¡Œè®¿é—®æ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚æ‰€ä»¥ï¼Œå¼€å‘æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/posts/project-0/20220527231757/image-20220527232747219.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æ‰§è¡Œæ­¥éª¤è§£é‡Šï¼š</p>
<ul>
<li>ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆå•†å®¶è¿ç»´äººå‘˜ï¼‰ä¿®æ”¹æˆ–è€…å®¡æ ¸å•†å“çš„æ—¶å€™ï¼Œä¼šè§¦å‘canalç›‘æ§æ•°æ®</li>
<li>canalå¾®æœåŠ¡è·å–ä¿®æ”¹æ•°æ®åï¼Œè°ƒç”¨é™æ€é¡µå¾®æœåŠ¡çš„æ–¹æ³•è¿›è¡Œç”Ÿæˆé™æ€é¡µ</li>
<li>é™æ€é¡µå¾®æœåŠ¡åªè´Ÿè´£ä½¿ç”¨thymeleafçš„æ¨¡æ¿æŠ€æœ¯ç”Ÿæˆé™æ€é¡µ</li>
</ul>
<h2 id="3-å•†å“é™æ€åŒ–å¾®æœåŠ¡åˆ›å»º">3 å•†å“é™æ€åŒ–å¾®æœåŠ¡åˆ›å»º</h2>
<h3 id="31-æ­å»ºé¡¹ç›®">3.1 æ­å»ºé¡¹ç›®</h3>
<p>ï¼ˆ1ï¼‰åœ¨dongyimai-webä¸‹åˆ›å»ºä¸€ä¸ªåç§°ä¸ºdongyimai-item-webçš„æ¨¡å—,è¯¥å¾®æœåŠ¡åªç”¨äºç”Ÿæˆå•†å“é™æ€é¡µï¼Œå¦‚å›¾ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232754292.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ï¼ˆ2ï¼‰dongyimai-item-webä¸­æ·»åŠ èµ·æ­¥ä¾èµ–ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;project</span> <span style="color:#008080">xmlns=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xmlns:xsi=</span><span style="color:#d14">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xsi:schemaLocation=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;parent&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-web<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/parent&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;modelVersion&gt;</span>4.0.0<span style="color:#000080">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-item-web<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>       <span style="color:#000080">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-sellergoods-serivce-api<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;exclusions&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000080">&lt;exclusion&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000080">&lt;groupId&gt;</span>com.alibaba<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#000080">&lt;artifactId&gt;</span>druid-spring-boot-starter<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000080">&lt;/exclusion&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;/exclusions&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-thymeleaf<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/project&gt;</span>
</span></span></code></pre></div><p>ï¼ˆ3ï¼‰ä¿®æ”¹application.ymlçš„é…ç½®</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">server</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">port</span>:<span style="color:#bbb"> </span><span style="color:#099">9102</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">eureka</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">client</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">service-url</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">defaultZone</span>:<span style="color:#bbb"> </span>http://127.0.0.1:8761/eureka<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">instance</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">prefer-ip-address</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">spring</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">thymeleaf</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">cache</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">application</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">name</span>:<span style="color:#bbb"> </span>item-web<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">main</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">allow-bean-definition-overriding</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">feign</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">hystrix</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">enabled</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">client</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">config</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000080">connectTimeout</span>:<span style="color:#bbb"> </span><span style="color:#099">10000</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#è¿æ¥è¶…æ—¶é…ç½®</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000080">readTimeout</span>:<span style="color:#bbb"> </span><span style="color:#099">60000</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#æ‰§è¡Œè¶…æ—¶é…ç½®</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#è®¾å®šHystrixç†”æ–­è¶…æ—¶æ—¶é—´ ï¼Œç†è®ºä¸Šç†”æ–­æ—¶é—´åº”è¯¥å¤§äºæ€»è¿æ¥è¶…æ—¶æ—¶é—´</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">hystrix</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">command</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">execution</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000080">isolation</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#000080">thread</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#000080">timeoutInMilliseconds</span>:<span style="color:#bbb"> </span><span style="color:#099">6000</span><span style="color:#bbb">         
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># ç”Ÿæˆé™æ€é¡µçš„ä½ç½®</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">pagepath</span>:<span style="color:#bbb"> </span>C:\\items<span style="color:#bbb">
</span></span></span></code></pre></div><p>ï¼ˆ4ï¼‰åˆ›å»ºç³»ç»Ÿå¯åŠ¨ç±»</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@SpringBootApplication</span><span style="color:#000;font-weight:bold">(</span>exclude <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>DataSourceAutoConfiguration<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableEurekaClient</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableFeignClients</span><span style="color:#000;font-weight:bold">(</span>basePackages <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;com.offcn.sellergoods.feign&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">ItemApplication</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        SpringApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">run</span><span style="color:#000;font-weight:bold">(</span>ItemApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">,</span>args<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="32-ç”Ÿæˆé™æ€é¡µ">3.2 ç”Ÿæˆé™æ€é¡µ</h3>
<h4 id="321-éœ€æ±‚åˆ†æ">3.2.1 éœ€æ±‚åˆ†æ</h4>
<p>é¡µé¢å‘é€è¯·æ±‚ï¼Œä¼ é€’è¦ç”Ÿæˆçš„é™æ€é¡µçš„çš„å•†å“çš„SpuID.åå°controller æ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨thyemleafçš„åŸç”ŸAPIç”Ÿæˆå•†å“é™æ€é¡µã€‚
<img src="/posts/project-0/20220527231757/image-20220527232804532.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ä¸Šå›¾æ˜¯è¦ç”Ÿæˆçš„å•†å“è¯¦æƒ…é¡µï¼Œä»å›¾ç‰‡ä¸Šå¯ä»¥çœ‹å‡ºéœ€è¦æŸ¥è¯¢SPUçš„3ä¸ªåˆ†ç±»ä½œä¸ºé¢åŒ…å±‘æ˜¾ç¤ºï¼ŒåŒæ—¶è¿˜éœ€è¦æŸ¥è¯¢SKUå’ŒSPUä¿¡æ¯ã€‚</p>
<h4 id="322-feignåˆ›å»º">3.2.2 Feignåˆ›å»º</h4>
<p>ç¨åéœ€è¦æŸ¥è¯¢SPUå’ŒSKUä»¥åŠCategoryï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºFeignã€‚</p>
<p>ä¿®æ”¹dongyimai-sellergoods-service-api,æ·»åŠ ItemCatFeignï¼Œå¹¶åœ¨ItemCatFeignä¸­æ·»åŠ æ ¹æ®IDæŸ¥è¯¢åˆ†ç±»æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@FeignClient</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sellergoods&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/itemCat&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">ItemCatFeign</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * è·å–åˆ†ç±»çš„å¯¹è±¡ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@GetMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/{id}&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> Result<span style="color:#000;font-weight:bold">&lt;</span>ItemCat<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">findById</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@PathVariable</span><span style="color:#000;font-weight:bold">(</span>name <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">)</span> Integer id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>åœ¨dongyimai-sellergoods-service-api,æ·»åŠ GoodsFeign,å¹¶æ·»åŠ æ ¹æ®SpuIDæŸ¥è¯¢Spuä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@FeignClient</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sellergoods&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/goods&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">GoodsFeign</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æ ¹æ®IDæŸ¥è¯¢Spuæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@GetMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/{id}&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    Result<span style="color:#000;font-weight:bold">&lt;</span>GoodsEntity<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">findById</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@PathVariable</span> Long id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p><img src="/posts/project-0/20220527231757/image-20220527232813006.png"
    
    
    
    loading="lazy"
    
    
></p>
<h4 id="323-é™æ€é¡µç”Ÿæˆä»£ç ">3.2.3 é™æ€é¡µç”Ÿæˆä»£ç </h4>
<p>(1) åˆ›å»ºservice</p>
<p>åœ¨é¡¹ç›®dongyimai-item-webä¸­åˆ›å»ºæ¥å£ com.offcn.item.service.PageService</p>
<p>æ¥å£ï¼šPageService</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">PageService</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æ ¹æ®å•†å“çš„ID ç”Ÿæˆé™æ€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param spuId
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">createPageHtml</span><span style="color:#000;font-weight:bold">(</span>Long spuId<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>åœ¨é¡¹ç›®dongyimai-item-webä¸­åˆ›å»ºå®ç°ç±» com.offcn.item.service.impl.PageServiceImplå®ç°ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">PageServiceImpl</span> <span style="color:#000;font-weight:bold">implements</span> PageService <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> GoodsFeign goodsFeign<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> ItemCatFeign itemCatFeign<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> TemplateEngine templateEngine<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ç”Ÿæˆé™æ€æ–‡ä»¶è·¯å¾„
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#3c5d5d;font-weight:bold">@Value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;${pagepath}&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> String pagepath<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æ„å»ºæ•°æ®æ¨¡å‹
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param spuId
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span>Object<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">buildDataModel</span><span style="color:#000;font-weight:bold">(</span>Long spuId<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//æ„å»ºæ•°æ®æ¨¡å‹
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> Object<span style="color:#000;font-weight:bold">&gt;</span> dataMap <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> HashMap<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//è·å–SPU å’ŒSKUåˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Result<span style="color:#000;font-weight:bold">&lt;</span>GoodsEntity<span style="color:#000;font-weight:bold">&gt;</span> result <span style="color:#000;font-weight:bold">=</span> goodsFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">findById</span><span style="color:#000;font-weight:bold">(</span>spuId<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        GoodsEntity goodsEntity <span style="color:#000;font-weight:bold">=</span> result<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getData</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//1.åŠ è½½SPUæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Goods goods <span style="color:#000;font-weight:bold">=</span> goodsEntity<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getGoods</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//2.åŠ è½½å•†å“æ‰©å±•æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        GoodsDesc goodsDesc <span style="color:#000;font-weight:bold">=</span> goodsEntity<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getGoodsDesc</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//3.åŠ è½½SKUæ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>Item<span style="color:#000;font-weight:bold">&gt;</span> itemList <span style="color:#000;font-weight:bold">=</span> goodsEntity<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getItemList</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;goods&#34;</span><span style="color:#000;font-weight:bold">,</span> goods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;goodsDesc&#34;</span><span style="color:#000;font-weight:bold">,</span> goodsDesc<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;specificationList&#34;</span><span style="color:#000;font-weight:bold">,</span> JSON<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">parseArray</span><span style="color:#000;font-weight:bold">(</span>goodsDesc<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getSpecificationItems</span><span style="color:#000;font-weight:bold">(),</span>Map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;imageList&#34;</span><span style="color:#000;font-weight:bold">,</span>JSON<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">parseArray</span><span style="color:#000;font-weight:bold">(</span>goodsDesc<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getItemImages</span><span style="color:#000;font-weight:bold">(),</span>Map<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;itemList&#34;</span><span style="color:#000;font-weight:bold">,</span>itemList<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//4.åŠ è½½åˆ†ç±»æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;category1&#34;</span><span style="color:#000;font-weight:bold">,</span>itemCatFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">findById</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getCategory1Id</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">intValue</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#008080">getData</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;category2&#34;</span><span style="color:#000;font-weight:bold">,</span>itemCatFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">findById</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getCategory2Id</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">intValue</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#008080">getData</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        dataMap<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;category3&#34;</span><span style="color:#000;font-weight:bold">,</span>itemCatFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">findById</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getCategory3Id</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">intValue</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#008080">getData</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> dataMap<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * ç”Ÿæˆé™æ€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param spuId
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">createPageHtml</span><span style="color:#000;font-weight:bold">(</span>Long spuId<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 1.ä¸Šä¸‹æ–‡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Context context <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Context<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        Map<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">,</span> Object<span style="color:#000;font-weight:bold">&gt;</span> dataModel <span style="color:#000;font-weight:bold">=</span> buildDataModel<span style="color:#000;font-weight:bold">(</span>spuId<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        context<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setVariables</span><span style="color:#000;font-weight:bold">(</span>dataModel<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 2.å‡†å¤‡æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        File dir <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> File<span style="color:#000;font-weight:bold">(</span>pagepath<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(!</span>dir<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">exists</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            dir<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">mkdirs</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        File dest <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> File<span style="color:#000;font-weight:bold">(</span>dir<span style="color:#000;font-weight:bold">,</span> spuId <span style="color:#000;font-weight:bold">+</span> <span style="color:#d14">&#34;.html&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">// 3.ç”Ÿæˆé¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">(</span>PrintWriter writer <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> PrintWriter<span style="color:#000;font-weight:bold">(</span>dest<span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;UTF-8&#34;</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            templateEngine<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">process</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;item&#34;</span><span style="color:#000;font-weight:bold">,</span> context<span style="color:#000;font-weight:bold">,</span> writer<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>Exception e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">printStackTrace</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)åˆ›å»ºController</p>
<p>åœ¨dongyimai-item-webä¸­åˆ›å»ºcom.offcn.item.controller.PageControllerç”¨äºæ¥æ”¶è¯·æ±‚ï¼Œæµ‹è¯•ç”Ÿæˆé™æ€é¡µ</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/page&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">PageController</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> PageService pageService<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * ç”Ÿæˆé™æ€é¡µé¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/createHtml/{id}&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> Result <span style="color:#900;font-weight:bold">createHtml</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@PathVariable</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">)</span> Long id<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        pageService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createPageHtml</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span> StatusCode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">OK</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;ok&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>ï¼ˆ3ï¼‰æ‹·è´æ¨¡æ¿æ–‡ä»¶   èµ„æ–™/ç½‘ç«™å‰å°/item.html</p>
<h4 id="324-æ¨¡æ¿å¡«å……">3.2.4 æ¨¡æ¿å¡«å……</h4>
<p>é¦–å…ˆå°†æ¨¡æ¿ å°†èµ„æ–™/ç½‘ç«™å‰å°/item.html æ‹·è´åˆ° resources/templates/ä¸‹</p>
<p>æ·»åŠ thymeleafçš„å¤´</p>
<p>ä¿®æ”¹thymeleafå‘½åå¤´</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">html</span> <span style="color:#008080">xmlns:th</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;http://www.thymeleaf.org&#34;</span>&gt;
</span></span></code></pre></div><p>(1)é¢åŒ…å±‘æ•°æ®çš„å®ç°</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232842264.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ä¿®æ”¹item.htmlï¼Œå¡«å……ä¸‰ä¸ªåˆ†ç±»æ•°æ®ä½œä¸ºé¢åŒ…å±‘ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;crumb-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>		&lt;<span style="color:#000080">ul</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sui-breadcrumb&#34;</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category1.name}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category2.name}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>				&lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;#&#34;</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${category3.name}&#34;</span>&gt;&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>			&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>		&lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>(2)å•†å“å›¾ç‰‡</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232857567.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ä¿®æ”¹item.htmlï¼Œå°†å•†å“å›¾ç‰‡ä¿¡æ¯è¾“å‡ºï¼Œåœ¨çœŸå®å·¥ä½œä¸­éœ€è¦åšç©ºåˆ¤æ–­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl preview-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>       <span style="color:#998;font-style:italic">&lt;!--æ”¾å¤§é•œæ•ˆæœ--&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;zoom&#34;</span>&gt;
</span></span><span style="display:flex;"><span>         <span style="color:#998;font-style:italic">&lt;!--é»˜è®¤ç¬¬ä¸€ä¸ªé¢„è§ˆ--&gt;</span>
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;preview&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec-preview&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#000080">span</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;jqzoom&#34;</span>&gt;&lt;<span style="color:#000080">img</span> <span style="color:#008080">th:jqimg</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${imageList[0].url}&#34;</span> <span style="color:#008080">th:src</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${imageList[0].url}&#34;</span> <span style="color:#008080">width</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;400px&#34;</span>/&gt;&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>         <span style="color:#998;font-style:italic">&lt;!--ä¸‹æ–¹çš„ç¼©ç•¥å›¾--&gt;</span>
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec-scroll&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;prev&#34;</span>&gt;<span style="color:#800080">&amp;lt;</span>&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>              <span style="color:#998;font-style:italic">&lt;!--å·¦å³æŒ‰é’®--&gt;</span>
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;items&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                  &lt;<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>                     &lt;<span style="color:#000080">li</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;img:${imageList}&#34;</span>&gt;&lt;<span style="color:#000080">img</span> <span style="color:#008080">th:src</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${img.url}&#34;</span> <span style="color:#008080">th:bimg</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${img.url}&#34;</span> <span style="color:#008080">onmousemove</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;preview(this)&#34;</span>/&gt;&lt;/<span style="color:#000080">li</span>&gt;
</span></span><span style="display:flex;"><span>                  &lt;/<span style="color:#000080">ul</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#000080">a</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;next&#34;</span>&gt;<span style="color:#800080">&amp;gt;</span>&lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>(3)è§„æ ¼è¾“å‡º</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;specification&#34;</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;summary-wrap clearfix&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      <span style="color:#998;font-style:italic">&lt;!--å¾ªç¯MAP--&gt;</span>
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">dl</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;spec,specStat:${specificationList}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">dt</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl title&#34;</span>&gt;
</span></span><span style="display:flex;"><span>           &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${spec.attributeName}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#000080">dt</span>&gt;
</span></span><span style="display:flex;"><span>         &lt;<span style="color:#000080">dd</span> <span style="color:#008080">th:each</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;arrValue:${spec.attributeValue}&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">a</span> <span style="color:#008080">href</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript:;&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">i</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${arrValue}&#34;</span>&gt;&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">span</span> <span style="color:#008080">title</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;ç‚¹å‡»å–æ¶ˆé€‰æ‹©&#34;</span>&gt;<span style="color:#800080">&amp;nbsp;</span>&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">a</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">dd</span>&gt;
</span></span><span style="display:flex;"><span>       &lt;/<span style="color:#000080">dl</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> &lt;/<span style="color:#000080">div</span>&gt;
</span></span></code></pre></div><p>(4)é»˜è®¤SKUæ˜¾ç¤º</p>
<p>é™æ€é¡µç”Ÿæˆåï¼Œéœ€è¦æ˜¾ç¤ºé»˜è®¤çš„Skuï¼Œæˆ‘ä»¬è¿™é‡Œé»˜è®¤æ˜¾ç¤ºç¬¬1ä¸ªSkuå³å¯ï¼Œè¿™é‡Œå¯ä»¥ç»“åˆç€Vueä¸€èµ·å®ç°ã€‚å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªé›†åˆï¼Œå†å®šä¹‰ä¸€ä¸ªspecå’Œskuï¼Œç”¨æ¥å­˜å‚¨å½“å‰é€‰ä¸­çš„Skuä¿¡æ¯å’ŒSkuçš„è§„æ ¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>éœ€è¦åœ¨é¡µé¢å¼•å…¥vue.js</p>
<pre tabindex="0"><code>&lt;script src=&#34;js/vue.js&#34;&gt;&lt;/script&gt;
</code></pre><p>è®¾ç½®ç»‘å®švueèŠ‚ç‚¹</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--é¡µé¢é¡¶éƒ¨ ç»“æŸ--&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;py-container&#34;</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;itemArray&#34;</span>&gt;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">script</span> <span style="color:#008080">th:inline</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> item <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Vue({
</span></span><span style="display:flex;"><span>        el<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;#itemArray&#39;</span>,
</span></span><span style="display:flex;"><span>        data<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>            skuList<span style="color:#000;font-weight:bold">:</span> [[${itemList}]],
</span></span><span style="display:flex;"><span>            sku<span style="color:#000;font-weight:bold">:</span> {},
</span></span><span style="display:flex;"><span>            spec<span style="color:#000;font-weight:bold">:</span> {}
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        created<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> JSON.parse(JSON.stringify(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>]));
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">this</span>.spec <span style="color:#000;font-weight:bold">=</span> JSON.parse(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>].spec);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>     })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">script</span>&gt;   
</span></span></code></pre></div><p>é¡µé¢æ˜¾ç¤ºé»˜è®¤çš„Skuä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span> &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sku-name&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">h4</span>&gt;{{sku.title}}&lt;/<span style="color:#000080">h4</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;news&#34;</span>&gt;&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${goods.caption}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;summary&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;summary-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl title&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">i</span>&gt;ä»·ã€€ã€€æ ¼&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl price&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">i</span>&gt;Â¥&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">em</span>&gt;{{sku.price}}&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">span</span>&gt;é™ä»·é€šçŸ¥&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fr remark&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                            &lt;<span style="color:#000080">i</span>&gt;ç´¯è®¡è¯„ä»·&lt;/<span style="color:#000080">i</span>&gt;&lt;<span style="color:#000080">em</span>&gt;612188&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>                        &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                    &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>                    â€¦â€¦â€¦â€¦â€¦â€¦
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;                    
</span></span></code></pre></div><p>(5)é»˜è®¤SKUæ˜¾ç¤º</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232910834.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>é™æ€é¡µç”Ÿæˆåï¼Œéœ€è¦æ˜¾ç¤ºé»˜è®¤çš„Skuï¼Œæˆ‘ä»¬è¿™é‡Œé»˜è®¤æ˜¾ç¤ºç¬¬1ä¸ªSkuå³å¯ï¼Œè¿™é‡Œå¯ä»¥ç»“åˆç€Vueä¸€èµ·å®ç°ã€‚å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªé›†åˆï¼Œå†å®šä¹‰ä¸€ä¸ªspecå’Œskuï¼Œç”¨æ¥å­˜å‚¨å½“å‰é€‰ä¸­çš„Skuä¿¡æ¯å’ŒSkuçš„è§„æ ¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">script</span> <span style="color:#008080">th:inline</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> item <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Vue({
</span></span><span style="display:flex;"><span>        el<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;#itemArray&#39;</span>,
</span></span><span style="display:flex;"><span>        data<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>            skuList<span style="color:#000;font-weight:bold">:</span> [[${itemList}]],
</span></span><span style="display:flex;"><span>            sku<span style="color:#000;font-weight:bold">:</span> {},
</span></span><span style="display:flex;"><span>            spec<span style="color:#000;font-weight:bold">:</span> {}
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        created<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> JSON.parse(JSON.stringify(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>]));
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//æ³¨æ„è¿™é‡Œæ˜¯ç›´æ¥æŠŠjsonå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">this</span>.spec <span style="color:#000;font-weight:bold">=</span> JSON.parse(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>].spec);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>     })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">script</span>&gt;   
</span></span></code></pre></div><p>æ³¨æ„ï¼šth:inline=&ldquo;javascript&quot;è¿™æ˜¯Thymeleafä¸­çš„å†…è”å†™æ³•ï¼Œæ”¯æŒåœ¨javascriptè®¿é—®modelä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥æœ‰[[${xxx.xxx}]]è¿™æ ·å†™æ³•(Javascriptä¸­è®¿é—®thymeleafå˜é‡å€¼)çš„æ—¶å€™ä¸€å®šè¦è®°å¾—åœ¨scriptä¸­å†™ä¸Šth:inline=&ldquo;javascript&quot;è¿™æ ·æ‰æˆåŠŸè®¿é—®ã€‚</p>
<p>ä½ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="/posts/project-0/20220527231757/image-20220527232923692.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>é¡µé¢æ˜¾ç¤ºé»˜è®¤çš„Skuä¿¡æ¯</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>  &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fr itemInfo-wrap&#34;</span> <span style="color:#008080">id</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;itemArray&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;sku-name&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">h4</span>&gt;{{sku.title}}&lt;/<span style="color:#000080">h4</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;news&#34;</span>&gt;&lt;<span style="color:#000080">span</span> <span style="color:#008080">th:text</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;${goods.caption}&#34;</span>&gt;&lt;/<span style="color:#000080">span</span>&gt;&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;summary&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;summary-wrap&#34;</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl title&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">i</span>&gt;ä»·ã€€ã€€æ ¼&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fl price&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">i</span>&gt;Â¥&lt;/<span style="color:#000080">i</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">em</span>&gt;{{sku.price}}&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">span</span>&gt;é™ä»·é€šçŸ¥&lt;/<span style="color:#000080">span</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#000080">div</span> <span style="color:#008080">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;fr remark&#34;</span>&gt;
</span></span><span style="display:flex;"><span>                &lt;<span style="color:#000080">i</span>&gt;ç´¯è®¡è¯„ä»·&lt;/<span style="color:#000080">i</span>&gt;&lt;<span style="color:#000080">em</span>&gt;612188&lt;/<span style="color:#000080">em</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span>        .......
</span></span><span style="display:flex;"><span>   &lt;/<span style="color:#000080">div</span>&gt;        
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">div</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--product-detail--&gt;</span> 
</span></span></code></pre></div><p>(6)è®°å½•é€‰ä¸­çš„Sku</p>
<p>åœ¨å½“å‰Spuçš„æ‰€æœ‰Skuä¸­specå€¼æ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®specæ¥åˆ¤æ–­ç”¨æˆ·é€‰ä¸­çš„æ˜¯å“ªä¸ªSkuï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Vueä¸­æ·»åŠ ä»£ç æ¥å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span> methods<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>            selectSpecification<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (specName, specValue) {
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//é€‰ä¸­çš„specä¿¡æ¯ï¼Œä¸”è§¦å‘è§†å›¾æ›´æ–°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">this</span>.$set(<span style="color:#000;font-weight:bold">this</span>.spec, specName, specValue);
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//å¾ªç¯åŒ¹é…
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#000;font-weight:bold">this</span>.skuList.length; i<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#998;font-style:italic">//åŒ¹é…è§„æ ¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™è¡¨æ˜é€‰ä¸­çš„æ˜¯è¯¥SKU
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.matchObject(JSON.parse(<span style="color:#000;font-weight:bold">this</span>.skuList[i].spec), <span style="color:#000;font-weight:bold">this</span>.spec)) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">this</span>.skuList[i];
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//å¦‚æœä¸Šé¢æ‰§è¡Œå®Œæ¯•ï¼Œæ²¡æœ‰æ‰¾åˆ°SKUï¼Œåˆ™æç¤ºä¸‹æ¶æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> {<span style="color:#d14">&#39;id&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">0</span>,<span style="color:#d14">&#39;title&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#39;æç¤ºï¼šè¯¥å•†å“å·²ç»ä¸‹æ¶&#39;</span>,<span style="color:#d14">&#39;price&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            matchObject<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (map1, map2) {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> k <span style="color:#000;font-weight:bold">in</span> map1) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> (map1[k] <span style="color:#000;font-weight:bold">!=</span> map2[k]) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> k <span style="color:#000;font-weight:bold">in</span> map2) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> (map2[k] <span style="color:#000;font-weight:bold">!=</span> map1[k]) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ·»åŠ è§„æ ¼ç‚¹å‡»äº‹ä»¶
<img src="/posts/project-0/20220527231757/image-20220527232933184.png"
    
    
    
    loading="lazy"
    
    
></p>
<pre tabindex="0"><code>&lt;a href=&#34;javascript:;&#34; th:@click=&#34;|selectSpecification(&#39;${spec.attributeName}&#39;,&#39;${arrValue}&#39;)|&#34; th:v-bind:class=&#34;|{selected:sel(&#39;${spec.attributeName}&#39;,&#39;${arrValue}&#39;)}|&#34;&gt;[[${arrValue}]]&lt;span title=&#34;ç‚¹å‡»å–æ¶ˆé€‰æ‹©&#34;&gt;&amp;nbsp;&lt;/span&gt;
&lt;/a&gt;
</code></pre><p>(6)æ ·å¼åˆ‡æ¢</p>
<p>ç‚¹å‡»ä¸åŒè§„æ ¼åï¼Œå®ç°æ ·å¼é€‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ¯ä¸ªè§„æ ¼åˆ¤æ–­è¯¥è§„æ ¼æ˜¯å¦åœ¨å½“å‰é€‰ä¸­çš„Skuè§„æ ¼ä¸­ï¼Œå¦‚æœåœ¨ï¼Œåˆ™è¿”å›trueæ·»åŠ selectedæ ·å¼ï¼Œå¦åˆ™è¿”å›falseä¸æ·»åŠ selectedæ ·å¼ã€‚</p>
<p>Vueæ·»åŠ ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span> sel<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (name, value) {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.spec <span style="color:#000;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">undefined</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.spec[name] <span style="color:#000;font-weight:bold">==</span> value) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>                } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>      }
</span></span></code></pre></div><p>é¡µé¢æ·»åŠ æ ·å¼ç»‘å®šï¼Œä»£ç å¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232943161.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>å®Œæ•´çš„vueä»£ç å¦‚ä¸‹:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#000080">script</span> <span style="color:#008080">th:inline</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;javascript&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">var</span> item <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Vue({
</span></span><span style="display:flex;"><span>        el<span style="color:#000;font-weight:bold">:</span> <span style="color:#d14">&#39;#itemArray&#39;</span>,
</span></span><span style="display:flex;"><span>        data<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>            skuList<span style="color:#000;font-weight:bold">:</span> [[${itemList}]],
</span></span><span style="display:flex;"><span>            sku<span style="color:#000;font-weight:bold">:</span> {},
</span></span><span style="display:flex;"><span>            spec<span style="color:#000;font-weight:bold">:</span> {}
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        created<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> () {
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> JSON.parse(JSON.stringify(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>]));
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">this</span>.spec <span style="color:#000;font-weight:bold">=</span> JSON.parse(<span style="color:#000;font-weight:bold">this</span>.skuList[<span style="color:#099">0</span>].spec);
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        methods<span style="color:#000;font-weight:bold">:</span> {
</span></span><span style="display:flex;"><span>            sel<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (name, value) {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.spec <span style="color:#000;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">undefined</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.spec[name] <span style="color:#000;font-weight:bold">==</span> value) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>                } <span style="color:#000;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            selectSpecification<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (specName, specValue) {
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//é€‰ä¸­çš„specä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">this</span>.$set(<span style="color:#000;font-weight:bold">this</span>.spec, specName, specValue);
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//å¾ªç¯åŒ¹é…
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; i <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#000;font-weight:bold">this</span>.skuList.length; i<span style="color:#000;font-weight:bold">++</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#998;font-style:italic">//åŒ¹é…è§„æ ¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™è¡¨æ˜é€‰ä¸­çš„æ˜¯è¯¥SKU
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                    <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">this</span>.matchObject(JSON.parse(<span style="color:#000;font-weight:bold">this</span>.skuList[i].spec), <span style="color:#000;font-weight:bold">this</span>.spec)) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">this</span>.skuList[i];
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//å¦‚æœä¸Šé¢æ‰§è¡Œå®Œæ¯•ï¼Œæ²¡æœ‰æ‰¾åˆ°SKUï¼Œåˆ™æç¤ºä¸‹æ¶æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">this</span>.sku <span style="color:#000;font-weight:bold">=</span> {<span style="color:#d14">&#39;id&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">0</span>,<span style="color:#d14">&#39;title&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#d14">&#39;æç¤ºï¼šè¯¥å•†å“å·²ç»ä¸‹æ¶&#39;</span>,<span style="color:#d14">&#39;price&#39;</span><span style="color:#000;font-weight:bold">:</span><span style="color:#099">0</span>};
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            matchObject<span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">function</span> (map1, map2) {
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> k <span style="color:#000;font-weight:bold">in</span> map1) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> (map1[k] <span style="color:#000;font-weight:bold">!=</span> map2[k]) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">for</span> (<span style="color:#000;font-weight:bold">var</span> k <span style="color:#000;font-weight:bold">in</span> map2) {
</span></span><span style="display:flex;"><span>                    <span style="color:#000;font-weight:bold">if</span> (map2[k] <span style="color:#000;font-weight:bold">!=</span> map1[k]) {
</span></span><span style="display:flex;"><span>                        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#000080">script</span>&gt;
</span></span></code></pre></div><h4 id="325-å¯åŠ¨æµ‹è¯•">3.2.5 å¯åŠ¨æµ‹è¯•</h4>
<p>å¯åŠ¨eurekaæœåŠ¡ç«¯ dongyimai-eureka</p>
<p>å¯åŠ¨å•†å“å¾®æœåŠ¡ dongyimai-sellergoods-service</p>
<p>å¯åŠ¨é™æ€åŒ–å¾®æœåŠ¡ dongyimai-item-web</p>
<p>å°†é™æ€èµ„æºå¯¼å…¥åˆ°C:\itemsç›®å½•ä¸‹ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="/posts/project-0/20220527231757/image-20220527232951292.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>è¿™æ ·ç”Ÿæˆé™æ€é¡µé¢åˆ°ç»™åœ°å€çš„æ—¶å€™å°±å¯ä»¥æœ‰æ­£ç¡®çš„æ ·å¼ç­‰ä¿¡æ¯äº†ã€‚</p>
<p>å¼€å§‹ç”Ÿæˆé™æ€é¡µé¢:</p>
<p>è®¿é—®ç”Ÿæˆé™æ€é¡µåœ°å€ <code>http://localhost:9102/page/createHtml/149187842867985</code>
<img src="/posts/project-0/20220527231757/image-20220527233000101.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æ³¨æ„: æ­¤å¤„ä¸€å®šè¦ä½¿ç”¨ä¸€ä¸ª<font color="red">æœ‰æ•ˆçš„æ•°æ®ä¿¡æ¯</font>æ‰å¯ä»¥å®ç°æ•ˆæœã€‚å¦‚æœæ•°æ®åº“ä¸­çš„å•†å“çš„æ•°æ®ä¿¡æ¯ä¸å®Œæ•´å°†ä¸èƒ½æ­£å¸¸ç”Ÿæˆé¡µé¢æ•°æ®ã€‚</p>
<p>é™æ€é¡µç”Ÿæˆååœ¨ç”Ÿæˆç›®å½•ä¸­è®¿é—®é¡µé¢ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š
<img src="/posts/project-0/20220527231757/image-20220527233006885.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>è¿™æ ·åç»­æˆ‘ä»¬å°†è¿™äº›ç”Ÿæˆçš„é™æ€ç½‘é¡µéƒ¨ç½²åˆ°Nginxä¸‹ï¼Œå°±å¯ä»¥ç›´æ¥è®¿é—®äº†ã€‚</p>
<h1 id="å››-canalç›‘å¬ç”Ÿæˆé™æ€é¡µ">å›› canalç›‘å¬ç”Ÿæˆé™æ€é¡µ</h1>
<p><img src="/posts/project-0/20220527231757/image-20220527233014291.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ç›‘å¬åˆ°æ•°æ®çš„å˜åŒ–,ç›´æ¥è°ƒç”¨feign ç”Ÿæˆé™æ€é¡µå³å¯.</p>
<p>ç›®å‰ï¼Œå·²ç»å®Œæˆä½¿ç”¨é™æ€é¡µå¾®æœåŠ¡ï¼Œæ¥æ”¶ä¼ é€’çš„å•†å“spuId é€šè¿‡Feginè°ƒç”¨å•†å“å¾®æœåŠ¡è·å–å•†å“æ•°æ®ï¼Œä»¥åŠå•†å“åˆ†ç±»æ•°æ®ï¼Œ å®ç°å•†å“è¯¦æƒ…é¡µçš„ç”Ÿæˆã€‚</p>
<p>æ¥ä¸‹éœ€è¦å®ç°å°±æ˜¯ä½¿ç”¨canal åŠ¨æ€ç›‘æ§æ•°æ®åº“ä¸­å•†å“æ•°æ®çš„å˜åŒ–ï¼Œæ¯”å¦‚ï¼š å•†å“å®¡æ ¸é€šè¿‡äº†ï¼Œcanalç›‘å¬åˆ°å•†å“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè°ƒç”¨ é™æ€é¡µå¾®æœåŠ¡å¹¶ä¼ é€’spuIdï¼Œ æ¥ä¸‹æ¥é™æ€é¡µå¾®æœåŠ¡å°±ç”Ÿæˆé™æ€é¡µã€‚</p>
<h2 id="1-éœ€æ±‚åˆ†æ">1 éœ€æ±‚åˆ†æ</h2>
<p>å½“å•†å“å¾®æœåŠ¡å®¡æ ¸å•†å“ä¹‹åï¼Œåº”å½“å‘é€æ¶ˆæ¯ï¼Œè¿™é‡Œé‡‡ç”¨äº†Canalç›‘æ§æ•°æ®å˜åŒ–ï¼Œæ•°æ®å˜åŒ–åï¼Œè°ƒç”¨feignå®ç°ç”Ÿæˆé™æ€é¡µ</p>
<h2 id="2-feignåˆ›å»º">2 Feignåˆ›å»º</h2>
<p>åœ¨dongyimai-service-apiä¸­åˆ›å»ºdongyimai-item-web-apiï¼Œè¯¥å·¥ç¨‹ä¸­ä¸»è¦åˆ›å»ºdongyimai-item-webçš„å¯¹å¤–ä¾èµ–æŠ½å–ä¿¡æ¯ã€‚</p>
<p>(1)Feignåˆ›å»º</p>
<p>åœ¨dongyimai-item-web-apiä¸­åˆ›å»ºcom.offcn.item.feign.PageFeign,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@FeignClient</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;item-web&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/page&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">PageFeign</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * æ ¹æ®SpuIDç”Ÿæˆé™æ€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/createHtml/{id}&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    Result <span style="color:#900;font-weight:bold">createHtml</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3c5d5d;font-weight:bold">@PathVariable</span><span style="color:#000;font-weight:bold">(</span>name<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">)</span> Long id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>(2)pom.xmlä¾èµ–</p>
<p>ä¿®æ”¹dongyimai-canal-serviceå·¥ç¨‹çš„pom.xmlï¼Œå¼•å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--é™æ€é¡µAPI æœåŠ¡--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-item-web-api<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;exclusions&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;exclusion&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#000080">&lt;groupId&gt;</span>com.alibaba<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#000080">&lt;artifactId&gt;</span>druid-spring-boot-starter<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#000080">&lt;/exclusion&gt;</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000080">&lt;/exclusions&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>(3)ä¿®æ”¹dongyiami-canal-serviceå·¥ç¨‹ä¸­çš„å¯åŠ¨ç±»
<img src="/posts/project-0/20220527231757/image-20220527233024713.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@SpringBootApplication</span><span style="color:#000;font-weight:bold">(</span>exclude<span style="color:#000;font-weight:bold">={</span>DataSourceAutoConfiguration<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableEurekaClient</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableCanalClient</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableFeignClients</span><span style="color:#000;font-weight:bold">(</span>basePackages <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#d14">&#34;com.offcn.content.feign&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;com.offcn.item.feign&#34;</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">CanalApplication</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        SpringApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">run</span><span style="color:#000;font-weight:bold">(</span>CanalApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">,</span>args<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="3-canalç›‘å¬æ•°æ®å˜åŒ–">3 canalç›‘å¬æ•°æ®å˜åŒ–</h2>
<p>ç›‘å¬ç±»ä¸­,ç›‘å¬å•†å“æ•°æ®åº“çš„tb_goodsçš„æ•°æ®å˜åŒ–,å½“æ•°æ®å˜åŒ–çš„æ—¶å€™ç”Ÿæˆé™æ€é¡µæˆ–è€…åˆ é™¤é™æ€é¡µ</p>
<p>åœ¨åŸæ¥çš„ç›‘å¬ç±»ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å³å¯,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">private</span> PageFeign pageFeign<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@ListenPoint</span><span style="color:#000;font-weight:bold">(</span>destination <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;example&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        schema <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;dongyimaidb&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        table <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#d14">&#34;tb_goods&#34;</span><span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        eventType <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">EventType</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">UPDATE</span><span style="color:#000;font-weight:bold">,</span> CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">EventType</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">INSERT</span><span style="color:#000;font-weight:bold">,</span> CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">EventType</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">DELETE</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">onEventCustomSpu</span><span style="color:#000;font-weight:bold">(</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">EventType</span> eventType<span style="color:#000;font-weight:bold">,</span> CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">RowData</span> rowData<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//åˆ¤æ–­æ“ä½œç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>eventType <span style="color:#000;font-weight:bold">==</span> CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">EventType</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">DELETE</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        String goodsId <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#000;font-weight:bold">&lt;</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Column</span><span style="color:#000;font-weight:bold">&gt;</span> beforeColumnsList <span style="color:#000;font-weight:bold">=</span> rowData<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getBeforeColumnsList</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Column</span> column <span style="color:#000;font-weight:bold">:</span> beforeColumnsList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>column<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getName</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                goodsId <span style="color:#000;font-weight:bold">=</span> column<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">();</span><span style="color:#998;font-style:italic">//goodsId
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">break</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//todo åˆ é™¤é™æ€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//æ–°å¢ æˆ–è€… æ›´æ–°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Column</span><span style="color:#000;font-weight:bold">&gt;</span> afterColumnsList <span style="color:#000;font-weight:bold">=</span> rowData<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAfterColumnsList</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        String goodsId <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>CanalEntry<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">Column</span> column <span style="color:#000;font-weight:bold">:</span> afterColumnsList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>column<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getName</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                goodsId <span style="color:#000;font-weight:bold">=</span> column<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">break</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//æ›´æ–° ç”Ÿæˆé™æ€é¡µ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        pageFeign<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createHtml</span><span style="color:#000;font-weight:bold">(</span>Long<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">valueOf</span><span style="color:#000;font-weight:bold">(</span>goodsId<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>4.å…·ä½“æ¼”ç¤ºå¯ä»¥æ–°å¢ä¸€ä¸ªå•†å“æ•°æ®ï¼Œç„¶åååœ¨ç›‘å¬çš„æ—¶å€™æ‰“å°ä¸€ä¸ªæ•°æ®è¯­å¥ä¾¿äºè§‚å¯Ÿæ•ˆæœã€‚</p>
<p>æ–°å¢ä¹‹åï¼Œå¯ä»¥çœ‹åˆ° dongyimai-canal-service,æ‰“å°å¦‚ä¸‹è¾“å‡ºè¯­å¥
<img src="/posts/project-0/20220527231757/image-20220527233036229.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>æŸ¥çœ‹é™æ€é¡µé¢ç›®å½•å‘ç°ç”Ÿæˆäº†é™æ€é¡µé¢ã€‚</p>

    </div>

    

    


    <div class="container-prevnext">
    <div><a href="https://lovemjh.vercel.app/posts/tool/_20220527215246/">â† Dockerå¿«é€Ÿå…¥é—¨</a></div>
    <div><a href="https://lovemjh.vercel.app/posts/project-0/20220527220542/">ä¸œæ˜“ä¹°åç«¯å¾®æœåŠ¡æ¡†æ¶æ­å»º  â†’</a></div>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="//beian.miit.gov.cn" target="_blank">
        
        è±«ICPå¤‡2022002918å·
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
</div></div>
    </body>
</html>
