<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="ÁßíÊùÄ1 - https://lovemjh.vercel.app/posts/project-0/20220528172837/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>ÁßíÊùÄ1</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="https://lovemjh.vercel.app/style.min.824365c118b34524ce845ac2a294220354719cca11af5b27a81b04c173bbba57.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"hasFoldAllCodeBlocks": false,
		"svgColor": "#6c757d",
		"en": false,
		"dark": false
	}
</div>
    <h1 class="title">
        
            ÁßíÊùÄ1
            
        
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill=#6c757d p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill=#6c757d></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill=#6c757d></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill=#6c757d p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill=#6c757d p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill=#6c757d p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill=#6c757d p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill=#6c757d></path></svg></a></div>
        
    </div>

    
</div>

            <div id="toc">üìú</div>
        
    
    
</div>
</div>
        <div id="content">












<div class="container-main 
     container-page 
">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2022-05-28&nbsp;
        </span>
        <span>
            
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2022-05-28&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            10061 Â≠ó</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            21 ÂàÜÈíü</span><div class="container-ctgtag">
	<div class="taxonomy">
		
		<div class="ctg">
			
			
			<a href="/categories/"></a>
			
		</div>
		<div class="tag">
			
			 - 
			
			<a href="/tags/"></a>
			
		</div>
	</div>
</div>
    </div>
    
    <div class="toc">
        
        <div class="page-operation">
            <div><a href="#"><img src="/imgs/icons/arrow-up-circle.svg" alt=""></a></div>
            <div><a href="https://lovemjh.vercel.app/posts/project-0/20220528172145/"><img src="/imgs/icons/arrow-left-circle.svg" alt=""></a></div>
            <div><a href="https://lovemjh.vercel.app/posts/project-0/20220528173393/"><img src="/imgs/icons/arrow-right-circle.svg" alt=""></a></div>
        </div>
        
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#Â≠¶‰π†ÁõÆÊ†á">Â≠¶‰π†ÁõÆÊ†á</a></li>
        <li><a href="#1-ÁßíÊùÄ‰∏öÂä°ÂàÜÊûê">1 ÁßíÊùÄ‰∏öÂä°ÂàÜÊûê</a>
          <ul>
            <li><a href="#11-ÈúÄÊ±ÇÂàÜÊûê">1.1 ÈúÄÊ±ÇÂàÜÊûê</a></li>
            <li><a href="#12-Ë°®ÁªìÊûÑËØ¥Êòé">1.2 Ë°®ÁªìÊûÑËØ¥Êòé</a></li>
            <li><a href="#13-ÁßíÊùÄÈúÄÊ±ÇÂàÜÊûê">1.3 ÁßíÊùÄÈúÄÊ±ÇÂàÜÊûê</a></li>
          </ul>
        </li>
        <li><a href="#2-ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠ò">2 ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠ò</a>
          <ul>
            <li><a href="#21-ÁßíÊùÄÊúçÂä°Â∑•Á®ã">2.1 ÁßíÊùÄÊúçÂä°Â∑•Á®ã</a></li>
            <li><a href="#22-ÂÆöÊó∂‰ªªÂä°">2.2 ÂÆöÊó∂‰ªªÂä°</a>
              <ul>
                <li><a href="#221-ÂÆöÊó∂‰ªªÂä°ÊñπÊ≥ïÈÖçÁΩÆ">2.2.1 ÂÆöÊó∂‰ªªÂä°ÊñπÊ≥ïÈÖçÁΩÆ</a></li>
                <li><a href="#222-ÂÆöÊó∂‰ªªÂä°Â∏∏Áî®Êó∂Èó¥Ë°®ËææÂºè">2.2.2 ÂÆöÊó∂‰ªªÂä°Â∏∏Áî®Êó∂Èó¥Ë°®ËææÂºè</a></li>
              </ul>
            </li>
            <li><a href="#23-ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠òÂÆûÁé∞">2.3 ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠òÂÆûÁé∞</a>
              <ul>
                <li><a href="#231-Êï∞ÊçÆÊ£ÄÁ¥¢Êù°‰ª∂ÂàÜÊûê">2.3.1 Êï∞ÊçÆÊ£ÄÁ¥¢Êù°‰ª∂ÂàÜÊûê</a></li>
                <li><a href="#232-Êó∂Èó¥ËèúÂçïÂàÜÊûê">2.3.2 Êó∂Èó¥ËèúÂçïÂàÜÊûê</a></li>
                <li><a href="#233-Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÂØºÂÖ•reids">2.3.3 Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÂØºÂÖ•Reids</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#3-ÁßíÊùÄÈ¢ëÈÅìÈ°µ">3 ÁßíÊùÄÈ¢ëÈÅìÈ°µ</a>
          <ul>
            <li><a href="#31-ÁßíÊùÄÊó∂Èó¥ËèúÂçï">3.1 ÁßíÊùÄÊó∂Èó¥ËèúÂçï</a></li>
            <li><a href="#32-ÁßíÊùÄÈ¢ëÈÅìÈ°µ">3.2 ÁßíÊùÄÈ¢ëÈÅìÈ°µ</a>
              <ul>
                <li><a href="#321-‰∏öÂä°Â±Ç">3.2.1 ‰∏öÂä°Â±Ç</a></li>
                <li><a href="#322-ÊéßÂà∂Â±Ç">3.2.2 ÊéßÂà∂Â±Ç</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#4-ÁßíÊùÄËØ¶ÊÉÖÈ°µ">4 ÁßíÊùÄËØ¶ÊÉÖÈ°µ</a>
          <ul>
            <li><a href="#41-‰∏öÂä°Â±Ç">4.1 ‰∏öÂä°Â±Ç</a></li>
            <li><a href="#42-ÊéßÂà∂Â±Ç">4.2 ÊéßÂà∂Â±Ç</a></li>
          </ul>
        </li>
        <li><a href="#5-‰∏ãÂçïÂÆûÁé∞">5 ‰∏ãÂçïÂÆûÁé∞</a>
          <ul>
            <li><a href="#51-‰∏öÂä°Â±Ç">5.1 ‰∏öÂä°Â±Ç</a></li>
            <li><a href="#52-ÊéßÂà∂Â±Ç">5.2 ÊéßÂà∂Â±Ç</a></li>
            <li><a href="#53Êï¥ÂêàgatewayÁΩëÂÖ≥ÈÖçÁΩÆËµÑÊ∫êÊúçÂä°Âô®">5.3„ÄÅÊï¥ÂêàgatewayÁΩëÂÖ≥„ÄÅÈÖçÁΩÆËµÑÊ∫êÊúçÂä°Âô®</a>
              <ul>
                <li><a href="#531‰øÆÊîπÈ°πÁõÆdongyimai-seckill-serviceÂºïÂÖ•‰æùËµñ">5.3.1„ÄÅ‰øÆÊîπÈ°πÁõÆdongyimai-seckill-serviceÂºïÂÖ•‰æùËµñ</a></li>
                <li><a href="#532Êã∑Ë¥ùÂÖ¨Èí•‰ª•ÂèäËµÑÊ∫êÊúçÂä°Âô®ÈÖçÁΩÆÁ±ªÊñá‰ª∂">5.3.2„ÄÅÊã∑Ë¥ùÂÖ¨Èí•„ÄÅ‰ª•ÂèäËµÑÊ∫êÊúçÂä°Âô®ÈÖçÁΩÆÁ±ªÊñá‰ª∂</a></li>
                <li><a href="#533‰øÆÊîπÁΩëÂÖ≥ÈÖçÁΩÆÊñá‰ª∂Â¢ûÂä†ÁßíÊùÄÂæÆÊúçÂä°ËΩ¨Âèë">5.3.3„ÄÅ‰øÆÊîπÁΩëÂÖ≥ÈÖçÁΩÆÊñá‰ª∂ÔºåÂ¢ûÂä†ÁßíÊùÄÂæÆÊúçÂä°ËΩ¨Âèë</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#6-Â§öÁ∫øÁ®ãÊä¢Âçï">6 Â§öÁ∫øÁ®ãÊä¢Âçï</a>
          <ul>
            <li><a href="#61--ÂÆûÁé∞ÊÄùË∑ØÂàÜÊûê">6.1  ÂÆûÁé∞ÊÄùË∑ØÂàÜÊûê</a></li>
            <li><a href="#62-ÂºÇÊ≠•ÂÆûÁé∞">6.2 ÂºÇÊ≠•ÂÆûÁé∞</a></li>
            <li><a href="#63-Â§öÁ∫øÁ®ãÊä¢Âçï">6.3 Â§öÁ∫øÁ®ãÊä¢Âçï</a>
              <ul>
                <li><a href="#631-Â§öÁ∫øÁ®ã‰∏ãÂçï">6.3.1 Â§öÁ∫øÁ®ã‰∏ãÂçï</a></li>
                <li><a href="#632-ÊéíÈòü‰∏ãÂçï">6.3.2 ÊéíÈòü‰∏ãÂçï</a>
                  <ul>
                    <li><a href="#6321-ÊéíÈòü‰ø°ÊÅØÂ∞ÅË£Ö">6.3.2.1 ÊéíÈòü‰ø°ÊÅØÂ∞ÅË£Ö</a></li>
                    <li><a href="#6322-ÊéíÈòüÂÆûÁé∞">6.3.2.2 ÊéíÈòüÂÆûÁé∞</a></li>
                  </ul>
                </li>
                <li><a href="#633-‰∏ãÂçïÁä∂ÊÄÅÊü•ËØ¢">6.3.3 ‰∏ãÂçïÁä∂ÊÄÅÊü•ËØ¢</a>
                  <ul>
                    <li><a href="#6331-‰∏ãÂçïÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ">6.3.3.1 ‰∏ãÂçïÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ</a></li>
                    <li><a href="#6332-ÂêéÂè∞Êü•ËØ¢Êä¢ÂçïÁä∂ÊÄÅ">6.3.3.2 ÂêéÂè∞Êü•ËØ¢Êä¢ÂçïÁä∂ÊÄÅ</a></li>
                    <li><a href="#6333-ÊµãËØï">6.3.3.3 ÊµãËØï</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  content '>
        <h1 align = "center">Á¨¨ÂçÅ‰∫îÁ´†</h1>
<h1 align = "center">ÁßíÊùÄ1</h1>
<h3 align="center">‰ºòÂ∞±‰∏ö.JAVAÊïôÁ†îÂÆ§</h3>
<h2 id="Â≠¶‰π†ÁõÆÊ†á">Â≠¶‰π†ÁõÆÊ†á</h2>
<ul>
<li>ÁßíÊùÄ‰∏öÂä°ÂàÜÊûê</li>
<li>ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•RedisÁºìÂ≠ò</li>
<li>SpringÂÆöÊó∂‰ªªÂä°‰∫ÜËß£-ÂÆöÊó∂Â∞ÜÁßíÊùÄÂïÜÂìÅÂ≠òÂÖ•Âà∞Redis‰∏≠</li>
<li>ÁßíÊùÄÂïÜÂìÅÈ¢ëÈÅìÈ°µÂÆûÁé∞-ÁßíÊùÄÂïÜÂìÅÂàóË°®È°µ</li>
<li>ÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖÈ°µÂÆûÁé∞</li>
<li>‰∏ãÂçïÂÆûÁé∞(ÊôÆÈÄö‰∏ãÂçï)</li>
<li>Â§öÁ∫øÁ®ãÂºÇÊ≠•Êä¢ÂçïÂÆûÁé∞-ÈòüÂàóÂâäÂ≥∞</li>
</ul>
<h2 id="1-ÁßíÊùÄ‰∏öÂä°ÂàÜÊûê">1 ÁßíÊùÄ‰∏öÂä°ÂàÜÊûê</h2>
<h3 id="11-ÈúÄÊ±ÇÂàÜÊûê">1.1 ÈúÄÊ±ÇÂàÜÊûê</h3>
<p>ÊâÄË∞ì‚ÄúÁßíÊùÄ‚ÄùÔºåÂ∞±ÊòØÁΩëÁªúÂçñÂÆ∂ÂèëÂ∏É‰∏Ä‰∫õË∂Ö‰Ωé‰ª∑Ê†ºÁöÑÂïÜÂìÅÔºåÊâÄÊúâ‰π∞ÂÆ∂Âú®Âêå‰∏ÄÊó∂Èó¥ÁΩë‰∏äÊä¢Ë¥≠ÁöÑ‰∏ÄÁßçÈîÄÂîÆÊñπÂºè„ÄÇÈÄö‰øó‰∏ÄÁÇπËÆ≤Â∞±ÊòØÁΩëÁªúÂïÜÂÆ∂‰∏∫‰øÉÈîÄÁ≠âÁõÆÁöÑÁªÑÁªáÁöÑÁΩë‰∏äÈôêÊó∂Êä¢Ë¥≠Ê¥ªÂä®„ÄÇÁî±‰∫éÂïÜÂìÅ‰ª∑Ê†º‰ΩéÂªâÔºåÂæÄÂæÄ‰∏Ä‰∏äÊû∂Â∞±Ë¢´Êä¢Ë¥≠‰∏ÄÁ©∫ÔºåÊúâÊó∂Âè™Áî®‰∏ÄÁßíÈíü„ÄÇ</p>
<p>ÁßíÊùÄÂïÜÂìÅÈÄöÂ∏∏Êúâ‰∏§ÁßçÈôêÂà∂ÔºöÂ∫ìÂ≠òÈôêÂà∂„ÄÅÊó∂Èó¥ÈôêÂà∂„ÄÇ</p>
<p>ÈúÄÊ±ÇÔºö</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">Ôºà1ÔºâÂΩïÂÖ•ÁßíÊùÄÂïÜÂìÅÊï∞ÊçÆÔºå‰∏ªË¶ÅÂåÖÊã¨ÔºöÂïÜÂìÅÊ†áÈ¢ò„ÄÅÂéü‰ª∑„ÄÅÁßíÊùÄ‰ª∑„ÄÅÂïÜÂìÅÂõæÁâá„ÄÅ‰ªãÁªç„ÄÅÁßíÊùÄÊó∂ÊÆµÁ≠â‰ø°ÊÅØ
Ôºà2ÔºâÁßíÊùÄÈ¢ëÈÅìÈ¶ñÈ°µÂàóÂá∫ÁßíÊùÄÂïÜÂìÅÔºàËøõË°å‰∏≠ÁöÑÔºâÁÇπÂáªÁßíÊùÄÂïÜÂìÅÂõæÁâáË∑≥ËΩ¨Âà∞ÁßíÊùÄÂïÜÂìÅËØ¶ÁªÜÈ°µ„ÄÇ
Ôºà3ÔºâÂïÜÂìÅËØ¶ÁªÜÈ°µÊòæÁ§∫ÁßíÊùÄÂïÜÂìÅ‰ø°ÊÅØÔºåÁÇπÂáªÁ´ãÂç≥Êä¢Ë¥≠ÂÆûÁé∞ÁßíÊùÄ‰∏ãÂçïÔºå‰∏ãÂçïÊó∂Êâ£ÂáèÂ∫ìÂ≠ò„ÄÇÂΩìÂ∫ìÂ≠ò‰∏∫0Êàñ‰∏çÂú®Ê¥ªÂä®ÊúüËåÉÂõ¥ÂÜÖÊó∂Êó†Ê≥ïÁßíÊùÄ„ÄÇ
Ôºà4ÔºâÁßíÊùÄ‰∏ãÂçïÊàêÂäüÔºåÁõ¥Êé•Ë∑≥ËΩ¨Âà∞ÊîØ‰ªòÈ°µÈù¢ÔºàÊâ´Á†ÅÔºâÔºåÊîØ‰ªòÊàêÂäüÔºåË∑≥ËΩ¨Âà∞ÊàêÂäüÈ°µÔºåÂ°´ÂÜôÊî∂Ë¥ßÂú∞ÂùÄ„ÄÅÁîµËØù„ÄÅÊî∂‰ª∂‰∫∫Á≠â‰ø°ÊÅØÔºåÂÆåÊàêËÆ¢Âçï„ÄÇ
Ôºà5ÔºâÂΩìÁî®Êà∑ÁßíÊùÄ‰∏ãÂçï5ÂàÜÈíüÂÜÖÊú™ÊîØ‰ªòÔºåÂèñÊ∂àÈ¢ÑËÆ¢ÂçïÔºåË∞ÉÁî®ÊîØ‰ªòÁöÑÂÖ≥Èó≠ËÆ¢ÂçïÊé•Âè£ÔºåÊÅ¢Â§çÂ∫ìÂ≠ò„ÄÇ
</code></pre><h3 id="12-Ë°®ÁªìÊûÑËØ¥Êòé">1.2 Ë°®ÁªìÊûÑËØ¥Êòé</h3>
<p><strong>ÁßíÊùÄÂïÜÂìÅ‰ø°ÊÅØË°®</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>tb_seckill_goods<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">bigint</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span>AUTO_INCREMENT,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>goods_id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">bigint</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;spu ID&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>item_id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">bigint</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;sku ID&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>title<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">100</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Ê†áÈ¢ò&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>small_pic<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">150</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÂïÜÂìÅÂõæÁâá&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>price<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">decimal</span>(<span style="color:#099">10</span>,<span style="color:#099">2</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Âéü‰ª∑Ê†º&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>cost_price<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">decimal</span>(<span style="color:#099">10</span>,<span style="color:#099">2</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÁßíÊùÄ‰ª∑Ê†º&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>create_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Ê∑ªÂä†Êó•Êúü&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>check_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÂÆ°Ê†∏Êó•Êúü&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>status<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">char</span>(<span style="color:#099">1</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÂÆ°Ê†∏Áä∂ÊÄÅÔºå0Êú™ÂÆ°Ê†∏Ôºå1ÂÆ°Ê†∏ÈÄöËøáÔºå2ÂÆ°Ê†∏‰∏çÈÄöËøá&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>start_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÂºÄÂßãÊó∂Èó¥&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>end_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÁªìÊùüÊó∂Èó¥&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>num<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">int</span>(<span style="color:#099">11</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÁßíÊùÄÂïÜÂìÅÊï∞&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>stock_count<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">int</span>(<span style="color:#099">11</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Ââ©‰ΩôÂ∫ìÂ≠òÊï∞&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>introduction<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">2000</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÊèèËø∞&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">PRIMARY</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>id<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>)<span style="color:#bbb"> </span>ENGINE<span style="color:#000;font-weight:bold">=</span>InnoDB<span style="color:#bbb"> </span>AUTO_INCREMENT<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span>CHARSET<span style="color:#000;font-weight:bold">=</span>utf8;<span style="color:#bbb">
</span></span></span></code></pre></div><p><strong>ÁßíÊùÄËÆ¢ÂçïË°®</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>tb_seckill_order<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">bigint</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;‰∏ªÈîÆ&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>seckill_id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">bigint</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÁßíÊùÄÂïÜÂìÅID&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>money<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">decimal</span>(<span style="color:#099">10</span>,<span style="color:#099">2</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÊîØ‰ªòÈáëÈ¢ù&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>user_id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">50</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Áî®Êà∑&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>create_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÂàõÂª∫Êó∂Èó¥&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>pay_time<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>datetime<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;ÊîØ‰ªòÊó∂Èó¥&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>status<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">char</span>(<span style="color:#099">1</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Áä∂ÊÄÅÔºå0Êú™ÊîØ‰ªòÔºå1Â∑≤ÊîØ‰ªò&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>receiver_address<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">200</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Êî∂Ë¥ß‰∫∫Âú∞ÂùÄ&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>receiver_mobile<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Êî∂Ë¥ß‰∫∫ÁîµËØù&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>receiver<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">20</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;Êî∂Ë¥ß‰∫∫&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>transaction_id<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">varchar</span>(<span style="color:#099">30</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">COMMENT</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;‰∫§ÊòìÊµÅÊ∞¥&#39;</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">PRIMARY</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>id<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>)<span style="color:#bbb"> </span>ENGINE<span style="color:#000;font-weight:bold">=</span>InnoDB<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span>CHARSET<span style="color:#000;font-weight:bold">=</span>utf8;<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="13-ÁßíÊùÄÈúÄÊ±ÇÂàÜÊûê">1.3 ÁßíÊùÄÈúÄÊ±ÇÂàÜÊûê</h3>
<p>ÁßíÊùÄÊäÄÊúØÂÆûÁé∞Ê†∏ÂøÉÊÄùÊÉ≥ÊòØËøêÁî®ÁºìÂ≠òÂáèÂ∞ëÊï∞ÊçÆÂ∫ìÁû¨Èó¥ÁöÑËÆøÈóÆÂéãÂäõÔºÅËØªÂèñÂïÜÂìÅËØ¶ÁªÜ‰ø°ÊÅØÊó∂ËøêÁî®ÁºìÂ≠òÔºåÂΩìÁî®Êà∑ÁÇπÂáªÊä¢Ë¥≠Êó∂ÂáèÂ∞ëÁºìÂ≠ò‰∏≠ÁöÑÂ∫ìÂ≠òÊï∞ÈáèÔºåÂΩìÂ∫ìÂ≠òÊï∞‰∏∫0Êó∂ÊàñÊ¥ªÂä®ÊúüÁªìÊùüÊó∂ÔºåÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì„ÄÇ ‰∫ßÁîüÁöÑÁßíÊùÄÈ¢ÑËÆ¢Âçï‰πü‰∏ç‰ºöÁ´ãÂàªÂÜôÂà∞Êï∞ÊçÆÂ∫ì‰∏≠ÔºåËÄåÊòØÂÖàÂÜôÂà∞ÁºìÂ≠òÔºåÂΩìÁî®Êà∑‰ªòÊ¨æÊàêÂäüÂêéÂÜçÂÜôÂÖ•Êï∞ÊçÆÂ∫ì„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰∏äÈù¢ÂÆûÁé∞ÁöÑÊÄùË∑ØÂè™ÊòØ‰∏ÄÁßçÊúÄÁÆÄÂçïÁöÑÊñπÂºèÔºåÂπ∂Êú™ËÄÉËôëÂÖ∂‰∏≠‰∏Ä‰∫õÈóÆÈ¢òÔºå‰æãÂ¶ÇÂπ∂ÂèëÁä∂ÂÜµÂÆπÊòì‰∫ßÁîüÁöÑÈóÆÈ¢ò„ÄÇÊàë‰ª¨ÁúãÁúã‰∏ãÈù¢ËøôÂº†ÊÄùË∑ØÊõ¥‰∏•Ë∞®ÁöÑÂõæÔºö
<img src="/posts/project-0/20220528172837/image-20220528172937147.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="2-ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠ò">2 ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠ò</h2>
<p><img src="/posts/project-0/20220528172837/image-20220528172946667.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Êàë‰ª¨ËøôÈáåÁßíÊùÄÂïÜÂìÅÂàóË°®ÂíåÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖÈÉΩÊòØ‰ªéRedis‰∏≠ÂèñÂá∫Êù•ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨È¶ñÂÖàË¶ÅÂ∞ÜÁ¨¶ÂêàÂèÇ‰∏éÁßíÊùÄÁöÑÂïÜÂìÅÂÆöÊó∂Êü•ËØ¢Âá∫Êù•ÔºåÂπ∂Â∞ÜÊï∞ÊçÆÂ≠òÂÖ•Âà∞RedisÁºìÂ≠ò‰∏≠„ÄÇ</p>
<p>Êï∞ÊçÆÂ≠òÂÇ®Á±ªÂûãÊàë‰ª¨ÂèØ‰ª•ÈÄâÊã©HashÁ±ªÂûã„ÄÇ</p>
<p>ÁßíÊùÄÂàÜÈ°µÂàóË°®ËøôÈáåÂèØ‰ª•ÈÄöËøáËé∑ÂèñredisTemplate.boundHashOps(key).values()Ëé∑ÂèñÁªìÊûúÊï∞ÊçÆ„ÄÇ</p>
<p>ÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖÔºåÂèØ‰ª•ÈÄöËøáredisTemplate.boundHashOps(key).get(key)Ëé∑ÂèñËØ¶ÊÉÖ„ÄÇ</p>
<h3 id="21-ÁßíÊùÄÊúçÂä°Â∑•Á®ã">2.1 ÁßíÊùÄÊúçÂä°Â∑•Á®ã</h3>
<p>Êàë‰ª¨Â∞ÜÂïÜÂìÅÊï∞ÊçÆÂéãÂÖ•Âà∞ReidsÁºìÂ≠òÔºåÂèØ‰ª•Âú®ÁßíÊùÄÂ∑•Á®ãÁöÑÊúçÂä°Â∑•Á®ã‰∏≠ÂÆåÊàêÔºåÂèØ‰ª•ÊåâÁÖßÂ¶Ç‰∏ãÊ≠•È™§ÂÆûÁé∞Ôºö</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">1.Êü•ËØ¢Ê¥ªÂä®Ê≤°ÁªìÊùüÁöÑÊâÄÊúâÁßíÊùÄÂïÜÂìÅ
	1)Áä∂ÊÄÅÂøÖÈ°ª‰∏∫ÂÆ°Ê†∏ÈÄöËøá status=1
	2)ÂïÜÂìÅÂ∫ìÂ≠ò‰∏™Êï∞&gt;0
	3)Ê¥ªÂä®Ê≤°ÊúâÁªìÊùü  endTime&gt;=now()
	4)Âú®Redis‰∏≠Ê≤°ÊúâËØ•ÂïÜÂìÅÁöÑÁºìÂ≠ò
	5)ÊâßË°åÊü•ËØ¢Ëé∑ÂèñÂØπÂ∫îÁöÑÁªìÊûúÈõÜ
2.Â∞ÜÊ¥ªÂä®Ê≤°ÊúâÁªìÊùüÁöÑÁßíÊùÄÂïÜÂìÅÂÖ•Â∫ì
</code></pre><p>Êàë‰ª¨È¶ñÂÖàÊê≠Âª∫‰∏Ä‰∏™ÁßíÊùÄÊúçÂä°Â∑•Á®ãÔºåÁÑ∂ÂêéÊåâÁÖß‰∏äÈù¢Ê≠•È™§ÂÆûÁé∞„ÄÇ</p>
<p>Êê≠Âª∫dongyimai-seckill-serviceÔºå‰Ωú‰∏∫ÁßíÊùÄÂ∑•Á®ãÁöÑÊúçÂä°Êèê‰æõÂ∑•Á®ã„ÄÇ</p>
<p>(1)pom.xml‰æùËµñ</p>
<p>pom.xml</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;project</span> <span style="color:#008080">xmlns=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xmlns:xsi=</span><span style="color:#d14">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#008080">xsi:schemaLocation=</span><span style="color:#d14">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;parent&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-service<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/parent&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;modelVersion&gt;</span>4.0.0<span style="color:#000080">&lt;/modelVersion&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-seckill-service<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;properties&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;maven.compiler.source&gt;</span>8<span style="color:#000080">&lt;/maven.compiler.source&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;maven.compiler.target&gt;</span>8<span style="color:#000080">&lt;/maven.compiler.target&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/properties&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;groupId&gt;</span>com.offcn<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;artifactId&gt;</span>dongyimai-seckill-service-api<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000080">&lt;version&gt;</span>1.0<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/dependencies&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/project&gt;</span>
</span></span></code></pre></div><p>(2) application.ymlÈÖçÁΩÆ</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">server:
  port: 9005
spring:
  application:
    name: seckill
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    url: jdbc:mysql://192.168.188.1:3306/dongyimaidb?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC
    username: root
    password: root
  rabbitmq:
    host: 192.168.188.128 #mqÁöÑÊúçÂä°Âô®Âú∞ÂùÄ
    username: guest #Ë¥¶Âè∑
    password: guest #ÂØÜÁ†Å
  main:
    allow-bean-definition-overriding: true
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka
  instance:
    prefer-ip-address: true
feign:
  hystrix:
    enabled: true
#hystrix ÈÖçÁΩÆ
hystrix:
  command:
    default:
      execution:
        timeout:
        #Â¶ÇÊûúenabledËÆæÁΩÆ‰∏∫falseÔºåÂàôËØ∑Ê±ÇË∂ÖÊó∂‰∫§ÁªôribbonÊéßÂà∂
          enabled: true
        isolation:
          thread:
            timeoutInMilliseconds: 10000
          strategy: SEMAPHORE
</code></pre><p>(3) ÂØºÂÖ•ÁîüÊàêÊñá‰ª∂</p>
<p>Â∞ÜÁîüÊàêÁöÑDaoÊñá‰ª∂ÂíåPojoÊñá‰ª∂ÂØºÂÖ•Âà∞Â∑•Á®ã‰∏≠ÔºåÂ¶Ç‰∏ãÂõæÔºö
<img src="/posts/project-0/20220528172837/image-20220528173005196.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project-0/20220528172837/image-20220528173010133.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>(4) ÂêØÂä®Á±ªÈÖçÁΩÆ</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@SpringBootApplication</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableEurekaClient</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableFeignClients</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@MapperScan</span><span style="color:#000;font-weight:bold">(</span>basePackages <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#d14">&#34;com.offcn.seckill.dao&#34;</span><span style="color:#000;font-weight:bold">})</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@EnableScheduling</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillApplication</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        SpringApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">run</span><span style="color:#000;font-weight:bold">(</span>SeckillApplication<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">,</span>args<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> IdWorker <span style="color:#900;font-weight:bold">idWorker</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> IdWorker<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">,</span>1<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="22-ÂÆöÊó∂‰ªªÂä°">2.2 ÂÆöÊó∂‰ªªÂä°</h3>
<p>‰∏Ä‰ºöÂÑøÊàë‰ª¨ÈááÁî®SpringÁöÑÂÆöÊó∂‰ªªÂä°ÂÆöÊó∂Â∞ÜÁ¨¶ÂêàÂèÇ‰∏éÁßíÊùÄÁöÑÂïÜÂìÅÊü•ËØ¢Âá∫Êù•ÂÜçÂ≠òÂÖ•Âà∞RedisÁºìÂ≠òÔºåÊâÄ‰ª•ËøôÈáåÈúÄË¶Å‰ΩøÁî®Âà∞ÂÆöÊó∂‰ªªÂä°„ÄÇ</p>
<p>ËøôÈáåÊàë‰ª¨‰∫ÜËß£‰∏ãÂÆöÊó∂‰ªªÂä°Áõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ,ÈÖçÁΩÆÊ≠•È™§Â¶Ç‰∏ãÔºö</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">1)Âú®ÂÆöÊó∂‰ªªÂä°Á±ªÁöÑÊåáÂÆöÊñπÊ≥ï‰∏äÂä†‰∏ä@ScheduledÂºÄÂêØÂÆöÊó∂‰ªªÂä°
2)ÂÆöÊó∂‰ªªÂä°Ë°®ËææÂºèÔºö‰ΩøÁî®cronÂ±ûÊÄßÊù•ÈÖçÁΩÆÂÆöÊó∂‰ªªÂä°ÊâßË°åÊó∂Èó¥
</code></pre><h4 id="221-ÂÆöÊó∂‰ªªÂä°ÊñπÊ≥ïÈÖçÁΩÆ">2.2.1 ÂÆöÊó∂‰ªªÂä°ÊñπÊ≥ïÈÖçÁΩÆ</h4>
<p>ÂàõÂª∫com.offcn.seckill.timer.SeckillGoodsPushTaskÁ±ªÔºåÂπ∂Âú®Á±ª‰∏≠Âä†‰∏äÂÆöÊó∂‰ªªÂä°ÊâßË°åÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillGoodsPushTask</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * ÊØè30ÁßíÊâßË°å‰∏ÄÊ¨°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Scheduled</span><span style="color:#000;font-weight:bold">(</span>cron <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;0/30 * * * * *&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">loadGoodsPushRedis</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;task demo&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="222-ÂÆöÊó∂‰ªªÂä°Â∏∏Áî®Êó∂Èó¥Ë°®ËææÂºè">2.2.2 ÂÆöÊó∂‰ªªÂä°Â∏∏Áî®Êó∂Èó¥Ë°®ËææÂºè</h4>
<p>CronTriggerÈÖçÁΩÆÂÆåÊï¥Ê†ºÂºè‰∏∫Ôºö [Áßí][ÂàÜ] [Â∞èÊó∂][Êó•] [Êúà][Âë®] [Âπ¥]</p>
<table>
<thead>
<tr>
<th>Â∫èÂè∑</th>
<th>ËØ¥Êòé</th>
<th>ÊòØÂê¶ÂøÖÂ°´</th>
<th>ÂÖÅËÆ∏Â°´ÂÜôÁöÑÂÄº</th>
<th>ÂÖÅËÆ∏ÁöÑÈÄöÈÖçÁ¨¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Áßí</td>
<td>ÊòØ</td>
<td>0-59</td>
<td>, - * /</td>
</tr>
<tr>
<td>2</td>
<td>ÂàÜ</td>
<td>ÊòØ</td>
<td>0-59</td>
<td>, - * /</td>
</tr>
<tr>
<td>3</td>
<td>Â∞èÊó∂</td>
<td>ÊòØ</td>
<td>0-23</td>
<td>, - * /</td>
</tr>
<tr>
<td>4</td>
<td>Êó•</td>
<td>ÊòØ</td>
<td>1-31</td>
<td>, - * ? / L W</td>
</tr>
<tr>
<td>5</td>
<td>Êúà</td>
<td>ÊòØ</td>
<td>1-12ÊàñJAN-DEC</td>
<td>, - * /</td>
</tr>
<tr>
<td>6</td>
<td>Âë®</td>
<td>ÊòØ</td>
<td>1-7ÊàñSUN-SAT</td>
<td>, - * ? / L W</td>
</tr>
<tr>
<td>7</td>
<td>Âπ¥</td>
<td>Âê¶</td>
<td>empty Êàñ1970-2099</td>
<td>, - * /</td>
</tr>
</tbody>
</table>
<p>‰ΩøÁî®ËØ¥ÊòéÔºö</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">ÈÄöÈÖçÁ¨¶ËØ¥Êòé:
* Ë°®Á§∫ÊâÄÊúâÂÄº. ‰æãÂ¶Ç:Âú®ÂàÜÁöÑÂ≠óÊÆµ‰∏äËÆæÁΩÆ &#34;*&#34;,Ë°®Á§∫ÊØè‰∏ÄÂàÜÈíüÈÉΩ‰ºöËß¶Âèë„ÄÇ

? Ë°®Á§∫‰∏çÊåáÂÆöÂÄº„ÄÇ‰ΩøÁî®ÁöÑÂú∫ÊôØ‰∏∫‰∏çÈúÄË¶ÅÂÖ≥ÂøÉÂΩìÂâçËÆæÁΩÆËøô‰∏™Â≠óÊÆµÁöÑÂÄº„ÄÇ

‰æãÂ¶Ç:Ë¶ÅÂú®ÊØèÊúàÁöÑ10Âè∑Ëß¶Âèë‰∏Ä‰∏™Êìç‰ΩúÔºå‰ΩÜ‰∏çÂÖ≥ÂøÉÊòØÂë®Âá†ÔºåÊâÄ‰ª•ÈúÄË¶ÅÂë®‰ΩçÁΩÆÁöÑÈÇ£‰∏™Â≠óÊÆµËÆæÁΩÆ‰∏∫&#34;?&#34; ÂÖ∑‰ΩìËÆæÁΩÆ‰∏∫ 0 0 0 10 * ?

- Ë°®Á§∫Âå∫Èó¥„ÄÇ‰æãÂ¶Ç Âú®Â∞èÊó∂‰∏äËÆæÁΩÆ &#34;10-12&#34;,Ë°®Á§∫ 10,11,12ÁÇπÈÉΩ‰ºöËß¶Âèë„ÄÇ

, Ë°®Á§∫ÊåáÂÆöÂ§ö‰∏™ÂÄºÔºå‰æãÂ¶ÇÂú®Âë®Â≠óÊÆµ‰∏äËÆæÁΩÆ &#34;MON,WED,FRI&#34; Ë°®Á§∫Âë®‰∏ÄÔºåÂë®‰∏âÂíåÂë®‰∫îËß¶Âèë  12,14,19

/ Áî®‰∫éÈÄíÂ¢ûËß¶Âèë„ÄÇÂ¶ÇÂú®Áßí‰∏äÈù¢ËÆæÁΩÆ&#34;5/15&#34; Ë°®Á§∫‰ªé5ÁßíÂºÄÂßãÔºåÊØèÂ¢û15ÁßíËß¶Âèë(5,20,35,50)„ÄÇ Âú®ÊúàÂ≠óÊÆµ‰∏äËÆæÁΩÆ&#39;1/3&#39;ÊâÄÁ§∫ÊØèÊúà1Âè∑ÂºÄÂßãÔºåÊØèÈöî‰∏âÂ§©Ëß¶Âèë‰∏ÄÊ¨°„ÄÇ

L Ë°®Á§∫ÊúÄÂêéÁöÑÊÑèÊÄù„ÄÇÂú®Êó•Â≠óÊÆµËÆæÁΩÆ‰∏äÔºåË°®Á§∫ÂΩìÊúàÁöÑÊúÄÂêé‰∏ÄÂ§©(‰æùÊçÆÂΩìÂâçÊúà‰ªΩÔºåÂ¶ÇÊûúÊòØ‰∫åÊúàËøò‰ºö‰æùÊçÆÊòØÂê¶ÊòØÊ∂¶Âπ¥[leap]), Âú®Âë®Â≠óÊÆµ‰∏äË°®Á§∫ÊòüÊúüÂÖ≠ÔºåÁõ∏ÂΩì‰∫é&#34;7&#34;Êàñ&#34;SAT&#34;„ÄÇÂ¶ÇÊûúÂú®&#34;L&#34;ÂâçÂä†‰∏äÊï∞Â≠óÔºåÂàôË°®Á§∫ËØ•Êï∞ÊçÆÁöÑÊúÄÂêé‰∏Ä‰∏™„ÄÇ‰æãÂ¶ÇÂú®Âë®Â≠óÊÆµ‰∏äËÆæÁΩÆ&#34;6L&#34;ËøôÊ†∑ÁöÑÊ†ºÂºè,ÂàôË°®Á§∫‚ÄúÊú¨ÊúàÊúÄÂêé‰∏Ä‰∏™ÊòüÊúü‰∫î&#34;

W Ë°®Á§∫Á¶ªÊåáÂÆöÊó•ÊúüÁöÑÊúÄËøëÈÇ£‰∏™Â∑•‰ΩúÊó•(Âë®‰∏ÄËá≥Âë®‰∫î). ‰æãÂ¶ÇÂú®Êó•Â≠óÊÆµ‰∏äËÆæÁΩÆ&#34;15W&#34;ÔºåË°®Á§∫Á¶ªÊØèÊúà15Âè∑ÊúÄËøëÁöÑÈÇ£‰∏™Â∑•‰ΩúÊó•Ëß¶Âèë„ÄÇÂ¶ÇÊûú15Âè∑Ê≠£Â•ΩÊòØÂë®ÂÖ≠ÔºåÂàôÊâæÊúÄËøëÁöÑÂë®‰∫î(14Âè∑)Ëß¶Âèë, Â¶ÇÊûú15Âè∑ÊòØÂë®Êú™ÔºåÂàôÊâæÊúÄËøëÁöÑ‰∏ãÂë®‰∏Ä(16Âè∑)Ëß¶Âèë.Â¶ÇÊûú15Âè∑Ê≠£Â•ΩÂú®Â∑•‰ΩúÊó•(Âë®‰∏ÄËá≥Âë®‰∫î)ÔºåÂàôÂ∞±Âú®ËØ•Â§©Ëß¶Âèë„ÄÇÂ¶ÇÊûúÊåáÂÆöÊ†ºÂºè‰∏∫ &#34;1W&#34;,ÂÆÉÂàôË°®Á§∫ÊØèÊúà1Âè∑ÂæÄÂêéÊúÄËøëÁöÑÂ∑•‰ΩúÊó•Ëß¶Âèë„ÄÇÂ¶ÇÊûú1Âè∑Ê≠£ÊòØÂë®ÂÖ≠ÔºåÂàôÂ∞ÜÂú®3Âè∑‰∏ãÂë®‰∏ÄËß¶Âèë„ÄÇ(Ê≥®Ôºå&#34;W&#34;ÂâçÂè™ËÉΩËÆæÁΩÆÂÖ∑‰ΩìÁöÑÊï∞Â≠ó,‰∏çÂÖÅËÆ∏Âå∫Èó¥&#34;-&#34;).

# Â∫èÂè∑(Ë°®Á§∫ÊØèÊúàÁöÑÁ¨¨Âá†‰∏™Âë®Âá†)Ôºå‰æãÂ¶ÇÂú®Âë®Â≠óÊÆµ‰∏äËÆæÁΩÆ&#34;6#3&#34;Ë°®Á§∫Âú®ÊØèÊúàÁöÑÁ¨¨‰∏â‰∏™Âë®ÂÖ≠.Ê≥®ÊÑèÂ¶ÇÊûúÊåáÂÆö&#34;#5&#34;,Ê≠£Â•ΩÁ¨¨‰∫îÂë®Ê≤°ÊúâÂë®ÂÖ≠ÔºåÂàô‰∏ç‰ºöËß¶ÂèëËØ•ÈÖçÁΩÆ(Áî®Âú®ÊØç‰∫≤ËäÇÂíåÁà∂‰∫≤ËäÇÂÜçÂêàÈÄÇ‰∏çËøá‰∫Ü) Ôºõ
</code></pre><p>Â∏∏Áî®Ë°®ËææÂºè</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">0 0 10,14,16 * * ? ÊØèÂ§©‰∏äÂçà10ÁÇπÔºå‰∏ãÂçà2ÁÇπÔºå4ÁÇπ 
0 0/30 9-17 * * ? Êúù‰πùÊôö‰∫îÂ∑•‰ΩúÊó∂Èó¥ÂÜÖÊØèÂçäÂ∞èÊó∂ 
0 0 12 ? * WED Ë°®Á§∫ÊØè‰∏™ÊòüÊúü‰∏â‰∏≠Âçà12ÁÇπ 
&#34;0 0 12 * * ?&#34; ÊØèÂ§©‰∏≠Âçà12ÁÇπËß¶Âèë 
&#34;0 15 10 ? * *&#34; ÊØèÂ§©‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 * * ?&#34; ÊØèÂ§©‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 * * ? *&#34; ÊØèÂ§©‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 * * ? 2005&#34; 2005Âπ¥ÁöÑÊØèÂ§©‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 * 14 * * ?&#34; Âú®ÊØèÂ§©‰∏ãÂçà2ÁÇπÂà∞‰∏ãÂçà2:59ÊúüÈó¥ÁöÑÊØè1ÂàÜÈíüËß¶Âèë 
&#34;0 0/5 14 * * ?&#34; Âú®ÊØèÂ§©‰∏ãÂçà2ÁÇπÂà∞‰∏ãÂçà2:55ÊúüÈó¥ÁöÑÊØè5ÂàÜÈíüËß¶Âèë 
&#34;0 0/5 14,18 * * ?&#34; Âú®ÊØèÂ§©‰∏ãÂçà2ÁÇπÂà∞2:55ÊúüÈó¥Âíå‰∏ãÂçà6ÁÇπÂà∞6:55ÊúüÈó¥ÁöÑÊØè5ÂàÜÈíüËß¶Âèë 
&#34;0 0-5 14 * * ?&#34; Âú®ÊØèÂ§©‰∏ãÂçà2ÁÇπÂà∞‰∏ãÂçà2:05ÊúüÈó¥ÁöÑÊØè1ÂàÜÈíüËß¶Âèë 
&#34;0 10,44 14 ? 3 WED&#34; ÊØèÂπ¥‰∏âÊúàÁöÑÊòüÊúü‰∏âÁöÑ‰∏ãÂçà2:10Âíå2:44Ëß¶Âèë 
&#34;0 15 10 ? * MON-FRI&#34; Âë®‰∏ÄËá≥Âë®‰∫îÁöÑ‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 15 * ?&#34; ÊØèÊúà15Êó•‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 L * ?&#34; ÊØèÊúàÊúÄÂêé‰∏ÄÊó•ÁöÑ‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 ? * 6L&#34; ÊØèÊúàÁöÑÊúÄÂêé‰∏Ä‰∏™ÊòüÊúü‰∫î‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 ? * 6L 2002-2005&#34; 2002Âπ¥Ëá≥2005Âπ¥ÁöÑÊØèÊúàÁöÑÊúÄÂêé‰∏Ä‰∏™ÊòüÊúü‰∫î‰∏äÂçà10:15Ëß¶Âèë 
&#34;0 15 10 ? * 6#3&#34; ÊØèÊúàÁöÑÁ¨¨‰∏â‰∏™ÊòüÊúü‰∫î‰∏äÂçà10:15Ëß¶Âèë
</code></pre><h3 id="23-ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠òÂÆûÁé∞">2.3 ÁßíÊùÄÂïÜÂìÅÂéãÂÖ•ÁºìÂ≠òÂÆûÁé∞</h3>
<h4 id="231-Êï∞ÊçÆÊ£ÄÁ¥¢Êù°‰ª∂ÂàÜÊûê">2.3.1 Êï∞ÊçÆÊ£ÄÁ¥¢Êù°‰ª∂ÂàÜÊûê</h4>
<p>ÊåâÁÖß2.1‰∏≠ÁöÑÂá†‰∏™Ê≠•È™§ÂÆûÁé∞Â∞ÜÁßíÊùÄÂïÜÂìÅ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢Âá∫Êù•ÔºåÂπ∂Â≠òÂÖ•Âà∞RedisÁºìÂ≠ò</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">1.Êü•ËØ¢Ê¥ªÂä®Ê≤°ÁªìÊùüÁöÑÊâÄÊúâÁßíÊùÄÂïÜÂìÅ
	1)ËÆ°ÁÆóÁßíÊùÄÊó∂Èó¥ÊÆµ
	2)Áä∂ÊÄÅÂøÖÈ°ª‰∏∫ÂÆ°Ê†∏ÈÄöËøá status=1
	3)ÂïÜÂìÅÂ∫ìÂ≠ò‰∏™Êï∞&gt;0
	4)Ê¥ªÂä®Ê≤°ÊúâÁªìÊùü  endTime&gt;now()
	5)Âú®Redis‰∏≠Ê≤°ÊúâËØ•ÂïÜÂìÅÁöÑÁºìÂ≠ò
	6)ÊâßË°åÊü•ËØ¢Ëé∑ÂèñÂØπÂ∫îÁöÑÁªìÊûúÈõÜ
2.Â∞ÜÊ¥ªÂä®Ê≤°ÊúâÁªìÊùüÁöÑÁßíÊùÄÂïÜÂìÅÂÖ•Â∫ì
</code></pre><p>‰∏äÈù¢ËøôÈáå‰ºöÊ∂âÂèäÂà∞Êó∂Èó¥Êìç‰ΩúÔºåÊâÄ‰ª•ËøôÈáåÊèêÂâçÂáÜÂ§á‰∫Ü‰∏Ä‰∏™Êó∂Èó¥Â∑•ÂÖ∑ÂåÖDateUtil„ÄÇ</p>
<h4 id="232-Êó∂Èó¥ËèúÂçïÂàÜÊûê">2.3.2 Êó∂Èó¥ËèúÂçïÂàÜÊûê</h4>
<p><img src="/posts/project-0/20220528172837/image-20220528173024909.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Êàë‰ª¨Â∞ÜÂïÜÂìÅÊï∞ÊçÆ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•ËØ¢Âá∫Êù•ÔºåÂπ∂Â≠òÂÖ•RedisÁºìÂ≠òÔºå‰ΩÜÈ°µÈù¢ÊØèÊ¨°ÊòæÁ§∫ÁöÑÊó∂ÂÄôÔºåÂè™ÊòæÁ§∫ÂΩìÂâçÊ≠£Âú®ÁßíÊùÄ‰ª•ÂèäÂæÄÂêéÂª∂Êó∂2‰∏™Â∞èÊó∂„ÄÅ4‰∏™Â∞èÊó∂„ÄÅ6‰∏™Â∞èÊó∂„ÄÅ8‰∏™Â∞èÊó∂ÁöÑÁßíÊùÄÂïÜÂìÅÊï∞ÊçÆ„ÄÇÊàë‰ª¨Ë¶ÅÂÅöÁöÑÁ¨¨‰∏Ä‰∏™‰∫ãÊòØËÆ°ÁÆóÂá∫ÁßíÊùÄÊó∂Èó¥ËèúÂçïÔºåËøô‰∏™ËèúÂçïÊòØ‰ªéÂêéÂè∞Ëé∑ÂèñÁöÑ„ÄÇ</p>
<p>Ëøô‰∏™Êó∂Èó¥ËèúÂçïÁöÑËÆ°ÁÆóÊàë‰ª¨Êù•ÂàÜÊûê‰∏ãÔºåÂèØ‰ª•ÂÖàÊ±ÇÂá∫ÂΩìÂâçÊó∂Èó¥ÁöÑÂáåÊô®ÔºåÁÑ∂ÂêéÊØè2‰∏™Â∞èÊó∂Âêé‰Ωú‰∏∫‰∏ã‰∏Ä‰∏™Êä¢Ë¥≠ÁöÑÂºÄÂßãÊó∂Èó¥ÔºåËøôÊ†∑ÂèØ‰ª•ÂàÜÂá∫12‰∏™Êä¢Ë¥≠Êó∂Èó¥ÊÆµ,Â¶Ç‰∏ãÔºö</p>
<pre tabindex="0"><code class="language-properties" data-lang="properties">00:00-02:00
02:00-04:00
04:00-06:00
06:00-08:00
08:00-10:00
10:00-12:00
12:00-14:00
14:00-16:00
16:00-18:00
18:00-20:00
20:00-22:00
22:00-00:00
</code></pre><p>ËÄåÁé∞ÂÆûÁöÑËèúÂçïÂè™ÈúÄË¶ÅËÆ°ÁÆóÂá∫ÂΩìÂâçÊó∂Èó¥Âú®Âì™‰∏™Êó∂Èó¥ÊÆµËåÉÂõ¥ÔºåËØ•Êó∂Èó¥ÊÆµËåÉÂõ¥Â∞±Â±û‰∫éÊ≠£Âú®ÁßíÊùÄÁöÑÊó∂Èó¥ÊÆµÔºåËÄåÂêéÈù¢Âç≥Â∞ÜÂºÄÂßãÁöÑÁßíÊùÄÊó∂Èó¥ÊÆµÁöÑËÆ°ÁÆó‰πüÂ∞±Âá∫Êù•‰∫ÜÔºåÂèØ‰ª•Âú®ÂΩìÂâçÊó∂Èó¥ÊÆµÂü∫Á°Ä‰πã‰∏ä+2Â∞èÊó∂„ÄÅ+4Â∞èÊó∂„ÄÅ+6Â∞èÊó∂„ÄÅ+8Â∞èÊó∂„ÄÇ</p>
<p>ÂÖ≥‰∫éÊó∂Èó¥ËèúÂçïÁöÑËøêÁÆóÔºåÂú®ÁªôÂá∫ÁöÑDateUtilÂåÖÈáåÂ∑≤ÁªèÂÆûÁé∞Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">DateUtil</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÁªôÂÆö‰∏Ä‰∏™DateËΩ¨Êç¢ÊàêÊåáÂÆöÊ†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> String <span style="color:#900;font-weight:bold">date2StrFull</span><span style="color:#000;font-weight:bold">(</span>Date date<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        SimpleDateFormat dateFormat <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> SimpleDateFormat<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;yyyy-MM-dd HH:mm:ss&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> dateFormat<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">format</span><span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÊääDateËΩ¨Êç¢ÊàêÂπ¥ÊúàÊó•Êó∂ÁöÑÂ≠óÁ¨¶‰∏≤
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> String <span style="color:#900;font-weight:bold">date2Str</span><span style="color:#000;font-weight:bold">(</span>Date date<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        SimpleDateFormat dateFormat <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> SimpleDateFormat<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;yyyyMMddHH&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> dateFormat<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">format</span><span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ëé∑ÂèñÊåáÂÆöDateÁöÑ ÂΩìÂâçÊó•ÊúüÁöÑ 00Ôºö00Ôºö00ÁöÑDateÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> Date <span style="color:#900;font-weight:bold">toDayStartHour</span><span style="color:#000;font-weight:bold">(</span>Date date<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        Calendar calendar <span style="color:#000;font-weight:bold">=</span> Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getInstance</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setTime</span><span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Êã®Âä®Ë°®Áõò
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">set</span><span style="color:#000;font-weight:bold">(</span>Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">HOUR_OF_DAY</span><span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">set</span><span style="color:#000;font-weight:bold">(</span>Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">MINUTE</span><span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">set</span><span style="color:#000;font-weight:bold">(</span>Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">SECOND</span><span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">set</span><span style="color:#000;font-weight:bold">(</span>Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">MILLISECOND</span><span style="color:#000;font-weight:bold">,</span> 0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        Date start <span style="color:#000;font-weight:bold">=</span> calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> start<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Êó∂Èó¥ÈÄíÂ¢ûNÂ∞èÊó∂
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param hour
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> Date <span style="color:#900;font-weight:bold">addDateHour</span><span style="color:#000;font-weight:bold">(</span>Date date<span style="color:#000;font-weight:bold">,</span><span style="color:#458;font-weight:bold">int</span> hour<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        Calendar calendar <span style="color:#000;font-weight:bold">=</span> Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getInstance</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setTime</span><span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>Calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">HOUR</span><span style="color:#000;font-weight:bold">,</span> hour<span style="color:#000;font-weight:bold">);</span><span style="color:#998;font-style:italic">// 24Â∞èÊó∂Âà∂
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        date <span style="color:#000;font-weight:bold">=</span> calendar<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> date<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ëé∑ÂèñÊåáÂÆöÊï∞ÈáèN‰∏™Êó∂Èó¥ÊÆµ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">getDates</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> hours<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//ÂàõÂª∫ÈõÜÂêà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> dates<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Ëé∑ÂèñÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥ÔºåÁöÑÂáåÊô®Êó∂Èó¥ÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Date date <span style="color:#000;font-weight:bold">=</span> toDayStartHour<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//2021-09-08 00:00:00
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//2021-09-08 02:00:00
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#998;font-style:italic">//2021-09-08 04:00:00
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;</span>hours <span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            dates<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>addDateHour<span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">,</span>i<span style="color:#000;font-weight:bold">*</span>2<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> dates<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥Á´ØÂíåÂæÄÂêé4‰∏™ÁöÑÊó∂Èó¥ÊÆµ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">getDateMenus</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Ëé∑Âèñ12‰∏™Êó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> dateList <span style="color:#000;font-weight:bold">=</span> getDates<span style="color:#000;font-weight:bold">(</span>12<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Ëé∑ÂèñÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        Date now <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//ÈÅçÂéÜ12‰∏™Êó∂Èó¥ÊÆµÔºåÂíåÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥ÊØîÂØπÔºåÁúãÂΩìÂâçÁ≥ªÁªüÊó∂Èó¥Â±û‰∫éÂì™‰∏™Êó∂Èó¥ÊÆµ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Date date <span style="color:#000;font-weight:bold">:</span> dateList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">()&lt;=</span>now<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">()&amp;&amp;</span>now<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">()&lt;</span>addDateHour<span style="color:#000;font-weight:bold">(</span>date<span style="color:#000;font-weight:bold">,</span>2<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">()){</span>
</span></span><span style="display:flex;"><span>                now<span style="color:#000;font-weight:bold">=</span>date<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">break</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â§ÑÁêÜË¶ÅÊòæÁ§∫Êó∂Èó¥ÊÆµ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> dateMenus<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> i <span style="color:#000;font-weight:bold">=</span> 0<span style="color:#000;font-weight:bold">;</span> i <span style="color:#000;font-weight:bold">&lt;</span>5 <span style="color:#000;font-weight:bold">;</span> i<span style="color:#000;font-weight:bold">++)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            dateMenus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>addDateHour<span style="color:#000;font-weight:bold">(</span>now<span style="color:#000;font-weight:bold">,</span>i<span style="color:#000;font-weight:bold">*</span>2<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> dateMenus<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">/*List&lt;Date&gt; dateList = DateUtil.getDates(12);
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">        for (Date date : dateList) {
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            System.out.println(DateUtil.date2StrFull(date));
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">        }*/</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> dateMenus <span style="color:#000;font-weight:bold">=</span> DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getDateMenus</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Date dateMenu <span style="color:#000;font-weight:bold">:</span> dateMenus<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">date2StrFull</span><span style="color:#000;font-weight:bold">(</span>dateMenu<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="233-Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÂØºÂÖ•reids">2.3.3 Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÂØºÂÖ•Reids</h4>
<p>Êàë‰ª¨ÂèØ‰ª•ÂÜô‰∏™ÂÆöÊó∂‰ªªÂä°ÔºåÊü•ËØ¢‰ªéÂΩìÂâçÊó∂Èó¥ÂºÄÂßãÔºåÂæÄÂêéÂª∂Áª≠4‰∏™Êó∂Èó¥ËèúÂçïÈó¥ÈöîÔºå‰πüÂ∞±ÊòØ‰∏ÄÂÖ±Âè™Êü•ËØ¢5‰∏™Êó∂Èó¥ÊÆµÊä¢Ë¥≠ÂïÜÂìÅÊï∞ÊçÆÔºåÂπ∂ÂéãÂÖ•ÁºìÂ≠òÔºåÂÆûÁé∞‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p>‰øÆÊîπSeckillGoodsPushTaskÁöÑloadGoodsPushRedisÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span> <span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * ÊØè30ÁßíÊâßË°å‰∏ÄÊ¨°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Scheduled</span><span style="color:#000;font-weight:bold">(</span>cron <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;0/30 * * * * ?&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">loadGoodsPushRedis</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Ëé∑ÂæóÊó∂Èó¥ÊÆµÈõÜÂêà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> dateMenus <span style="color:#000;font-weight:bold">=</span> DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getDateMenus</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Âæ™ÁéØÊó∂Èó¥ÊÆµÈõÜÂêà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Date startTime <span style="color:#000;font-weight:bold">:</span> dateMenus<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//ÊèêÂèñÂºÄÂßãÊó∂Èó¥ÔºåËΩ¨Êç¢‰∏∫Âπ¥ÊúàÊó•Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String extName <span style="color:#000;font-weight:bold">=</span> DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">date2Str</span><span style="color:#000;font-weight:bold">(</span>startTime<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//ÂàõÂª∫Êü•ËØ¢Êù°‰ª∂ÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            QueryWrapper<span style="color:#000;font-weight:bold">&lt;</span>SeckillGoods<span style="color:#000;font-weight:bold">&gt;</span> queryWrapper <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> QueryWrapper<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//ËÆæÁΩÆÊü•ËØ¢Êù°‰ª∂ 1)ÂïÜÂìÅÂøÖÈ°ªÂÆ°Ê†∏ÈÄöËøá  status=1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            queryWrapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">eq</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;status&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;1&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//2)Â∫ìÂ≠òÂ§ß‰∫é0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            queryWrapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">gt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;stock_count&#34;</span><span style="color:#000;font-weight:bold">,</span>0<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//3)ÂºÄÂßãÊó∂Èó¥&lt;=Ê¥ªÂä®ÂºÄÂßãÊó∂Èó¥ÔºàÊï∞ÊçÆÂ∫ìÔºâ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            queryWrapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">ge</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;start_time&#34;</span><span style="color:#000;font-weight:bold">,</span>DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">date2StrFull</span><span style="color:#000;font-weight:bold">(</span>startTime<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//4)Ê¥ªÂä®ÁªìÊùüÊó∂Èó¥&lt;ÂºÄÂßãÊó∂Èó¥+2Â∞èÊó∂
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            queryWrapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">lt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;end_time&#34;</span><span style="color:#000;font-weight:bold">,</span>DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">date2StrFull</span><span style="color:#000;font-weight:bold">(</span>DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addDateHour</span><span style="color:#000;font-weight:bold">(</span>startTime<span style="color:#000;font-weight:bold">,</span>2<span style="color:#000;font-weight:bold">)));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//5)ËØªÂèñredis‰∏≠Â≠òÂú®ÁöÑÂΩìÂ§©ÁöÑÁßíÊùÄÂïÜÂìÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            Set keys <span style="color:#000;font-weight:bold">=</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span><span style="color:#000;font-weight:bold">+</span>extName<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">keys</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Âà§Êñ≠keys‰∏ç‰∏∫Á©∫ÔºåÂ∞±ËÆæÁΩÆÊéíÈô§Êù°‰ª∂
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>keys<span style="color:#000;font-weight:bold">!=</span><span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">&amp;&amp;</span>keys<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">size</span><span style="color:#000;font-weight:bold">()&gt;</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                queryWrapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">notIn</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000;font-weight:bold">,</span>keys<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Êü•ËØ¢Á¨¶ÂêàÊù°‰ª∂ÁöÑÊï∞ÊçÆÂ∫ì
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            List<span style="color:#000;font-weight:bold">&lt;</span>SeckillGoods<span style="color:#000;font-weight:bold">&gt;</span> seckillGoodsList <span style="color:#000;font-weight:bold">=</span> seckillGoodsMapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">selectList</span><span style="color:#000;font-weight:bold">(</span>queryWrapper<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//ÈÅçÂéÜÊü•ËØ¢Âà∞Êï∞ÊçÆÈõÜÂêà,Â≠òÂÇ®Êï∞ÊçÆÂà∞redis
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>SeckillGoods seckillGoods <span style="color:#000;font-weight:bold">:</span> seckillGoodsList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>               redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span><span style="color:#000;font-weight:bold">+</span>extName<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>seckillGoods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getId</span><span style="color:#000;font-weight:bold">(),</span>seckillGoods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>               <span style="color:#998;font-style:italic">//ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥2Â∞èÊó∂
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">expireAt</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span><span style="color:#000;font-weight:bold">+</span>extName<span style="color:#000;font-weight:bold">,</span>DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addDateHour</span><span style="color:#000;font-weight:bold">(</span>startTime<span style="color:#000;font-weight:bold">,</span>2<span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>      
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>RedisÊï∞ÊçÆÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173036091.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="3-ÁßíÊùÄÈ¢ëÈÅìÈ°µ">3 ÁßíÊùÄÈ¢ëÈÅìÈ°µ</h2>
<p><img src="/posts/project-0/20220528172837/image-20220528173043087.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ÁßíÊùÄÈ¢ëÈÅìÈ¶ñÈ°µÔºåÊòæÁ§∫Ê≠£Âú®ÁßíÊùÄÁöÑÂíåÊú™ÂºÄÂßãÁßíÊùÄÁöÑÂïÜÂìÅÔºàÂ∑≤ÁªèÂºÄÂßãÊàñËÄÖËøòÊ≤°ÂºÄÂßãÔºåÊú™ÁªìÊùüÁöÑÁßíÊùÄÂïÜÂìÅÔºâ</p>
<h3 id="31-ÁßíÊùÄÊó∂Èó¥ËèúÂçï">3.1 ÁßíÊùÄÊó∂Èó¥ËèúÂçï</h3>
<p><img src="/posts/project-0/20220528172837/image-20220528173057826.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Â¶Ç‰∏äÂõæÔºåÊó∂Èó¥ËèúÂçïÈúÄË¶ÅÊ†πÊçÆÂΩìÂâçÊó∂Èó¥Âä®ÊÄÅÂä†ËΩΩÔºåÊó∂Èó¥ËèúÂçïÁöÑËÆ°ÁÆó‰∏äÈù¢ÂäüËÉΩ‰∏≠Â∑≤ÁªèÂÆûÁé∞ÔºåÂú®DateUtilÂ∑•ÂÖ∑ÂåÖ‰∏≠„ÄÇÊàë‰ª¨Âè™ÈúÄË¶ÅÂ∞ÜÊó∂Èó¥ËèúÂçïËé∑ÂèñÔºåÁÑ∂ÂêéÂìçÂ∫îÂà∞È°µÈù¢ÔºåÈ°µÈù¢Ê†πÊçÆÂØπÂ∫îÁöÑÊï∞ÊçÆÊòæÁ§∫Âç≥ÂèØ„ÄÇ</p>
<p>ÂàõÂª∫com.offcn.seckill.controller.SeckillGoodsControllerÔºåÂπ∂Ê∑ªÂä†ËèúÂçïËé∑ÂèñÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;/seckillGoods&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@CrossOrigin</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillGoodsController</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/*****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ëé∑ÂèñÊó∂Èó¥ËèúÂçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * URLL:/seckill/goods/menus
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/menus&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>Date<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">dateMenus</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> DateUtil<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getDateMenus</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>‰ΩøÁî®PostmanÊµãËØïÔºåÊïàÊûúÂ¶Ç‰∏ãÔºö</p>
<p>http://localhost:9005/seckillGoods/menus
<img src="/posts/project-0/20220528172837/image-20220528173104701.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ËÆøÈóÆÊñπÂêëÊòæÁ§∫ÁöÑÊó∂Èó¥ÊÆµÂíåÂΩìÂâçÊó∂Èó¥Áõ∏Â∑ÆÂÖ´‰∏™Â∞èÊó∂ÔºåÈúÄË¶ÅËÆæÁΩÆÊó∂Âå∫</p>
<p>‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂application.ymlËÆæÁΩÆjsonËΩ¨Êç¢Êó∂Âå∫</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">spring</span>:<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">jackson</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">time-zone</span>:<span style="color:#bbb"> </span>GMT+8<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="32-ÁßíÊùÄÈ¢ëÈÅìÈ°µ">3.2 ÁßíÊùÄÈ¢ëÈÅìÈ°µ</h3>
<p><img src="/posts/project-0/20220528172837/image-20220528173147199.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ÁßíÊùÄÈ¢ëÈÅìÈ°µÊòØÊåáÂ∞ÜÂØπÂ∫îÊó∂Âå∫ÁöÑÁßíÊùÄÂïÜÂìÅ‰ªéReidsÁºìÂ≠ò‰∏≠Êü•ËØ¢Âá∫Êù•ÔºåÂπ∂Âà∞È°µÈù¢ÊòæÁ§∫„ÄÇÂØπÂ∫îÊó∂Âå∫ÁßíÊùÄÂïÜÂìÅÂ≠òÂÇ®ÁöÑÊó∂ÂÄô‰ª•HashÁ±ªÂûãËøõË°å‰∫ÜÂ≠òÂÇ®Ôºåkey=SeckillGoods_2019010112Ôºåvalue=ÊØè‰∏™ÂïÜÂìÅËØ¶ÊÉÖ„ÄÇ</p>
<p>ÊØèÊ¨°Áî®Êà∑Âú®ÂâçÁ´ØÁÇπÂáªÂØπÂ∫îÊó∂Èó¥ËèúÂçïÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•Â∞ÜÊó∂Èó¥ËèúÂçïÁöÑÂºÄÂßãÊó∂Èó¥‰ª•yyyyMMddHHÊ†ºÂºèÊèê‰∫§Âà∞ÂêéÂè∞ÔºåÂêéÂè∞Ê†πÊçÆÊó∂Èó¥Ê†ºÂºèÊü•ËØ¢Âá∫ÂØπÂ∫îÊó∂Âå∫ÁßíÊùÄÂïÜÂìÅ‰ø°ÊÅØ„ÄÇ</p>
<h4 id="321-‰∏öÂä°Â±Ç">3.2.1 ‰∏öÂä°Â±Ç</h4>
<p>ÂàõÂª∫com.offcn.seckill.service.SeckillGoodsService,Ê∑ªÂä†Ê†πÊçÆÊó∂Âå∫Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÁöÑÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">SeckillGoodsService</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ëé∑ÂèñÊåáÂÆöÊó∂Èó¥ÂØπÂ∫îÁöÑÁßíÊùÄÂïÜÂìÅÂàóË°®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param key
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#000;font-weight:bold">&lt;</span>SeckillGoods<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">list</span><span style="color:#000;font-weight:bold">(</span>String key<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>ÂàõÂª∫com.offcn.seckill.service.impl.SeckillGoodsServiceImplÔºåÂÆûÁé∞Ê†πÊçÆÊó∂Âå∫Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅÁöÑÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillGoodsServiceImpl</span> <span style="color:#000;font-weight:bold">implements</span> SeckillGoodsService <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> RedisTemplate redisTemplate<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Redis‰∏≠Ê†πÊçÆKeyËé∑ÂèñÁßíÊùÄÂïÜÂìÅÂàóË°®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param key
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>SeckillGoods<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">list</span><span style="color:#000;font-weight:bold">(</span>String key<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span><span style="color:#000;font-weight:bold">+</span>key<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">values</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="322-ÊéßÂà∂Â±Ç">3.2.2 ÊéßÂà∂Â±Ç</h4>
<p>‰øÆÊîπcom.offcn.seckill.controller.SeckillGoodsControllerÔºåÂπ∂Ê∑ªÂä†ÁßíÊùÄÂïÜÂìÅÊü•ËØ¢ÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">private</span> SeckillGoodsService seckillGoodsService<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * URL:/seckillGoods/list
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * ÂØπÂ∫îÊó∂Èó¥ÊÆµÁßíÊùÄÂïÜÂìÅÈõÜÂêàÊü•ËØ¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Ë∞ÉÁî®ServiceÊü•ËØ¢Êï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param time:2019050716
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/list&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>SeckillGoods<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">list</span><span style="color:#000;font-weight:bold">(</span>String time<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ë∞ÉÁî®ServiceÊü•ËØ¢Êï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">return</span> seckillGoodsService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">list</span><span style="color:#000;font-weight:bold">(</span>time<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>‰ΩøÁî®PostmanÊµãËØïÔºåÊïàÊûúÂ¶Ç‰∏ãÔºö</p>
<p>http://localhost:9005/seckillGoods/list?time=2019052414
<img src="/posts/project-0/20220528172837/image-20220528173156655.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="4-ÁßíÊùÄËØ¶ÊÉÖÈ°µ">4 ÁßíÊùÄËØ¶ÊÉÖÈ°µ</h2>
<p>ÈÄöËøáÁßíÊùÄÈ¢ëÈÅìÈ°µÁÇπÂáªËØ∑Ë¥≠ÊåâÈíÆÔºå‰ºöË∑≥ËΩ¨Âà∞ÂïÜÂìÅÁßíÊùÄËØ¶ÊÉÖÈ°µÔºåÁßíÊùÄËØ¶ÊÉÖÈ°µÈúÄË¶ÅÊ†πÊçÆÂïÜÂìÅIDÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖÔºåÊàë‰ª¨ÂèØ‰ª•Âú®È¢ëÈÅìÈ°µÁÇπÂáªÁßíÊùÄÊä¢Ë¥≠ÁöÑÊó∂ÂÄôÂ∞ÜID‰∏ÄËµ∑‰º†Âà∞ÂêéÂè∞ÔºåÁÑ∂ÂêéÊ†πÊçÆIDÂéªRedis‰∏≠Êü•ËØ¢ËØ¶ÊÉÖ‰ø°ÊÅØ„ÄÇ</p>
<h3 id="41-‰∏öÂä°Â±Ç">4.1 ‰∏öÂä°Â±Ç</h3>
<p>‰øÆÊîπcom.offcn.seckill.service.SeckillGoodsServiceÔºåÊ∑ªÂä†Â¶Ç‰∏ãÊñπÊ≥ïÂÆûÁé∞Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖ,‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Ê†πÊçÆIDÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param time:Êó∂Èó¥Âå∫Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param id:ÂïÜÂìÅID
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span>SeckillGoods <span style="color:#900;font-weight:bold">one</span><span style="color:#000;font-weight:bold">(</span>String time<span style="color:#000;font-weight:bold">,</span>Long id<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>‰øÆÊîπcom.offcn.seckill.service.impl.SeckillGoodsServiceImplÔºåÊ∑ªÂä†Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Ê†πÊçÆÂïÜÂìÅIDÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param time:Êó∂Èó¥Âå∫Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param id:ÂïÜÂìÅID
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> SeckillGoods <span style="color:#900;font-weight:bold">one</span><span style="color:#000;font-weight:bold">(</span>String time<span style="color:#000;font-weight:bold">,</span> Long id<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">(</span>SeckillGoods<span style="color:#000;font-weight:bold">)</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span><span style="color:#000;font-weight:bold">+</span>time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="42-ÊéßÂà∂Â±Ç">4.2 ÊéßÂà∂Â±Ç</h3>
<p>‰øÆÊîπcom.offcn.seckill.controller.SeckillGoodsControllerÔºåÊ∑ªÂä†Â¶Ç‰∏ãÊñπÊ≥ïÂÆûÁé∞Êü•ËØ¢ÁßíÊùÄÂïÜÂìÅËØ¶ÊÉÖÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * URL:/seckillGoods/one
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Ê†πÊçÆIDÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Ë∞ÉÁî®ServiceÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param time
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/one&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> SeckillGoods <span style="color:#900;font-weight:bold">one</span><span style="color:#000;font-weight:bold">(</span>String time<span style="color:#000;font-weight:bold">,</span>Long id<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ë∞ÉÁî®ServiceÊü•ËØ¢ÂïÜÂìÅËØ¶ÊÉÖ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">return</span> seckillGoodsService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">one</span><span style="color:#000;font-weight:bold">(</span>time<span style="color:#000;font-weight:bold">,</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>‰ΩøÁî®PostmanÊµãËØïÔºåÊïàÊûúÂ¶Ç‰∏ãÔºö</p>
<p>http://localhost:9005/seckillGoods/one?id=1&amp;time=2019052414
<img src="/posts/project-0/20220528172837/image-20220528173206034.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="5-‰∏ãÂçïÂÆûÁé∞">5 ‰∏ãÂçïÂÆûÁé∞</h2>
<p>Áî®Êà∑‰∏ãÂçïÔºå‰ªéÊéßÂà∂Â±Ç-&gt;ServiceÂ±Ç-&gt;DaoÂ±ÇÔºåÊâÄ‰ª•Êàë‰ª¨ÂÖàÊäädaoÂàõÂª∫Â•ΩÔºåÂÜçÂàõÂª∫serviceÂ±ÇÔºåÂÜçÂàõÂª∫ÊéßÂà∂Â±Ç„ÄÇ</p>
<p>Áî®Êà∑‰∏ãÂçïÔºå‰∏∫‰∫ÜÊèêÂçá‰∏ãÂçïÈÄüÂ∫¶ÔºåÊàë‰ª¨Â∞ÜËÆ¢ÂçïÊï∞ÊçÆÂ≠òÂÖ•Âà∞RedisÁºìÂ≠ò‰∏≠ÔºåÂ¶ÇÊûúÁî®Êà∑ÊîØ‰ªò‰∫ÜÔºåÂàôÂ∞ÜReidsÁºìÂ≠ò‰∏≠ÁöÑËÆ¢ÂçïÂ≠òÂÖ•Âà∞MySQL‰∏≠ÔºåÂπ∂Ê∏ÖÁ©∫RedisÁºìÂ≠ò‰∏≠ÁöÑËÆ¢Âçï„ÄÇ</p>
<h3 id="51-‰∏öÂä°Â±Ç">5.1 ‰∏öÂä°Â±Ç</h3>
<p>ÂàõÂª∫com.offcn.seckill.service.SeckillOrderServiceÔºåÂπ∂Âú®Êé•Âè£‰∏≠Â¢ûÂä†‰∏ãÂçïÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">SeckillOrderService</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ê∑ªÂä†ÁßíÊùÄËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id:ÁßíÊùÄÂïÜÂìÅID
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param time:ÂïÜÂìÅÁßíÊùÄÂºÄÂßãÊó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param username:Áî®Êà∑ÁôªÂΩïÂêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    Boolean <span style="color:#900;font-weight:bold">add</span><span style="color:#000;font-weight:bold">(</span>Long id<span style="color:#000;font-weight:bold">,</span> String time<span style="color:#000;font-weight:bold">,</span> String username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>ÂàõÂª∫com.offcn.seckill.service.impl.SeckillOrderServiceImplÂÆûÁé∞Á±ªÔºåÂπ∂Âú®Á±ª‰∏≠Ê∑ªÂä†‰∏ãÂçïÂÆûÁé∞ÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillOrderServiceImpl</span> <span style="color:#000;font-weight:bold">implements</span> SeckillOrderService <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> RedisTemplate redisTemplate<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> SeckillGoodsMapper seckillGoodsMapper<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> IdWorker idWorker<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ê∑ªÂä†ËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param time
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param username
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> Boolean <span style="color:#900;font-weight:bold">add</span><span style="color:#000;font-weight:bold">(</span>Long id<span style="color:#000;font-weight:bold">,</span> String time<span style="color:#000;font-weight:bold">,</span> String username<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Ëé∑ÂèñÂïÜÂìÅÊï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        SeckillGoods goods <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>SeckillGoods<span style="color:#000;font-weight:bold">)</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊ≤°ÊúâÂ∫ìÂ≠òÔºåÂàôÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">==</span><span style="color:#000;font-weight:bold">null</span> <span style="color:#000;font-weight:bold">||</span> goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()&lt;=</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">throw</span> <span style="color:#000;font-weight:bold">new</span> RuntimeException<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Â∑≤ÂîÆÁΩÑ!&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊúâÂ∫ìÂ≠òÔºåÂàôÂàõÂª∫ÁßíÊùÄÂïÜÂìÅËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        SeckillOrder seckillOrder <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> SeckillOrder<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setId</span><span style="color:#000;font-weight:bold">(</span>idWorker<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextId</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setSeckillId</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setMoney</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getCostPrice</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setUserId</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setCreateTime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setStatus</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;0&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â∞ÜÁßíÊùÄËÆ¢ÂçïÂ≠òÂÖ•Âà∞Redis‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillOrder&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">,</span>seckillOrder<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â∫ìÂ≠òÂáèÂ∞ë
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setStockCount</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()-</span>1<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Âà§Êñ≠ÂΩìÂâçÂïÜÂìÅÊòØÂê¶ËøòÊúâÂ∫ìÂ≠ò
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()&lt;=</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Âπ∂‰∏îÂ∞ÜÂïÜÂìÅÊï∞ÊçÆÂêåÊ≠•Âà∞MySQL‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            seckillGoodsMapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">updateById</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊ≤°ÊúâÂ∫ìÂ≠ò,ÂàôÊ∏ÖÁ©∫RedisÁºìÂ≠ò‰∏≠ËØ•ÂïÜÂìÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">delete</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊúâÂ∫ìÂ≠òÔºåÂàôÁõ¥Êï∞ÊçÆÈáçÁΩÆÂà∞Reids‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">,</span>goods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="52-ÊéßÂà∂Â±Ç">5.2 ÊéßÂà∂Â±Ç</h3>
<p>ÂàõÂª∫com.offcn.seckill.controller.SeckillOrderControllerÔºåÊ∑ªÂä†‰∏ãÂçïÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@CrossOrigin</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/seckillOrder&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillOrderController</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> SeckillOrderService seckillOrderService<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * URL:/seckillOrder/add
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ê∑ªÂä†ËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ë∞ÉÁî®ServiceÂ¢ûÂä†ËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * ÂåøÂêçËÆøÈóÆÔºöanonymousUser
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param time
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/add&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> Result <span style="color:#900;font-weight:bold">add</span><span style="color:#000;font-weight:bold">(</span>String time<span style="color:#000;font-weight:bold">,</span> Long id<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Áî®Êà∑ÁôªÂΩïÂêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String username <span style="color:#000;font-weight:bold">=</span> TokenDcode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getUserInfo</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;user_name&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Ë∞ÉÁî®ServiceÂ¢ûÂä†ËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            Boolean bo <span style="color:#000;font-weight:bold">=</span> seckillOrderService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">,</span> time<span style="color:#000;font-weight:bold">,</span> username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>bo<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//Êä¢ÂçïÊàêÂäü
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>StatusCode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">OK</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;Êä¢ÂçïÊàêÂäüÔºÅ&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>Exception e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">printStackTrace</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>             <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>StatusCode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">ERROR</span><span style="color:#000;font-weight:bold">,</span>e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getMessage</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>StatusCode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">ERROR</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;ÊúçÂä°Âô®ÁπÅÂøôÔºåËØ∑Á®çÂêéÂÜçËØï&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="53Êï¥ÂêàgatewayÁΩëÂÖ≥ÈÖçÁΩÆËµÑÊ∫êÊúçÂä°Âô®">5.3„ÄÅÊï¥ÂêàgatewayÁΩëÂÖ≥„ÄÅÈÖçÁΩÆËµÑÊ∫êÊúçÂä°Âô®</h3>
<h4 id="531‰øÆÊîπÈ°πÁõÆdongyimai-seckill-serviceÂºïÂÖ•‰æùËµñ">5.3.1„ÄÅ‰øÆÊîπÈ°πÁõÆdongyimai-seckill-serviceÂºïÂÖ•‰æùËµñ</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#bbb"> </span>&lt;!--oauth‰æùËµñ--&gt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>&lt;dependency&gt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>&lt;artifactId&gt;spring-cloud-starter-oauth2&lt;/artifactId&gt;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>&lt;/dependency&gt;<span style="color:#bbb">
</span></span></span></code></pre></div><h4 id="532Êã∑Ë¥ùÂÖ¨Èí•‰ª•ÂèäËµÑÊ∫êÊúçÂä°Âô®ÈÖçÁΩÆÁ±ªÊñá‰ª∂">5.3.2„ÄÅÊã∑Ë¥ùÂÖ¨Èí•„ÄÅ‰ª•ÂèäËµÑÊ∫êÊúçÂä°Âô®ÈÖçÁΩÆÁ±ªÊñá‰ª∂</h4>
<p><img src="/posts/project-0/20220528172837/image-20220528173217418.png"
    
    
    
    loading="lazy"
    
    
></p>
<h4 id="533‰øÆÊîπÁΩëÂÖ≥ÈÖçÁΩÆÊñá‰ª∂Â¢ûÂä†ÁßíÊùÄÂæÆÊúçÂä°ËΩ¨Âèë">5.3.3„ÄÅ‰øÆÊîπÁΩëÂÖ≥ÈÖçÁΩÆÊñá‰ª∂ÔºåÂ¢ûÂä†ÁßíÊùÄÂæÆÊúçÂä°ËΩ¨Âèë</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#bbb">        </span>- <span style="color:#000080">id</span>:<span style="color:#bbb"> </span>dongyimai_seckill_route<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#000080">uri</span>:<span style="color:#bbb"> </span>lb://SECKILL<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#000080">predicates</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>- Path=/api/seckillGoods/**,/api/seckillOrder/**<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span><span style="color:#000080">filters</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>- StripPrefix=1<span style="color:#bbb">
</span></span></span></code></pre></div><p>ÊµãËØïÁßíÊùÄ‰∏ãÂçïÔºö</p>
<p>http://localhost:8001/api/seckillOrder/add?time=2021061820&amp;id=1</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">flag:</span> <span style="color:#a61717;background-color:#e3d2d2">true,</span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">code:</span> <span style="color:#a61717;background-color:#e3d2d2">20000,</span>
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">message:</span> <span style="color:#000080">&#34;ÁßíÊùÄÊàêÂäü&#34;</span>,
</span></span><span style="display:flex;"><span><span style="color:#a61717;background-color:#e3d2d2">data:</span> <span style="color:#a61717;background-color:#e3d2d2">null</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ÈóÆÈ¢òÂàÜÊûê:</p>
<p>‰∏äËø∞ÂäüËÉΩÂÆåÊàê‰∫ÜÁßíÊùÄÊä¢ÂçïÊìç‰ΩúÔºå‰ΩÜÊ≤°ÊúâËß£ÂÜ≥Âπ∂ÂèëÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢òÔºå‰æãÂ¶ÇÂπ∂Âèë„ÄÅË∂ÖÂçñÁé∞Ë±°ÔºåËøôÂùóÁîöËá≥ÊúâÂèØËÉΩ‰∫ßÁîüÈõ™Â¥©ÈóÆÈ¢ò„ÄÇ</p>
<h2 id="6-Â§öÁ∫øÁ®ãÊä¢Âçï">6 Â§öÁ∫øÁ®ãÊä¢Âçï</h2>
<h3 id="61--ÂÆûÁé∞ÊÄùË∑ØÂàÜÊûê">6.1  ÂÆûÁé∞ÊÄùË∑ØÂàÜÊûê</h3>
<p><img src="/posts/project-0/20220528172837/image-20220528173224443.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Âú®Áé∞ÂÆûÁßíÊùÄ‰∏≠ÔºåÊìç‰Ωú‰∏ÄËà¨ÈÉΩÊòØÊØîËæÉÂ§çÊùÇÁöÑÔºåËÄå‰∏îÂπ∂ÂèëÈáèÁâπÂà´È´òÔºåÊØîÂ¶ÇÔºåÊ£ÄÊü•ÂΩìÂâçË¥¶Âè∑Êìç‰ΩúÊòØÂê¶Â∑≤ÁªèÁßíÊùÄËøáËØ•ÂïÜÂìÅÔºåÊ£ÄÊü•ËØ•Ë¥¶Âè∑ÊòØÂê¶Â≠òÂú®Â≠òÂú®Âà∑ÂçïË°å‰∏∫ÔºåËÆ∞ÂΩïÁî®Êà∑Êìç‰ΩúÊó•ÂøóÁ≠â„ÄÇ</p>
<p>‰∏ãËÆ¢ÂçïËøôÈáåÔºåÊàë‰ª¨‰∏ÄËà¨ÈááÁî®Â§öÁ∫øÁ®ã‰∏ãÂçïÔºå‰ΩÜÂ§öÁ∫øÁ®ã‰∏≠Êàë‰ª¨ÂèàÈúÄË¶Å‰øùËØÅÁî®Êà∑Êä¢ÂçïÁöÑÂÖ¨Âπ≥ÊÄßÔºå‰πüÂ∞±ÊòØÂÖàÊä¢ÂÖà‰∏ãÂçï„ÄÇÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂÆûÁé∞ÔºåÁî®Êà∑ËøõÂÖ•ÁßíÊùÄÊä¢ÂçïÔºåÂ¶ÇÊûúÁî®Êà∑Á¨¶ÂêàÊä¢ÂçïËµÑÊ†ºÔºåÂè™ÈúÄË¶ÅËÆ∞ÂΩïÁî®Êà∑Êä¢ÂçïÊï∞ÊçÆÔºåÂ≠òÂÖ•ÈòüÂàóÔºåÂ§öÁ∫øÁ®ã‰ªéÈòüÂàó‰∏≠ËøõË°åÊ∂àË¥πÂç≥ÂèØÔºåÂ≠òÂÖ•ÈòüÂàóÈááÁî®Â∑¶ÂéãÔºåÂ§öÁ∫øÁ®ã‰∏ãÂçïÈááÁî®Âè≥ÂèñÁöÑÊñπÂºè„ÄÇ</p>
<h3 id="62-ÂºÇÊ≠•ÂÆûÁé∞">6.2 ÂºÇÊ≠•ÂÆûÁé∞</h3>
<p>Ë¶ÅÊÉ≥‰ΩøÁî®SpringÁöÑÂºÇÊ≠•Êìç‰ΩúÔºåÈúÄË¶ÅÂÖàÂºÄÂêØÂºÇÊ≠•Êìç‰ΩúÔºåÁî®<code>@EnableAsync</code>Ê≥®Ëß£ÂºÄÂêØÔºåÁÑ∂ÂêéÂú®ÂØπÂ∫îÁöÑÂºÇÊ≠•ÊñπÊ≥ï‰∏äÊ∑ªÂä†Ê≥®Ëß£<code>@Async</code>Âç≥ÂèØ„ÄÇ</p>
<p>ÂàõÂª∫com.offcn.seckill.task.MultiThreadingCreateOrderÁ±ªÔºåÂú®Á±ª‰∏≠ÂàõÂª∫‰∏Ä‰∏™createOrderÊñπÊ≥ïÔºåÂπ∂Âú®ÊñπÊ≥ï‰∏äÊ∑ªÂä†<code>@Async</code>,‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">MultiThreadingCreateOrder</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Â§öÁ∫øÁ®ã‰∏ãÂçïÊìç‰Ωú
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Async</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">createOrder</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;ÂáÜÂ§áÊâßË°å....&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            Thread<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sleep</span><span style="color:#000;font-weight:bold">(</span>20000<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;ÂºÄÂßãÊâßË°å....&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>InterruptedException e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">printStackTrace</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>‰∏äÈù¢createOrderÊñπÊ≥ïËøõË°å‰∫Ü‰ºëÁú†ÈòªÂ°ûÊìç‰ΩúÔºåÊàë‰ª¨Âú®‰∏ãÂçïÁöÑÊñπÊ≥ïË∞ÉÁî®createOrderÊñπÊ≥ïÔºåÂ¶ÇÊûú‰∏ãÂçïÁöÑÊñπÊ≥ïÊ≤°ÊúâÈòªÂ°ûÔºåÁªßÁª≠ÊâßË°åÔºåËØ¥ÊòéÂ±û‰∫éÂºÇÊ≠•Êìç‰ΩúÔºåÂ¶ÇÊûúÈòªÂ°û‰∫ÜÔºåËØ¥ÊòéÊ≤°ÊúâÊâßË°åÂºÇÊ≠•Êìç‰Ωú„ÄÇ</p>
<p>‰øÆÊîπÁßíÊùÄÊä¢ÂçïSeckillOrderServiceImpl‰ª£Á†ÅÔºåÊ≥®ÂÖ•MultiThreadingCreateOrder,Âπ∂Ë∞ÉÁî®createOrderÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173230560.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Ê≥®ÊÑèasyncÈúÄË¶ÅÂú®‰∏ªÂêØÂä®ÂºÄÂêØ
<img src="/posts/project-0/20220528172837/image-20220528173234902.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰ΩøÁî®PostmanÊµãËØïÂ¶Ç‰∏ãÔºö</p>
<p>http://localhost:8001/api/seckillOrder/add?id=1&amp;time=2021061820
<img src="/posts/project-0/20220528172837/image-20220528173240093.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>ÁïåÈù¢Â∑≤ÁªèÊòæÁ§∫‰∫ÜÁªìÊûúÔºåÊéßÂà∂Âè∞ËøòÊ≤°ÊúâÊâßË°åËæìÂá∫ÔºåÂºÇÊ≠•ÊñπÂºèÂÆåÊàê‰ªªÂä°„ÄÇ</p>
<h3 id="63-Â§öÁ∫øÁ®ãÊä¢Âçï">6.3 Â§öÁ∫øÁ®ãÊä¢Âçï</h3>
<p><img src="/posts/project-0/20220528172837/image-20220528173246840.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Áî®Êà∑ÊØèÊ¨°‰∏ãÂçïÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÈÉΩËÆ©‰ªñ‰ª¨ÂÖàËøõË°åÊéíÈòüÔºåÁÑ∂ÂêéÈááÁî®Â§öÁ∫øÁ®ãÁöÑÊñπÂºèÂàõÂª∫ËÆ¢ÂçïÔºåÊéíÈòüÊàë‰ª¨ÂèØ‰ª•ÈááÁî®RedisÁöÑÈòüÂàóÂÆûÁé∞ÔºåÂ§öÁ∫øÁ®ã‰∏ãÂçïÊàë‰ª¨ÂèØ‰ª•ÈááÁî®SpringÁöÑÂºÇÊ≠•ÂÆûÁé∞„ÄÇ</p>
<h4 id="631-Â§öÁ∫øÁ®ã‰∏ãÂçï">6.3.1 Â§öÁ∫øÁ®ã‰∏ãÂçï</h4>
<p>Â∞Ü‰πãÂâç‰∏ãÂçïÁöÑ‰ª£Á†ÅÂÖ®ÈÉ®Êå™Âà∞Â§öÁ∫øÁ®ãÁöÑÊñπÊ≥ï‰∏≠Ôºåcom.offcn.seckill.service.impl.SeckillOrderServiceImplÁ±ªÁöÑÊñπÊ≥ïÂÄºË¥üË¥£Ë∞ÉÁî®Âç≥ÂèØÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173251856.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>Â§öÁ∫øÁ®ã‰∏ãÂçï‰ª£Á†ÅÂ¶Ç‰∏ãÂõæÔºö
<img src="/posts/project-0/20220528172837/image-20220528173257849.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰∏äÂõæ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">MultiThreadingCreateOrder</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> RedisTemplate redisTemplate<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> SeckillGoodsMapper seckillGoodsMapper<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> IdWorker idWorker<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Â§öÁ∫øÁ®ã‰∏ãÂçïÊìç‰Ωú
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Async</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">createOrder</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Êó∂Èó¥Âå∫Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String time <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;2019052510&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Áî®Êà∑ÁôªÂΩïÂêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String username<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;offcn1234&#34;</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Áî®Êà∑Êä¢Ë¥≠ÂïÜÂìÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            Long id <span style="color:#000;font-weight:bold">=</span> 1131814847898587136L<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Ëé∑ÂèñÂïÜÂìÅÊï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            SeckillGoods goods <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>SeckillGoods<span style="color:#000;font-weight:bold">)</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊ≤°ÊúâÂ∫ìÂ≠òÔºåÂàôÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">==</span><span style="color:#000;font-weight:bold">null</span> <span style="color:#000;font-weight:bold">||</span> goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()&lt;=</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                <span style="color:#000;font-weight:bold">throw</span> <span style="color:#000;font-weight:bold">new</span> RuntimeException<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Â∑≤ÂîÆÁΩÑ!&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊúâÂ∫ìÂ≠òÔºåÂàôÂàõÂª∫ÁßíÊùÄÂïÜÂìÅËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            SeckillOrder seckillOrder <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> SeckillOrder<span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setId</span><span style="color:#000;font-weight:bold">(</span>idWorker<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextId</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setSeckillId</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setMoney</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getCostPrice</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setUserId</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setCreateTime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>            seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setStatus</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;0&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â∞ÜÁßíÊùÄËÆ¢ÂçïÂ≠òÂÖ•Âà∞Redis‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillOrder&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">,</span>seckillOrder<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Â∫ìÂ≠òÂáèÂ∞ë
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setStockCount</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()-</span>1<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Âà§Êñ≠ÂΩìÂâçÂïÜÂìÅÊòØÂê¶ËøòÊúâÂ∫ìÂ≠ò
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStockCount</span><span style="color:#000;font-weight:bold">()&lt;=</span>0<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//Âπ∂‰∏îÂ∞ÜÂïÜÂìÅÊï∞ÊçÆÂêåÊ≠•Âà∞MySQL‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                seckillGoodsMapper<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">updateByPrimaryKeySelective</span><span style="color:#000;font-weight:bold">(</span>goods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊ≤°ÊúâÂ∫ìÂ≠ò,ÂàôÊ∏ÖÁ©∫RedisÁºìÂ≠ò‰∏≠ËØ•ÂïÜÂìÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">delete</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span><span style="color:#000;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#998;font-style:italic">//Â¶ÇÊûúÊúâÂ∫ìÂ≠òÔºåÂàôÁõ¥Êï∞ÊçÆÈáçÁΩÆÂà∞Reids‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>                redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillGoods_&#34;</span> <span style="color:#000;font-weight:bold">+</span> time<span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>id<span style="color:#000;font-weight:bold">,</span>goods<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>Exception e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">printStackTrace</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Ê≠§Êó∂ÊµãËØïÔºåÊòØÂèØ‰ª•Ê≠£Â∏∏‰∏ãÂçïÁöÑÔºå‰ΩÜÊòØÁî®Êà∑ÂêçÂíåËÆ¢ÂçïÈÉΩÂÜôÊ≠ª‰∫ÜÔºåÊ≠§Â§ÑÈúÄË¶ÅÁªßÁª≠‰ºòÂåñ„ÄÇ</p>
<p>http://localhost:8001/api/seckillOrder/add?id=1&amp;time=2021061820</p>
<h4 id="632-ÊéíÈòü‰∏ãÂçï">6.3.2 ÊéíÈòü‰∏ãÂçï</h4>
<h5 id="6321-ÊéíÈòü‰ø°ÊÅØÂ∞ÅË£Ö">6.3.2.1 ÊéíÈòü‰ø°ÊÅØÂ∞ÅË£Ö</h5>
<p>Áî®Êà∑ÊØèÊ¨°‰∏ãÂçïÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™ÈòüÂàóËøõË°åÊéíÈòüÔºåÁÑ∂ÂêéÈááÁî®Â§öÁ∫øÁ®ãÁöÑÊñπÂºèÂàõÂª∫ËÆ¢ÂçïÔºåÊéíÈòüÊàë‰ª¨ÂèØ‰ª•ÈááÁî®RedisÁöÑÈòüÂàóÂÆûÁé∞„ÄÇ ÊéíÈòü‰ø°ÊÅØ‰∏≠ÈúÄË¶ÅÊúâÁî®Êà∑Êä¢ÂçïÁöÑÂïÜÂìÅ‰ø°ÊÅØÔºå‰∏ªË¶ÅÂåÖÂê´ÂïÜÂìÅIDÔºåÂïÜÂìÅÊä¢Ë¥≠Êó∂Èó¥ÊÆµÔºåÁî®Êà∑ÁôªÂΩïÂêç„ÄÇÊàë‰ª¨ÂèØ‰ª•ËÆæËÆ°‰∏™javabeanÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillStatus</span> <span style="color:#000;font-weight:bold">implements</span> Serializable <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÁßíÊùÄÁî®Êà∑Âêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> String username<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÂàõÂª∫Êó∂Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> Date createTime<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÁßíÊùÄÁä∂ÊÄÅ  1:ÊéíÈòü‰∏≠Ôºå2:ÁßíÊùÄÁ≠âÂæÖÊîØ‰ªò,3:ÊîØ‰ªòË∂ÖÊó∂Ôºå4:ÁßíÊùÄÂ§±Ë¥•,5:ÊîØ‰ªòÂÆåÊàê
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> Integer status<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ÁßíÊùÄÁöÑÂïÜÂìÅID
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> Long goodsId<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Â∫î‰ªòÈáëÈ¢ù
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> Float money<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//ËÆ¢ÂçïÂè∑
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> Long orderId<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Êó∂Èó¥ÊÆµ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">private</span> String time<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">SeckillStatus</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">SeckillStatus</span><span style="color:#000;font-weight:bold">(</span>String username<span style="color:#000;font-weight:bold">,</span> Date createTime<span style="color:#000;font-weight:bold">,</span> Integer status<span style="color:#000;font-weight:bold">,</span> Long goodsId<span style="color:#000;font-weight:bold">,</span> String time<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">username</span> <span style="color:#000;font-weight:bold">=</span> username<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createTime</span> <span style="color:#000;font-weight:bold">=</span> createTime<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">status</span> <span style="color:#000;font-weight:bold">=</span> status<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">goodsId</span> <span style="color:#000;font-weight:bold">=</span> goodsId<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">time</span> <span style="color:#000;font-weight:bold">=</span> time<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//get„ÄÅset...Áï•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h5 id="6322-ÊéíÈòüÂÆûÁé∞">6.3.2.2 ÊéíÈòüÂÆûÁé∞</h5>
<p>Êàë‰ª¨ÂèØ‰ª•Â∞ÜÁßíÊùÄÊä¢Âçï‰ø°ÊÅØÂ≠òÂÖ•Âà∞Redis‰∏≠,ËøôÈáåÈááÁî®ListÊñπÂºèÂ≠òÂÇ®,ListÊú¨Ë∫´ÊòØ‰∏Ä‰∏™ÈòüÂàóÔºåÁî®Êà∑ÁÇπÂáªÊä¢Ë¥≠ÁöÑÊó∂ÂÄôÔºåÂ∞±Â∞ÜÁî®Êà∑Êä¢Ë¥≠‰ø°ÊÅØÂ≠òÂÖ•Âà∞Redis‰∏≠Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Service</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">SeckillOrderServiceImpl</span> <span style="color:#000;font-weight:bold">implements</span> SeckillOrderService <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> MultiThreadingCreateOrder multiThreadingCreateOrder<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">private</span> RedisTemplate redisTemplate<span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * Ê∑ªÂä†ËÆ¢Âçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param id
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param time
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     * @param username
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">     */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">public</span> Boolean <span style="color:#900;font-weight:bold">add</span><span style="color:#000;font-weight:bold">(</span>Long id<span style="color:#000;font-weight:bold">,</span> String time<span style="color:#000;font-weight:bold">,</span> String username<span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//ÊéíÈòü‰ø°ÊÅØÂ∞ÅË£Ö
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        SeckillStatus seckillStatus <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> SeckillStatus<span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">new</span> Date<span style="color:#000;font-weight:bold">(),</span>1<span style="color:#000;font-weight:bold">,</span> id<span style="color:#000;font-weight:bold">,</span>time<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â∞ÜÁßíÊùÄÊä¢Âçï‰ø°ÊÅØÂ≠òÂÖ•Âà∞Redis‰∏≠,ËøôÈáåÈááÁî®ListÊñπÂºèÂ≠òÂÇ®,ListÊú¨Ë∫´ÊòØ‰∏Ä‰∏™ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundListOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillOrderQueue&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">leftPush</span><span style="color:#000;font-weight:bold">(</span>seckillStatus<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#998;font-style:italic">//Â§öÁ∫øÁ®ãÊìç‰Ωú
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        multiThreadingCreateOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">createOrder</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>Â§öÁ∫øÁ®ãÊØèÊ¨°‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºåÂàÜÂà´Ëé∑ÂèñÁî®Êà∑ÂêçÂíåËÆ¢ÂçïÂïÜÂìÅÁºñÂè∑‰ª•ÂèäÂïÜÂìÅÁßíÊùÄÊó∂Èó¥ÊÆµÔºåËøõË°å‰∏ãÂçïÊìç‰ΩúÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173309368.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰∏äÂõæ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Â§öÁ∫øÁ®ã‰∏ãÂçïÊìç‰Ωú
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Async</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">createOrder</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÊéíÈòü‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    SeckillStatus seckillStatus <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>SeckillStatus<span style="color:#000;font-weight:bold">)</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundListOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;SeckillOrderQueue&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">rightPop</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">try</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>seckillStatus<span style="color:#000;font-weight:bold">!=</span><span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Êó∂Èó¥Âå∫Èó¥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String time <span style="color:#000;font-weight:bold">=</span> seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Áî®Êà∑ÁôªÂΩïÂêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            String username<span style="color:#000;font-weight:bold">=</span>seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getUsername</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//Áî®Êà∑Êä¢Ë¥≠ÂïÜÂìÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>            Long id <span style="color:#000;font-weight:bold">=</span> seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getGoodsId</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#998;font-style:italic">//...Áï•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">catch</span> <span style="color:#000;font-weight:bold">(</span>Exception e<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        e<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">printStackTrace</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="633-‰∏ãÂçïÁä∂ÊÄÅÊü•ËØ¢">6.3.3 ‰∏ãÂçïÁä∂ÊÄÅÊü•ËØ¢</h4>
<p>ÊåâÁÖß‰∏äÈù¢ÁöÑÊµÅÁ®ãÔºåËôΩÁÑ∂ÂèØ‰ª•ÂÆûÁé∞Áî®Êà∑‰∏ãÂçïÂºÇÊ≠•Êìç‰ΩúÔºå‰ΩÜÊòØÂπ∂‰∏çËÉΩÁ°ÆÂÆö‰∏ãÂçïÊòØÂê¶ÊàêÂäüÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶ÅÂÅö‰∏Ä‰∏™È°µÈù¢Âà§Êñ≠ÔºåÊØèËøá1ÁßíÈíüÊü•ËØ¢‰∏ÄÊ¨°‰∏ãÂçïÁä∂ÊÄÅ,Â§öÁ∫øÁ®ã‰∏ãÂçïÁöÑÊó∂ÂÄôÔºåÈúÄË¶Å‰øÆÊîπÊä¢ÂçïÁä∂ÊÄÅÔºåÊîØ‰ªòÁöÑÊó∂ÂÄôÔºåÊ∏ÖÁêÜÊä¢ÂçïÁä∂ÊÄÅ„ÄÇ</p>
<h5 id="6331-‰∏ãÂçïÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ">6.3.3.1 ‰∏ãÂçïÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ</h5>
<p>Áî®Êà∑ÊØèÊ¨°ÁÇπÂáªÊä¢Ë¥≠ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊéíÈòüÊàêÂäüÔºåÂàôÂ∞ÜÁî®Êà∑Êä¢Ë¥≠Áä∂ÊÄÅÂ≠òÂÇ®Âà∞Redis‰∏≠ÔºåÂ§öÁ∫øÁ®ãÊä¢ÂçïÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÊä¢ÂçïÊàêÂäüÔºåÂàôÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ„ÄÇ</p>
<p>‰øÆÊîπSeckillOrderServiceImplÁöÑaddÊñπÊ≥ïÔºåËÆ∞ÂΩïÁä∂ÊÄÅÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173315680.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰∏äÂõæ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//Â∞ÜÊä¢ÂçïÁä∂ÊÄÅÂ≠òÂÖ•Âà∞Redis‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;UserQueueStatus&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">,</span>seckillStatus<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>Â§öÁ∫øÁ®ãÊä¢ÂçïÊõ¥Êñ∞Áä∂ÊÄÅÔºå‰øÆÊîπMultiThreadingCreateOrderÁöÑcreateOrderÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö
<img src="/posts/project-0/20220528172837/image-20220528173320083.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰∏äÂõæ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">//Êä¢ÂçïÊàêÂäüÔºåÊõ¥Êñ∞Êä¢ÂçïÁä∂ÊÄÅ,ÊéíÈòü-&gt;Á≠âÂæÖÊîØ‰ªò
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setStatus</span><span style="color:#000;font-weight:bold">(</span>2<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setOrderId</span><span style="color:#000;font-weight:bold">(</span>seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getId</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">setMoney</span><span style="color:#000;font-weight:bold">(</span>seckillOrder<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getMoney</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">floatValue</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;UserQueueStatus&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">,</span>seckillStatus<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><h5 id="6332-ÂêéÂè∞Êü•ËØ¢Êä¢ÂçïÁä∂ÊÄÅ">6.3.3.2 ÂêéÂè∞Êü•ËØ¢Êä¢ÂçïÁä∂ÊÄÅ</h5>
<p>ÂêéÂè∞Êèê‰æõÊä¢ÂçïÁä∂ÊÄÅÊü•ËØ¢ÊñπÊ≥ïÔºå‰øÆÊîπSeckillOrderServiceÔºåÊ∑ªÂä†Â¶Ç‰∏ãÊü•ËØ¢ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Êä¢ÂçïÁä∂ÊÄÅÊü•ËØ¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param username
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span>SeckillStatus <span style="color:#900;font-weight:bold">queryStatus</span><span style="color:#000;font-weight:bold">(</span>String username<span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><p>‰øÆÊîπSeckillOrderServiceImpl,Ê∑ªÂä†Â¶Ç‰∏ãÂÆûÁé∞ÊñπÊ≥ïÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/***
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Êä¢ÂçïÁä∂ÊÄÅÊü•ËØ¢
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @param username
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> SeckillStatus <span style="color:#900;font-weight:bold">queryStatus</span><span style="color:#000;font-weight:bold">(</span>String username<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">(</span>SeckillStatus<span style="color:#000;font-weight:bold">)</span> redisTemplate<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">boundHashOps</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;UserQueueStatus&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><p>‰øÆÊîπSeckillOrderController,Ê∑ªÂä†Â¶Ç‰∏ãÊü•ËØ¢ÊñπÊ≥ïÔºö
<img src="/posts/project-0/20220528172837/image-20220528173326644.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>‰∏äÂõæ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/****
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Êü•ËØ¢Êä¢Ë¥≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * @return
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@RequestMapping</span><span style="color:#000;font-weight:bold">(</span>value <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;/query&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span> Result <span style="color:#900;font-weight:bold">queryStatus</span><span style="color:#000;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ëé∑ÂèñÁî®Êà∑Âêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    String username <span style="color:#000;font-weight:bold">=</span> tokenDcode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getUserInfo</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;username&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//Ê†πÊçÆÁî®Êà∑ÂêçÊü•ËØ¢Áî®Êà∑Êä¢Ë¥≠Áä∂ÊÄÅ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    SeckillStatus seckillStatus <span style="color:#000;font-weight:bold">=</span> seckillOrderService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">queryStatus</span><span style="color:#000;font-weight:bold">(</span>username<span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span>seckillStatus<span style="color:#000;font-weight:bold">!=</span><span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">){</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>seckillStatus<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getStatus</span><span style="color:#000;font-weight:bold">(),</span><span style="color:#d14">&#34;Êä¢Ë¥≠Áä∂ÊÄÅ&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">//NOTFOUNDERROR =20006,Ê≤°ÊúâÂØπÂ∫îÁöÑÊä¢Ë¥≠Êï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">new</span> Result<span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>StatusCode<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">NOTFOUNDERROR</span><span style="color:#000;font-weight:bold">,</span><span style="color:#d14">&#34;Ê≤°ÊúâÊä¢Ë¥≠‰ø°ÊÅØ&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h5 id="6333-ÊµãËØï">6.3.3.3 ÊµãËØï</h5>
<p>‰ΩøÁî®PostmanÊµãËØïÊü•ËØ¢Áä∂ÊÄÅ</p>
<p>http://localhost:8001/api/seckillOrder/query
<img src="/posts/project-0/20220528172837/image-20220528173333338.png"
    
    
    
    loading="lazy"
    
    
></p>

    </div>

    

    


    <div class="container-prevnext">
    <div><a href="https://lovemjh.vercel.app/posts/project-0/20220528172145/">‚Üê ÊîØ‰ªòÂÆùÊîØ‰ªò</a></div>
    <div><a href="https://lovemjh.vercel.app/posts/project-0/20220528173393/">ÁßíÊùÄÈ´òÁ∫ß  ‚Üí</a></div>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="//beian.miit.gov.cn" target="_blank">
        
        Ë±´ICPÂ§á2022002918Âè∑
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
</div></div>
    </body>
</html>
