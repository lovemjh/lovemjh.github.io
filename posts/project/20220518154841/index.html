<!DOCTYPE html>
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=no">
  <meta name="description" content="MJH Blog & MEET HTML Theme">
  <title>医疗管家</title>
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.4/tocbot.css">
  
  <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css" />
  <script type="text/javascript">
    if (!!window.ActiveXObject || "ActiveXObject" in window) { 
      alert('朋友，上古浏览器不支持呢~');
    }
  </script>

  <style>
    .sidebar {
      z-index: 998;
      position: fixed;
      left: -200px;
      width: 200px;
      height: 100%;
      background: #ffffff;
      transition: all .5s ease;
    }

    .sidebar .top {
      font-size: 22px;
      color: rgb(0, 0, 0);
      text-align: center;
      height: 60px;
      line-height: 60px;
      background-color: rgb(255, 255, 255);
      user-select: none;

    }

    .sidebar ul {
      list-style: none;
    }

    .sidebar ul a {
      display: block;
      height: 100%;
      width: 100%;
      text-align: center;
      line-height: 45px;
      font-size: 18px;
      color: rgb(0, 0, 0);
      box-sizing: border-box;
      border-top: 1px solid rgb(255, 0, 0);
      border-bottom: 1px solid rgb(0, 17, 255);
      transition: .4s;
    }

    .sidebar ul li:hover a {
      padding-left: 30px;
      color: #7c4242;
      border-left: 5px solid #ffffff;
      transition: all 0.5s;
    }

    .sidebar ul a i {
      margin-right: 16px;
    }

    #check {
      display: none;
    }

    label #btn,
    label #cancel {
      position: fixed;
      cursor: pointer;
      background-color: #000000;
      border-radius: 3px;
    }

    label #btn {
      left: 5px;
      top: 7px;
      font-size: 25px;
      color: #fff;
      padding: 6px 10px;
      transition: all .5s;
      z-index: 999;
    }

    label #cancel {
      z-index: 999;
      left: -145px;
      top: 10px;
      font-size: 25px;
      color: rgb(255, 255, 255);
      padding: 4px 9px;
      transition: all .5s ease;
    }

    #check:checked~.sidebar {
      left: 0;
    }

    #check:checked~label #btn {
      left: 10px;
      opacity: 0;
      pointer-events: none;
    }

    #check:checked~label #cancel {
      left: 150px;
    }







     
    ::-webkit-scrollbar {
      width: 8px;
      height: 6px
    }

     
    ::-webkit-scrollbar-track {
      background-color: transparent;
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }

     
    ::-webkit-scrollbar-thumb {
      background-color: #30B07F;
      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 100%, transparent 100%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }






     
    .navigation {
      width: 100%;
      height: 50px;
       
      position: fixed;
      left: 0;
      top: 0;
      text-align: center;
      transition: top 0.5s;
      z-index: 999;

      background: rgba(255, 255, 255, .4) !important;
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      backdrop-filter: saturate(180%) blur(20px) !important;
    }

     
    .hide {
      top: -60px;
    }



     
    .btn {
      width: 120px;
      height: 40px;
      background: linear-gradient(315deg, #a4d8fa 0%, #5eb1e9 74%);
      border: none;
      border-radius: 10px;
      font-family: 'Lato', sans-serif;
      font-weight: 500;
      font-size: smaller;
      color: #fff;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, .5),
        7px 7px 20px 0px rgba(0, 0, 0, .1),
        4px 4px 5px 0px rgba(0, 0, 0, .1);
      outline: none;
      position: relative;
      z-index: 0;
    }

    .btn::before {
      position: absolute;
      content: '';
      left: 0;
      bottom: 0;
      width: 100%;
      height: 0;
      transition: all 0.3s ease;
      border-radius: 10px;
      background: linear-gradient(315deg, #4dccc6 0%, #96e4df 74%);
      z-index: -1;
    }

    .btn:hover::before {
      top: 0;
      height: 100%;
    }

    .btn:active {
      top: 2px;
    }




     
    a.toc-link {
      color: currentColor;
      height: auto;
    }

     
    * {
      font-family: LXGW WenKai
    }

    * {
      font-weight: bold
    }

    body {
      font-family: LXGW WenKai;
    }




     
    .pagination {
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      height: 50px;
      margin: 0px;
    }

    .pagination a {
      text-decoration: none;
      font-size: 22px;
      color: rgb(0, 0, 0);
    }

    .page-item {
      display: inline;
      margin-right: 20px;
    }
  </style>

</head>
    <body style="    
    background-image: url(https://api.ixiaowai.cn/api/api.php);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: 100% 100%;
    -moz-background-size: 100% 100%;">
    <input type="checkbox" id="check">
<label for="check">
  <i class="fa fa-bars" id="btn"></i>
  <i class="fa fa-times" id="cancel"></i>
</label>
<div class="sidebar">
  <div class="top">Hi~</div>
  <ul>
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</div>
<div id="body-wrap">
  <nav class="navigation">
  <ul class="ull">
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</nav>
  <div style="width: 100%; height: 65vh;">
    <div id="page_site-info">
      <div id="site-title">
        <input type="checkbox" id="check">
        <br>
        <span class="blogtitle"></span>
        
        
        <div class="post-header">
          <span>
            
            <i class="fa fa-calendar"></i>
            2022-05-18&nbsp;
          </span>
          <span>
            
            <i class="fa fa-calendar-check-o"></i>
            2022-05-18&nbsp;&nbsp;&nbsp;
          </span>
          <span>
            
            <i class="fa fa-edit"></i>
            12548 字
          </span>&nbsp;
          <span>
            
            <i class="fa fa-paper-plane"></i>
            26 分钟
          </span>
        </div><div class="container-ctgtag">
	<div class="taxonomy" style="display: flex; justify-content: center;">
		
		<div class="ctg" style="display: flex; justify-content: center; margin-right: 20px;">
			
			<div style="margin-right: 10px;">
				
				<a href="/categories/"></a>
			</div>
			
		</div>
		<div class="tag" style="display: flex; justify-content: center;">
			
			<div style="margin-right: 10px;">
				
				<a href="/tags/"></a></i>
			</div>
			
		</div>
	</div>
</div>

        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
        <script>
          var typed = new Typed(".blogtitle", {
            strings: ['医疗管家'],
            startDelay: 300,
            typeSpeed: 100,
            loop: true,
            backSpeed: 50,
            showCursor: true
          });
        </script>
      </div>
    </div>
  </div>
  
<main id="content-outer">
    <div class="layout_page" id="content-inner">
        <article id="page" style="margin-right: 10px;">
            
            <div class="js-toc-content" style="height: 100%;">
                <h1 id="一项目概述和环境搭建">一、项目概述和环境搭建</h1>
<h2 id="一项目背景">(一)项目背景</h2>
<p> 随着疫情的逐步结束，国民对于个人的身体健康越来越重视，对健康认识不断提高，对健康的需求也在不断增加，健康检查作为防患于未然的主动预防措施在人们思想中已有很深的认识，医疗管家管理系统 致力于建立一座健康管理机构和会员之间的灵活沟通的桥梁，医疗管家管理平台利用计算机对体检工作流程、结果收集、结论汇总、健康评估、会员管理等多种信息进行数字化管理，给会员提供定制化的健康体检方案，并持续追踪会员的健康状态，为会员的健康提供终身的服务。</p>
<h2 id="二原型展示">(二)原型展示</h2>
<p>展示静态原型</p>
<h2 id="三技术架构">(三)技术架构</h2>
<p><img src="/posts/project/20220518154841/image-20220518155249150.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="四功能架构">(四)功能架构</h2>
<p><img src="/posts/project/20220518154841/image-20220518155300993.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="五软件开发流程">(五)软件开发流程</h2>
<h4 id="需求分析">需求分析</h4>
<p> 1.相关系统分析员向用户初步了解需求，然后用相关的工具软件列出要开发的系统的大功能模块，每个大功能模块有哪些小功能模块，对于有些需求比较明确相关的界面时，在这一步里面可以初步定义好少量的界面。<br>
 2.系统分析员深入了解和分析需求，根据自己的经验和需求用WORD或相关的工具再做出一份文档系统的功能需求文档。这次的文档会清楚列出系统大致的大功能模块，大功能模块有哪些小功能模块，并且还列出相关的界面和界面功能。<br>
 3.系统分析员向用户再次确认需求。</p>
<h4 id="概要设计">概要设计</h4>
<p> 首先，开发者需要对软件系统进行概要设计，即系统设计。概要设计需要对软件系统的设计进行考虑，包括系统的基本处理流程、系统的组织结构、模块划分、功能分配、接口设计、运行设计、数据结构设计和出错处理设计等，为软件的详细设计提供基础</p>
<h4 id="详细设计">详细设计</h4>
<p> 在概要设计的基础上，开发者需要进行软件系统的详细设计。在详细设计中，描述实现具体模块所涉及到的主要算法、数据结构、类的层次结构及调用关系，需要说明软件系统各个层次中的每一个程序(每个模块或子程序)的设计考虑，以便进行编码和测试。应当保证软件的需求完全分配给整个软件。详细设计应当足够详细，能够根据详细设计报告进行编码</p>
<h4 id="编码">编码</h4>
<p> 在软件编码阶段，开发者根据《软件系统详细设计报告》中对数据结构、算法分析和模块实现等方面的设计要求，开始具体的编写程序工作，分别实现各模块的功能，从而实现对目标系统的功能、性能、接口、界面等方面的要求。在规范化的研发流程中，编码工作在整个项目流程里最多不会超过1/2，通常在1/3的时间，所谓磨刀不误砍柴功，设计过程完成的好，编码效率就会极大提高，编码时不同模块之间的进度协调和协作是最需要小心的，也许一个小模块的问题就可能影响了整体进度，让很多程序员因此被迫停下工作等待，这种问题在很多研发过程中都出现过。编码时的相互沟通和应急的解决手段都是相当重要的，对于程序员而言，bug永远存在，你必须永远面对这个问题</p>
<h4 id="测试">测试</h4>
<p> 测试编写好的系统。交给用户使用，用户使用后一个一个的确认每个功能。软件测试有很多种：按照测试执行方，可以分为内部测试和外部测试；按照测试范围，可以分为模块测试和整体联调；按照测试条件，可以分为正常操作情况测试和异常情况测试；按照测试的输入范围，可以分为全覆盖测试和抽样测试。以上都很好理解，不再解释。总之，测试同样是项目研发中一个相当重要的步骤，对于一个大型软件，3个月到1年的外部测试都是正常的，因为永远都会有不可预料的问题存在。完成测试后，完成验收并完成最后的一些帮助文档，整体项目才算告一段落，当然日后少不了升级，修补等等工作，只要不是想通过一锤子买卖骗钱，就要不停的跟踪软件的运营状况并持续修补升级，直到这个软件被彻底淘汰为止</p>
<h4 id="交付">交付</h4>
<p> 在软件测试证明软件达到要求后，软件开发者应向用户提交开发的目标安装程序、数据库的数据字典、《用户安装手册》、《用户使用指南》、需求报告、设计报告、测试报告等双方合同约定的产物。<br>
 《用户安装手册》应详细介绍安装软件对运行环境的要求、安装软件的定义和内容、在客户端、服务器端及中间件的具体安装步骤、安装后的系统配置。<br>
 《用户使用指南》应包括软件各项功能的使用流程、操作步骤、相应业务介绍、特殊提示和注意事项等方面的内容，在需要时还应举例说明。</p>
<h4 id="验收">验收</h4>
<p> 用户验收。</p>
<h4 id="维护">维护</h4>
<p>根据用户需求的变化或环境的变化，对应用程序进行全部或部分的修改</p>
<h1 id="二项目环境搭建">二、项目环境搭建</h1>
<h2 id="一项目结构">(一)项目结构</h2>
<p>本项目采用maven分模块开发方式，即对整个项目拆分为几个maven工程,父工程提供统一的依赖规范，其余的每个maven 工程存放特定类型的代码,具体如下：</p>
<p><img src="/posts/project/20220518154841/image-20220518155313872.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>各模块职责定位：</p>
<p>offcnpe_parent：父工程，打包方式为pom，统一锁定依赖的版本，同时聚合其他子模块 便于统一执行maven命令</p>
<p>offcnpe_pojo 数据模型，打包方式为jar，存放项目中使用到表对应的数据模型</p>
<p>offcnpe_interface：打包方式为jar，存放服务接口。</p>
<p>offcnpe_provider：Dubbo服务模块，打包方式为war，存放服务实现类、Dao接 口、Mapper映射文件等，作为服务提供方，需要部署到tomcat运行。</p>
<p>offcnpe_controller：小U健康管理后台，打包方式为war，作为Dubbo服务消费方，存放 Controller、HTML页面、js、css、spring配置文件等，需要部署到tomcat运行</p>
<p>offcnpe_mobile：移动端前台，打包方式为war，作为Dubbo服务消费方，存放 Controller、HTML页面、js、css、spring配置文件等，需要部署到tomcat运行.</p>
<p>offcnpe_util: 工具模块，打包方式为jar，存放项目中使用到的一些工具类、返回结果和常量类</p>
<h2 id="二工程搭建">(二)工程搭建</h2>
<p>通过前面的项目功能架构图可以知道本项目分为小U健康管理后台和小U健康前台(移动端)</p>
<h4 id="1offcnpe_parent-父工程打包方式为pom用于统一管理依赖版本">1：offcnpe_parent 父工程，打包方式为pom，用于统一管理依赖版本</h4>
<p>pom.xml文件内容</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="c">&lt;!--指定当前工程父工程是 2.4.3 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>2.4.3<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;relativePath/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 当前的工程是父工程 统一控制我们技术版本 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;properties&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--mybatis plus--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;baomidou.version&gt;</span>3.4.2<span class="nt">&lt;/baomidou.version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--dubbo--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dubbo.version&gt;</span>2.7.6<span class="nt">&lt;/dubbo.version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--mysql--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;mysql.version&gt;</span>5.1.47<span class="nt">&lt;/mysql.version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--接口文档--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;swagger.version&gt;</span>2.6.1<span class="nt">&lt;/swagger.version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--poi--&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;poi.version&gt;</span>3.14<span class="nt">&lt;/poi.version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/properties&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencyManagement&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- springboot 整合mybatisplus 工具包 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${baomidou.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- mybatisplus 代码生成器包 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-generator<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>3.4.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- 数据库驱动包 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${mysql.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- 接口文档相关包 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${swagger.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${swagger.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- dubbo 服务相关jar --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>dubbo-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${dubbo.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="c">&lt;!-- poi报表操作包 --&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.apache.poi<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>poi-ooxml<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>${poi.version}<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><h4 id="2-offcnpe_pojo-数据模型打包方式为jar存放项目中使用到表对应的数据模型">2: offcnpe_pojo 数据模型，打包方式为jar，存放项目中使用到表对应的数据模型</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_pojo<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.poi<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>poi-ooxml<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h4 id="3offcnpe_util-工具模块打包方式为jar存放项目中使用到的一些工具类返回结果和常量类">3：offcnpe_util: 工具模块，打包方式为jar，存放项目中使用到的一些工具类、返回结果和常量类</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_util<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_pojo<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-generator<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.velocity<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>velocity-engine-core<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h4 id="4-offcnpe_interface打包方式为jar存放服务接口">4: offcnpe_interface：打包方式为jar，存放服务接口</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_interface<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_pojo<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_util<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h4 id="5-offcnpe_provider-dubbo服务模块">5: offcnpe_provider Dubbo服务模块</h4>
<h5 id="1pomxml文件内容">(1)pom.xml文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_provider<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--
</span></span></span><span class="line"><span class="cl"><span class="c">       springboot  mybatisplus  数据库驱动 连接池  dubbo  zookeeper..
</span></span></span><span class="line"><span class="cl"><span class="c">    --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.baomidou<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mybatis-plus-generator<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- dubbo的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- zk的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-dependencies-zookeeper<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>2.7.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;exclusions&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;exclusion&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/exclusion&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/exclusions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_interface<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>druid<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.1.20<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/build&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h5 id="2applicationyml配置文件内容">(2)application.yml配置文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#端口  访问路径
</span></span><span class="line"><span class="cl">server:
</span></span><span class="line"><span class="cl">  port: 9002
</span></span><span class="line"><span class="cl">  servlet:
</span></span><span class="line"><span class="cl">    context-path: /
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#spring应用名称
</span></span><span class="line"><span class="cl">spring:
</span></span><span class="line"><span class="cl">  application:
</span></span><span class="line"><span class="cl">    name: offcnpe_provider
</span></span><span class="line"><span class="cl">    #数据源配置
</span></span><span class="line"><span class="cl">  datasource:
</span></span><span class="line"><span class="cl">    driver-class-name: com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl">    url: jdbc:mysql:///offcnpe
</span></span><span class="line"><span class="cl">    username: root
</span></span><span class="line"><span class="cl">    password: root
</span></span><span class="line"><span class="cl">    type: com.alibaba.druid.pool.DruidDataSource
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">#mybatis-plus
</span></span><span class="line"><span class="cl">mybatis-plus:
</span></span><span class="line"><span class="cl">  configuration:
</span></span><span class="line"><span class="cl">    #开启驼峰标识
</span></span><span class="line"><span class="cl">    map-underscore-to-camel-case: true
</span></span><span class="line"><span class="cl">    #控制台显示sql语句
</span></span><span class="line"><span class="cl">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
</span></span><span class="line"><span class="cl">  global-config:
</span></span><span class="line"><span class="cl">    #逻辑删除
</span></span><span class="line"><span class="cl">    db-config:
</span></span><span class="line"><span class="cl">      logic-not-delete-value: 1
</span></span><span class="line"><span class="cl">      logic-delete-value: 0
</span></span><span class="line"><span class="cl">      #加载我们的xml文件
</span></span><span class="line"><span class="cl">  mapper-locations: classpath:/mappers/xml/*.xml
</span></span><span class="line"><span class="cl">  type-aliases-package: com.offcn.pojo
</span></span><span class="line"><span class="cl">#dubbo端口和名称
</span></span><span class="line"><span class="cl">dubbo:
</span></span><span class="line"><span class="cl">  protocol:
</span></span><span class="line"><span class="cl">    name: dubbo
</span></span><span class="line"><span class="cl">    port: 20880
</span></span><span class="line"><span class="cl">  registry:
</span></span><span class="line"><span class="cl">    address: zookeeper://192.168.233.100:2181
</span></span><span class="line"><span class="cl">    timeout: 10000
</span></span><span class="line"><span class="cl">  #扫描我们service注解
</span></span><span class="line"><span class="cl">  scan:
</span></span><span class="line"><span class="cl">    base-packages: com.offcn.service.impl
</span></span></code></pre></div><h5 id="3构建springboot的启动类">(3)构建springboot的启动类</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.offcn</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PeServiceProviderApplication</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">PeServiceProviderApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="6offcnpe_controller健康管家管理后台工程">6：offcnpe_controller健康管家管理后台工程</h4>
<h5 id="1pomxml文件内容-1">(1)pom.xml文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_controller<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 添加依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">       <span class="c">&lt;!-- 项目初期没有用到权限管理的时候将这个依赖暂时注释掉 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-security<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- dubbo的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- zk的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-dependencies-zookeeper<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>2.7.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;exclusions&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;exclusion&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/exclusion&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/exclusions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_interface<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>druid<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.1.20<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.2.68<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;fork&gt;</span>true<span class="nt">&lt;/fork&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;addResources&gt;</span>true<span class="nt">&lt;/addResources&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/build&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h5 id="2applicationyml文件内容">(2)application.yml文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server:
</span></span><span class="line"><span class="cl">  servlet:
</span></span><span class="line"><span class="cl">    context-path: /
</span></span><span class="line"><span class="cl">  port: 9003
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">spring:
</span></span><span class="line"><span class="cl">  application:
</span></span><span class="line"><span class="cl">    name: offcnpe_controller
</span></span><span class="line"><span class="cl">  datasource:
</span></span><span class="line"><span class="cl">    driver-class-name: com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl">    url: jdbc:mysql:///offcnpe
</span></span><span class="line"><span class="cl">    username: root
</span></span><span class="line"><span class="cl">    password: root
</span></span><span class="line"><span class="cl">    type: com.alibaba.druid.pool.DruidDataSource
</span></span><span class="line"><span class="cl">  devtools:
</span></span><span class="line"><span class="cl">    restart:
</span></span><span class="line"><span class="cl">      enabled: true
</span></span><span class="line"><span class="cl">      additional-paths: src/main/java
</span></span><span class="line"><span class="cl">  redis:
</span></span><span class="line"><span class="cl">    host: 192.168.233.100
</span></span><span class="line"><span class="cl">    port: 6379
</span></span><span class="line"><span class="cl">    password: 123456
</span></span><span class="line"><span class="cl">dubbo:
</span></span><span class="line"><span class="cl">  protocol:
</span></span><span class="line"><span class="cl">    name: dubbo
</span></span><span class="line"><span class="cl">    port: 20881
</span></span><span class="line"><span class="cl">  registry:
</span></span><span class="line"><span class="cl">    address: zookeeper://192.168.233.100:2181
</span></span><span class="line"><span class="cl">    timeout: 10000
</span></span></code></pre></div><h5 id="3构建springboot启动类">(3)构建springboot启动类</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.offcn</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PeControllerApplication</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">PeControllerApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="7offcnpe_mobile移动端前台工程">7：offcnpe_mobile移动端前台工程</h4>
<h5 id="1pom文件内容">(1)pom文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Xml" data-lang="Xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;parent&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;artifactId&gt;</span>offcnpe_parent<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/parent&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>offcnpe_mobile<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 添加依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- dubbo的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- zk的依赖 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>org.apache.dubbo<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>dubbo-dependencies-zookeeper<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>2.7.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;exclusions&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;exclusion&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;artifactId&gt;</span>slf4j-log4j12<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/exclusion&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/exclusions&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.offcn<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>offcnpe_interface<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>druid<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.1.20<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/build&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/project&gt;</span>
</span></span></code></pre></div><h5 id="2applicationyml文件内容-1">(2)application.yml文件内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">server:
</span></span><span class="line"><span class="cl">  servlet:
</span></span><span class="line"><span class="cl">    context-path: /
</span></span><span class="line"><span class="cl">  port: 9004
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">spring:
</span></span><span class="line"><span class="cl">  application:
</span></span><span class="line"><span class="cl">    name: offcnpe_mobile
</span></span><span class="line"><span class="cl">  datasource:
</span></span><span class="line"><span class="cl">    driver-class-name: com.mysql.jdbc.Driver
</span></span><span class="line"><span class="cl">    url: jdbc:mysql:///demo
</span></span><span class="line"><span class="cl">    username: root
</span></span><span class="line"><span class="cl">    password: root
</span></span><span class="line"><span class="cl">    type: com.alibaba.druid.pool.DruidDataSource
</span></span><span class="line"><span class="cl">dubbo:
</span></span><span class="line"><span class="cl">  protocol:
</span></span><span class="line"><span class="cl">    name: dubbo
</span></span><span class="line"><span class="cl">    port: 20882
</span></span><span class="line"><span class="cl">  registry:
</span></span><span class="line"><span class="cl">    address: zookeeper://192.168.233.100:2181
</span></span><span class="line"><span class="cl">    timeout: 10000
</span></span></code></pre></div><h5 id="3构建springboot启动类-1">(3)构建springboot启动类</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PeMobileApplication</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">PeMobileApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="n">args</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="三启动服务测试环境大家是否成功">(三)启动服务测试环境大家是否成功</h2>
<p>1:启动zookeeper并启动dubbo-admin监控平台
2:启动offcnpe_provider服务器查看是否正常
3:启动offcnpe_controller服务器查看是否正常</p>
<h1 id="三预约管理--检查项管理">三、预约管理&ndash;检查项管理</h1>
<h2 id="一需求分析">(一)需求分析</h2>
<p>本章节完成的功能开发是预约管理功能，包括检查项管理、检查组管理、体检套餐管理、预约设置等。预约管理属于系统的基础功能，主要就是管理一些体检的基础数据。</p>
<h2 id="二基础环境搭建">(二)基础环境搭建</h2>
<h4 id="1-创建数据库offcnpe">1: 创建数据库offcnpe</h4>
<p>create  database offcnpe</p>
<h4 id="2-导入数据表">2: 导入数据表</h4>
<p>sqlyong 中执行sql脚本</p>
<h4 id="3-导入项目所需工具资源">3: 导入项目所需工具资源</h4>
<h5 id="1返回消息常量类messageconstant放到offcnpe_util工程中">(1)返回消息常量类MessageConstant，放到offcnpe_util工程中</h5>
<p>项目开发过程中一般会提供一些公共资源，供多个模块或者系统来使用。 本章节我们导入的公共资源有</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 消息常量
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageConstant</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_CHECKITEM_FAIL</span> <span class="o">=</span> <span class="s">&#34;删除检查项失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_CHECKITEM_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;删除检查项成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_CHECKITEM_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;新增检查项成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_CHECKITEM_FAIL</span> <span class="o">=</span> <span class="s">&#34;新增检查项失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_CHECKITEM_FAIL</span> <span class="o">=</span> <span class="s">&#34;编辑检查项失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_CHECKITEM_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;编辑检查项成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_CHECKITEM_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询检查项成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_CHECKITEM_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询检查项失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">UPLOAD_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;上传成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_CHECKGROUP_FAIL</span> <span class="o">=</span> <span class="s">&#34;新增检查组失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_CHECKGROUP_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;新增检查组成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_CHECKGROUP_FAIL</span> <span class="o">=</span> <span class="s">&#34;删除检查组失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_CHECKGROUP_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;删除检查组成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_CHECKGROUP_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询检查组成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_CHECKGROUP_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询检查组失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_CHECKGROUP_FAIL</span> <span class="o">=</span> <span class="s">&#34;编辑检查组失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_CHECKGROUP_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;编辑检查组成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PIC_UPLOAD_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;图片上传成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">PIC_UPLOAD_FAIL</span> <span class="o">=</span> <span class="s">&#34;图片上传失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_SETMEAL_FAIL</span> <span class="o">=</span> <span class="s">&#34;新增套餐失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_SETMEAL_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;新增套餐成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">IMPORT_ORDERSETTING_FAIL</span> <span class="o">=</span> <span class="s">&#34;批量导入预约设置数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">IMPORT_ORDERSETTING_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;批量导入预约设置数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_ORDERSETTING_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取预约设置数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_ORDERSETTING_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取预约设置数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ORDERSETTING_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;预约设置成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ORDERSETTING_FAIL</span> <span class="o">=</span> <span class="s">&#34;预约设置失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_MEMBER_FAIL</span> <span class="o">=</span> <span class="s">&#34;新增会员失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ADD_MEMBER_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;新增会员成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_MEMBER_FAIL</span> <span class="o">=</span> <span class="s">&#34;删除会员失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">DELETE_MEMBER_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;删除会员成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_MEMBER_FAIL</span> <span class="o">=</span> <span class="s">&#34;编辑会员失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EDIT_MEMBER_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;编辑会员成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TELEPHONE_VALIDATECODE_NOTNULL</span> <span class="o">=</span> <span class="s">&#34;手机号和验证码都不能为空&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">LOGIN_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;登录成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">VALIDATECODE_ERROR</span> <span class="o">=</span> <span class="s">&#34;验证码输入错误&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_ORDER_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询预约信息成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_ORDER_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询预约信息失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_SETMEALLIST_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询套餐列表数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_SETMEALLIST_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询套餐列表数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_SETMEAL_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询套餐数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">QUERY_SETMEAL_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询套餐数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SEND_VALIDATECODE_FAIL</span> <span class="o">=</span> <span class="s">&#34;验证码发送失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SEND_VALIDATECODE_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;验证码发送成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SELECTED_DATE_CANNOT_ORDER</span> <span class="o">=</span> <span class="s">&#34;所选日期不能进行体检预约&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ORDER_FULL</span> <span class="o">=</span> <span class="s">&#34;预约已满&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">HAS_ORDERED</span> <span class="o">=</span> <span class="s">&#34;已经完成预约，不能重复预约&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">ORDER_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;预约成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_USERNAME_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取当前登录用户名称成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_USERNAME_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取当前登录用户名称失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_MENU_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取当前登录用户菜单成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_MENU_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取当前登录用户菜单失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_MEMBER_NUMBER_REPORT_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取会员统计数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_MEMBER_NUMBER_REPORT_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取会员统计数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_SETMEAL_COUNT_REPORT_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取套餐统计数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_SETMEAL_COUNT_REPORT_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取套餐统计数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_BUSINESS_REPORT_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;获取运营统计数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_BUSINESS_REPORT_FAIL</span> <span class="o">=</span> <span class="s">&#34;获取运营统计数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_SETMEAL_LIST_SUCCESS</span> <span class="o">=</span> <span class="s">&#34;查询套餐列表数据成功&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">GET_SETMEAL_LIST_FAIL</span> <span class="o">=</span> <span class="s">&#34;查询套餐列表数据失败&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h5 id="2返回结果result和pageresult类放到offcnpe_util工程中">(2)返回结果Result和PageResult类，放到offcnpe_util工程中</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Result</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">flag</span><span class="o">;</span><span class="c1">//执行结果，true为执行成功 false为执行失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">message</span><span class="o">;</span><span class="c1">//返回结果信息，主要用于页面提示信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">Object</span> <span class="n">data</span><span class="o">;</span><span class="c1">//返回数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="nf">Result</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">flag</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="nf">Result</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">flag</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">Object</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isFlag</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFlag</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">flag</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">flag</span> <span class="o">=</span> <span class="n">flag</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessage</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">message</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getData</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setData</span><span class="o">(</span><span class="n">Object</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 分页结果封装对象
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageResult</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Long</span> <span class="n">total</span><span class="o">;</span><span class="c1">//总记录数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">List</span> <span class="n">rows</span><span class="o">;</span><span class="c1">//当前页结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="nf">PageResult</span><span class="o">(</span><span class="n">Long</span> <span class="n">total</span><span class="o">,</span> <span class="n">List</span> <span class="n">rows</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">super</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">total</span> <span class="o">=</span> <span class="n">total</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">rows</span> <span class="o">=</span> <span class="n">rows</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getTotal</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">total</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTotal</span><span class="o">(</span><span class="n">Long</span> <span class="n">total</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">total</span> <span class="o">=</span> <span class="n">total</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">List</span> <span class="nf">getRows</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">rows</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setRows</span><span class="o">(</span><span class="n">List</span> <span class="n">rows</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">rows</span> <span class="o">=</span> <span class="n">rows</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h5 id="3封装查询条件的querypagebean类放到offcnpe_util工程中">(3)封装查询条件的QueryPageBean类，放到offcnpe_util工程中</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 封装查询条件
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">QueryPageBean</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">currentPage</span><span class="o">;</span><span class="c1">//页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">Integer</span> <span class="n">pageSize</span><span class="o">;</span><span class="c1">//每页记录数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">private</span> <span class="n">String</span> <span class="n">queryString</span><span class="o">;</span><span class="c1">//查询条件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getCurrentPage</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">currentPage</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCurrentPage</span><span class="o">(</span><span class="n">Integer</span> <span class="n">currentPage</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">currentPage</span> <span class="o">=</span> <span class="n">currentPage</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getPageSize</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pageSize</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPageSize</span><span class="o">(</span><span class="n">Integer</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">pageSize</span> <span class="o">=</span> <span class="n">pageSize</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getQueryString</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">queryString</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setQueryString</span><span class="o">(</span><span class="n">String</span> <span class="n">queryString</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">queryString</span> <span class="o">=</span> <span class="n">queryString</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h5 id="4htmljscss图片等静态资源放到offcnpe_controller工程中">(4)html、js、css、图片等静态资源，放到offcnpe_controller工程中</h5>
<p>注意：后续随着项目开发还会陆续导入其他一些公共资源。</p>
<h5 id="5使用mybatis-plus逆向工程生成基本文件">(5)使用Mybatis-plus逆向工程生成基本文件</h5>
<p>在offcn_pe工程中执行逆向工程的代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBatisPlusGenerator</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 代码生成器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">AutoGenerator</span> <span class="n">mpg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AutoGenerator</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 全局配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">GlobalConfig</span> <span class="n">gc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GlobalConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//String projectPath = System.getProperty(&#34;user.dir&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setOutputDir</span><span class="o">(</span><span class="s">&#34;生成代码的路径&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">gc</span><span class="o">.</span><span class="na">setAuthor</span><span class="o">(</span><span class="s">&#34;zs&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">gc</span><span class="o">.</span><span class="na">setOpen</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//实体属性 Swagger2 注解
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">gc</span><span class="o">.</span><span class="na">setSwagger2</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setGlobalConfig</span><span class="o">(</span><span class="n">gc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 数据源配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">DataSourceConfig</span> <span class="n">dsc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//dsc.setUrl(&#34;jdbc:mysql://127.0.0.1:3306/demo?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">dsc</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="s">&#34;jdbc:mysql:///offcnpe&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setDriverName</span><span class="o">(</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">dsc</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;root&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dsc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 包配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PackageConfig</span> <span class="n">pc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PackageConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">pc</span><span class="o">.</span><span class="na">setParent</span><span class="o">(</span><span class="s">&#34;com.offcn&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pc</span><span class="o">.</span><span class="na">setEntity</span><span class="o">(</span><span class="s">&#34;pojo&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pc</span><span class="o">.</span><span class="na">setMapper</span><span class="o">(</span><span class="s">&#34;mapper&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pc</span><span class="o">.</span><span class="na">setServiceImpl</span><span class="o">(</span><span class="s">&#34;service.xml&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setPackageInfo</span><span class="o">(</span><span class="n">pc</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 配置模板
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">TemplateConfig</span> <span class="n">templateConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TemplateConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//默认关闭不需要的生成内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//templateConfig.setXml(null);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">templateConfig</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">templateConfig</span><span class="o">.</span><span class="na">setServiceImpl</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setTemplate</span><span class="o">(</span><span class="n">templateConfig</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 策略配置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">StrategyConfig</span> <span class="n">strategy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StrategyConfig</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setNaming</span><span class="o">(</span><span class="n">NamingStrategy</span><span class="o">.</span><span class="na">underline_to_camel</span><span class="o">);</span><span class="c1">//数据库表映射到实体的命名策略
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setColumnNaming</span><span class="o">(</span><span class="n">NamingStrategy</span><span class="o">.</span><span class="na">underline_to_camel</span><span class="o">);</span><span class="c1">//数据库表字段映射到实体的命名策略
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">strategy</span><span class="o">.</span><span class="na">setSuperEntityClass</span><span class="o">(</span><span class="s">&#34;com.baomidou.mybatisplus.extension.activerecord.Model&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setEntityLombokModel</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setRestControllerStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setEntityLombokModel</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">tableNames</span><span class="o">=</span><span class="s">&#34;t_checkgroup,t_checkgroup_checkitem,t_checkitem,t_member,t_menu,&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;t_order,t_ordersetting,&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;t_permission,t_role,t_role_menu,&#34;</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">                <span class="s">&#34;t_role_permission,t_setmeal,t_setmeal_checkgroup,t_user,t_user_role&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setInclude</span><span class="o">(</span><span class="n">tableNames</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setControllerMappingHyphenStyle</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">strategy</span><span class="o">.</span><span class="na">setTablePrefix</span><span class="o">(</span><span class="s">&#34;t_&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">setStrategy</span><span class="o">(</span><span class="n">strategy</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mpg</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="三新增检查项功能实现">(三)新增检查项功能实现</h2>
<h3 id="1编写页面">1：编写页面</h3>
<h4 id="1弹出新增窗口">(1)弹出新增窗口</h4>
<p>页面中已经提供了新增窗口，只是处于隐藏状态。只需要将控制展示状态的属性 dialogFormVisible改为true就可以显示出新增窗口。 新建按钮绑定的方法为handleCreate，所以在handleCreate方法中修改 dialogFormVisible属性的值为true即可。同时为了增加用户体验度，需要每次点击新建 按钮时清空表单输入项</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 重置表单 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">resetForm</span><span class="p">()</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">formData</span> <span class="o">=</span> <span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 弹出添加窗口 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">handleCreate</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">resetForm</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="2提交表单数据">(2)提交表单数据</h4>
<p>点击新增窗口中的确定按钮时，触发handleAdd方法，所以需要在handleAdd方法中进行完善,因为表单中添加了校验，只有校验通过然后发送ajax请求发送数据，如果校验失败表单不能提交成功的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">                *   获取表单对象,调用校验方法，使用钩子函数完成数据操作
</span></span></span><span class="line"><span class="cl"><span class="cm">                * */</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="s1">&#39;dataAddForm&#39;</span><span class="p">].</span><span class="nx">validate</span><span class="p">((</span><span class="nx">valid</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//测试数据是否正常封装
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="c1">//console.log(this.formData)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                         <span class="c1">//校验成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/checkitem/add&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">formData</span><span class="p">,).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                             <span class="c1">//res就是我们返回的offcnpe_util中的Result对象封装的结果,json数据格式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="c1">//关闭新增窗口(不管什么情况都需要关闭窗口)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                             <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                                 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;成功&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                                 <span class="c1">//调用分页方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                 <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                                 <span class="c1">//弹出提示信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                 <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                     <span class="nx">message</span> <span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                     <span class="nx">type</span> <span class="o">:</span> <span class="s1">&#39;success&#39;</span>
</span></span><span class="line"><span class="cl">                                 <span class="p">});</span>
</span></span><span class="line"><span class="cl">                             <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                                 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;失败&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                                 <span class="c1">//弹出失败信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                                 <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                             <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">});</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                         <span class="c1">//校验失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;数据校验失败,请检查执行&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span></code></pre></div><h4 id="2后台代码">2：后台代码</h4>
<h5 id="1控制器方法-在offcnpe_controller中的checkitemcontroller添加方法">(1)控制器方法 在offcnpe_controller中的CheckitemController添加方法</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/add&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkItemService</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span> <span class="n">MessageConstant</span><span class="o">.</span><span class="na">ADD_CHECKITEM_SUCCESS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">ADD_CHECKITEM_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h5 id="2服务接口-在offcnpe_interface-创建接口">(2)服务接口 在offcnpe_interface 创建接口</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CheckItemService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h5 id="3-服务实现类">(3) 服务实现类</h5>
<p>在offcnpe_service_provider中实现接口CheckItemService</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="nd">@Service</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CheckItemsServiceImpl</span> <span class="kd">implements</span> <span class="n">CheckItemService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">CheckitemMapper</span> <span class="n">checkitemMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="o">(</span><span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">         <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="四检查项分页功能">(四)检查项分页功能</h2>
<h3 id="1功能分析">1：功能分析</h3>
<p>本项目所有分页功能都是基于ajax的异步请求来完成的，请求参数和后台响应数据格式都 使用json数据格式。 请求参数包括页码、每页显示记录数、查询条件。
请求参数的json格式为：{currentPage:1,pageSize:10,queryString:&lsquo;&lsquo;offcn&rsquo;&rsquo;}
后台响应数据包括总记录数、当前页需要展示的数据集合。
响应数据的json格式为：{total:1000,rows:[]}
如下图所示：</p>
<h3 id="2编写页面">2：编写页面</h3>
<h4 id="1定义分页相关模型数据">(1)定义分页相关模型数据</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="nx">pagination</span><span class="o">:</span> <span class="p">{</span><span class="c1">//分页相关模型数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">currentPage</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span><span class="c1">//当前页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">pageSize</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span><span class="c1">//每页显示的记录数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">total</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="c1">//总记录数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">queryString</span><span class="o">:</span><span class="kc">null</span><span class="c1">//查询条件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="nx">dataList</span><span class="o">:</span> <span class="p">[],</span><span class="c1">//当前页要展示的分页列表数据
</span></span></span></code></pre></div><h4 id="2利用vue的钩子函数执行分页方法">(2)利用vue的钩子函数执行分页方法</h4>
<p>在页面中提供了findPage方法用于分页查询，为了能够在checkitem.html页面加载后直 接可以展示分页数据，可以在VUE提供的钩子函数created中调用findPage方法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="c1">//钩子函数，VUE对象初始化完成后自动执行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h4 id="3编辑分页方法">(3)编辑分页方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="c1">//分页查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">findPage</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//封装查询参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="kd">var</span> <span class="nx">param</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//当前页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">currentPage</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//每页显示数据条数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">pageSize</span><span class="o">:</span>  <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//查询的条件字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">queryString</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">queryString</span>
</span></span><span class="line"><span class="cl">   <span class="p">};</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//ajax请求完成数据的请求和响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/checkitem/pageQuery&#39;</span><span class="p">,</span><span class="nx">param</span><span class="p">,).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">total</span><span class="o">=</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span> <span class="c1">//查询的总条数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">dataList</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span> <span class="c1">//当前页面展示的数据内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h4 id="4-点击查询按钮和点击分页的页码依然需要进行分页查询操作">(4) 点击查询按钮和点击分页的页码依然需要进行分页查询操作</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="nx">a</span><span class="o">:</span>
</span></span><span class="line"><span class="cl"><span class="nx">查询按钮绑定findPage方法</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;findPage()&#34;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;dalfBut&#34;</span><span class="o">&gt;</span><span class="nx">查询</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">b</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="nx">点击页码执行findPage方法</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">pagination</span>
</span></span><span class="line"><span class="cl">       <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;pagiantion&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="err">@</span><span class="nx">current</span><span class="o">-</span><span class="nx">change</span><span class="o">=</span><span class="s2">&#34;handleCurrentChange&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="o">:</span><span class="nx">current</span><span class="o">-</span><span class="nx">page</span><span class="o">=</span><span class="s2">&#34;pagination.currentPage&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="o">:</span><span class="nx">page</span><span class="o">-</span><span class="nx">size</span><span class="o">=</span><span class="s2">&#34;pagination.pageSize&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">layout</span><span class="o">=</span><span class="s2">&#34;total, prev, pager, next, jumper&#34;</span>
</span></span><span class="line"><span class="cl">       <span class="o">:</span><span class="nx">total</span><span class="o">=</span><span class="s2">&#34;pagination.total&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/el-pagination&gt;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">current</span><span class="o">-</span><span class="nx">change</span><span class="o">=</span><span class="s2">&#34;handleCurrentChange&#34;</span> <span class="nx">UI框架给我们提供的点击页码自动回调的函数</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">编写方法handleCurrentChange</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"> <span class="c1">//切换页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">handleCurrentChange</span><span class="p">(</span><span class="nx">currentPage</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//将点击的页码给我们的当前页从新赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">currentPage</span> <span class="o">=</span> <span class="nx">currentPage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//调用分页查询方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span></code></pre></div><h3 id="3后台代码实现">3：后台代码实现</h3>
<h4 id="1checkitemcontroller增加方法findpage">(1)CheckitemController增加方法findPage</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/findPage&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">PageResult</span> <span class="n">pageResult</span> <span class="o">=</span> <span class="n">checkItemService</span><span class="o">.</span><span class="na">findPage</span><span class="o">(</span><span class="n">queryPageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pageResult</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="2在checkitemservice服务接口中扩展分页查询方法">(2)在CheckItemService服务接口中扩展分页查询方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">);</span>
</span></span></code></pre></div><h4 id="3在checkitemserviceimpl服务实现类中实现分页查询方法基于mybatis-plus分页助手插件实现分页">(3)在CheckItemServiceImpl服务实现类中实现分页查询方法，基于Mybatis-Plus分页助手插件实现分页</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">//分页查询检查项所有的数据内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//构建分页page对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Page</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="n">page1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">&lt;&gt;(</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getCurrentPage</span><span class="o">(),</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//构建查询条件对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="n">wrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">()!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">().</span><span class="na">length</span><span class="o">()&gt;</span><span class="mi">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">or</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">wrapper</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;code&#34;</span><span class="o">,</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//分页查询数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Page</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="n">checkitemPage</span> <span class="o">=</span> <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">selectPage</span><span class="o">(</span><span class="n">page1</span><span class="o">,</span> <span class="n">wrapper</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">PageResult</span><span class="o">(</span><span class="n">checkitemPage</span><span class="o">.</span><span class="na">getTotal</span><span class="o">(),</span><span class="n">checkitemPage</span><span class="o">.</span><span class="na">getRecords</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="4offcnpe_util项目中添加分页工具类">(4)offcnpe_util项目中添加分页工具类</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBatisPlusConfig</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     *分页插件
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Bean</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">MybatisPlusInterceptor</span> <span class="nf">mybatisPlusInterceptor</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">MybatisPlusInterceptor</span> <span class="n">mybatisPlusInterceptor</span><span class="o">=</span><span class="k">new</span> <span class="n">MybatisPlusInterceptor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">PaginationInnerInterceptor</span> <span class="n">innerInterceptor</span><span class="o">=</span><span class="k">new</span> <span class="n">PaginationInnerInterceptor</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">innerInterceptor</span><span class="o">.</span><span class="na">setDbType</span><span class="o">(</span><span class="n">DbType</span><span class="o">.</span><span class="na">MYSQL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">innerInterceptor</span><span class="o">.</span><span class="na">setOverflow</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">mybatisPlusInterceptor</span><span class="o">.</span><span class="na">addInnerInterceptor</span><span class="o">(</span><span class="n">innerInterceptor</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">mybatisPlusInterceptor</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h2 id="一删除检查项功能">一、删除检查项功能</h2>
<h3 id="一编写页面">（一）编写页面</h3>
<p> 为了防止用户误操作，点击删除按钮时需要弹出确认删除的提示，用户点击取消则不做 任何操作，用户点击确定按钮再提交删除请求</p>
<h4 id="1绑定单击事件">1：绑定单击事件</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span><span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&#34;mini&#34;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;danger&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;handleDelete(scope.row)&#34;</span><span class="o">&gt;</span><span class="nx">删除</span><span class="o">&lt;</span><span class="err">/el-button&gt;  </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="nx">scope</span><span class="p">.</span><span class="nx">row</span><span class="err">：</span><span class="nx">就是当前行的json对象</span>
</span></span></code></pre></div><h4 id="2构建删除方法">2：构建删除方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">// 删除  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">handleDelete</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="s2">&#34;确认删除当前数据么&#34;</span><span class="p">,</span><span class="s2">&#34;提示&#34;</span><span class="p">,{</span><span class="nx">type</span><span class="o">:</span><span class="s1">&#39;waring&#39;</span><span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//用户点击确认按钮  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;/checkitem/deleteInfoById?id=&#34;</span><span class="o">+</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//删除成功  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">message</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//删除失败  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}).</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//用户点击取消按钮  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;用户取消了删除操作&#39;</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;info&#39;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span> <span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>
</span></span></code></pre></div><h3 id="二后台代码实现">（二）后台代码实现</h3>
<h4 id="1控制器方法">1：控制器方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="c1">//删除检查项  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/deleteInfoById&#34;</span><span class="o">)</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nd">@ResponseBody</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="n">Result</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">try</span><span class="o">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">checkItemService</span><span class="o">.</span><span class="na">deleteInfoById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKITEM_FAIL</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKITEM_SUCCESS</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>  
</span></span></code></pre></div><h4 id="2服务接口中的方法">2：服务接口中的方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="kt">void</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></div><h4 id="3在checkitemserviceimpl服务实现类实现删除功能">3：在CheckItemServiceImpl服务实现类实现删除功能</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="nd">@Override</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">deleteById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>
</span></span></code></pre></div><h2 id="二编辑检查项功能">二、编辑检查项功能</h2>
<h3 id="一编写页面-1">(一)编写页面</h3>
<p> 用户点击编辑按钮时，需要弹出编辑窗口并且将当前记录的数据进行回显，用户修改完 成后点击确定按钮将修改后的数据提交到后台进行数据库操作</p>
<h4 id="1给编辑按钮绑定事件">1:给编辑按钮绑定事件</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;primary&#34;</span> <span class="nx">size</span><span class="o">=</span><span class="s2">&#34;mini&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;handleUpdate(scope.row)&#34;</span><span class="o">&gt;</span><span class="nx">编辑</span><span class="o">&lt;</span><span class="err">/el-button&gt;  </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="nx">对应事件方法</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="nx">handleUpdate</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="p">}</span>
</span></span></code></pre></div><h4 id="2弹出编辑窗口回显数据">2：弹出编辑窗口回显数据</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">// 弹出编辑窗口  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">handleUpdate</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">resetForm</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//显示编辑窗口  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible4Edit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//根据当前行的id回显数据  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkitem/findInfoById?id=&#34;</span><span class="o">+</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//true 代表查询到了数据  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//&lt;el-input v-model=&#34;formData.code&#34;/&gt;  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="c1">//进行数据回显,基于vue的数据绑定实现的 绑定的对象就是formData,这个对象有值,就会自动回显到文本框中  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">formData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">},</span>
</span></span></code></pre></div><h4 id="3点击确定按钮进行数据更新">3：点击确定按钮进行数据更新</h4>
<p> 在编辑窗口中修改完成后，点击确定按钮需要提交请求，所以需要为确定按钮绑定事件 并提供处理函数handleEdit<br>
 </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">el</span><span class="err">‐</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;primary&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;handleEdit()&#34;</span><span class="o">&gt;</span><span class="nx">确定</span><span class="o">&lt;</span><span class="err">/el‐button&gt;</span>
</span></span></code></pre></div><h4 id="4编辑方法绑定函数">4：编辑方法绑定函数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//编辑  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">handleEdit</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="s1">&#39;dataEditForm&#39;</span><span class="p">].</span><span class="nx">validate</span><span class="p">((</span><span class="nx">valid</span><span class="p">)</span> <span class="p">=&gt;{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/checkitem/updateInfoById&#39;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">formData</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">message</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;success&#39;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}).</span><span class="k">finally</span><span class="p">(()</span> <span class="p">=&gt;{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//无论校验成功还是失败都需要调用分页方法  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//隐藏我们弹出的数据框  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible4Edit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="s2">&#34;表单校验失败&#34;</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">},</span>
</span></span></code></pre></div><h3 id="二后台功能实现">（二）后台功能实现</h3>
<h4 id="1控制器方法-1">1：控制器方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//回显检查项数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/findInfoById&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">findInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">Checkitem</span> <span class="n">infoById</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">infoById</span> <span class="o">=</span> <span class="n">checkItemService</span><span class="o">.</span><span class="na">findInfoById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKITEM_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKITEM_SUCCESS</span><span class="o">,</span><span class="n">infoById</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//更新检查项数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/updateInfoById&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">updateInfoById</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkItemService</span><span class="o">.</span><span class="na">updateInfoById</span><span class="o">(</span><span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">EDIT_CHECKITEM_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">EDIT_CHECKITEM_SUCCESS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="2接口方法">2：接口方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Checkitem</span> <span class="nf">findInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">updateInfoById</span><span class="o">(</span><span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">);</span>
</span></span></code></pre></div><h4 id="3在checkitemserviceimpl服务实现类实现删除功能-1">3：在CheckItemServiceImpl服务实现类实现删除功能</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">   <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Checkitem</span> <span class="nf">findInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateInfoById</span><span class="o">(</span><span class="n">Checkitem</span> <span class="n">checkitem</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">checkitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="三新增检查组">三、新增检查组</h2>
<h3 id="一-需求分析">(一) 需求分析</h3>
<p>检查组其实就是多个检查项的集合，例如有一个检查组为“一般检查”，这个检查组可以包 括多个检查项：身高、体重、收缩压、舒张压等。所以在添加检查组时需要选择这个检 查组包括的检查项。 检查组对应的实体类为CheckGroup，对应的数据表为t_checkgroup。检查组和检查项 为多对多关系，所以需要中间表t_checkgroup_checkitem进行关联。</p>
<h3 id="二回显所有检查项">(二)回显所有检查项</h3>
<h4 id="1前端内容">1：前端内容</h4>
<h5 id="1-绑定事件">(1) 绑定事件</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"> <span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;primary&#34;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;butT&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;handleCreate()&#34;</span><span class="o">&gt;</span><span class="nx">新建</span><span class="o">&lt;</span><span class="err">/el-button&gt;</span>
</span></span></code></pre></div><p>点击新建按钮弹出dialog并加载出检查项 的相关数据</p>
<h5 id="2事件函数">(2)事件函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 重置表单 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">resetForm</span><span class="p">()</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">formData</span> <span class="o">=</span> <span class="p">{};</span> 
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="c1">//我们点击新建按钮,在弹出的窗口中需要加载所有的检查项的数据.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">handleCreate</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//显示隐藏窗口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//默认选中第一个选项卡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">this</span><span class="p">.</span><span class="nx">activeName</span> <span class="o">=</span> <span class="s1">&#39;first&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//重置表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">this</span><span class="p">.</span><span class="nx">resetForm</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//清除默认勾选的检查项
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="k">this</span><span class="p">.</span><span class="nx">checkitemIds</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//异步请求获取所有检查项信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkitem/showAllItem&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">           <span class="k">this</span><span class="p">.</span><span class="nx">tableData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">messge</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><h4 id="2后台内容">2:后台内容</h4>
<h5 id="1在控制器中添加方法">(1)在控制器中添加方法</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//展示所有检查项信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/showAllItem&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">showAllItem</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">List</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="n">infoById</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">infoById</span> <span class="o">=</span> <span class="n">checkItemService</span><span class="o">.</span><span class="na">showAllItem</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKITEM_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKITEM_SUCCESS</span><span class="o">,</span><span class="n">infoById</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h5 id="2在接口中添加方法">(2)在接口中添加方法</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="nf">showAllItem</span><span class="o">();</span>
</span></span></code></pre></div><h5 id="3实现接口方法">(3)实现接口方法</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"> <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Checkitem</span><span class="o">&gt;</span> <span class="nf">showAllItem</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="n">checkitemMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span></code></pre></div><h3 id="三-提交按钮完成检查组数据添加">(三) 提交按钮完成检查组数据添加</h3>
<p>当用户点击新增窗口中的确定按钮时发送ajax请求将数据提交到后台进行数据库操作。提 交到后台的数据分为两部分：检查组基本信息（对应的模型数据为formData）和检查项 id数组（对应的模型数据为checkitemIds）</p>
<h4 id="1前端内容-1">1:前端内容</h4>
<h5 id="1绑定事件">(1)绑定事件</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">el</span><span class="err">‐</span><span class="nx">button</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;primary&#34;</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;handleAdd()&#34;</span><span class="o">&gt;</span><span class="nx">确定</span><span class="o">&lt;</span><span class="err">/el‐button&gt;</span>
</span></span></code></pre></div><p>点击确定按钮 出发handleAdd函数实现检查组添加</p>
<h5 id="2事件函数-1">(2)事件函数</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="nx">handleAdd</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;/checkgroup/addGroup?checkitemIds=&#34;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">checkitemIds</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">formData</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                   <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                   <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                       <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                           <span class="nx">message</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                           <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span>
</span></span><span class="line"><span class="cl">                       <span class="p">});</span>
</span></span><span class="line"><span class="cl">                   <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                   <span class="p">}</span>
</span></span><span class="line"><span class="cl">               <span class="p">}).</span><span class="k">finally</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                   <span class="c1">//从新进行分页查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                   <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">               <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span></code></pre></div><h4 id="2后台内容-1">2:后台内容</h4>
<h5 id="1添加控制方法-在checkgroupcontroller中">(1)添加控制方法 在CheckGroupController中</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/addGroup&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">addGroup</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span><span class="n">Integer</span> <span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkGroupService</span><span class="o">.</span><span class="na">addGroup</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">,</span><span class="n">checkitemIds</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>  <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">MessageConstant</span><span class="o">.</span><span class="na">ADD_CHECKGROUP_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">ADD_CHECKGROUP_SUCCESS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h5 id="2服务层接口内容">(2)服务层接口内容</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">addGroup</span><span class="o">(</span><span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span> <span class="n">Integer</span><span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">);</span>
</span></span></code></pre></div><h5 id="3服务接口的实现类">(3)服务接口的实现类</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.offcn.service.impl</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.offcn.mapper.CheckgroupCheckitemMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.offcn.mapper.CheckgroupMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.offcn.pojo.Checkgroup</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.offcn.pojo.CheckgroupCheckitem</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.offcn.service.CheckGroupService</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.dubbo.config.annotation.Service</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.annotation.Resource</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.lang.reflect.Array</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Service</span><span class="o">(</span><span class="n">interfaceClass</span> <span class="o">=</span> <span class="n">CheckGroupService</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Transactional</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CheckGroupServiceImpl</span> <span class="kd">implements</span> <span class="n">CheckGroupService</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">CheckgroupMapper</span> <span class="n">checkgroupMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Resource</span>
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="n">CheckgroupCheckitemMapper</span> <span class="n">checkgroupCheckitemMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addGroup</span><span class="o">(</span><span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span> <span class="n">Integer</span><span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//添加检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="k">for</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">:</span><span class="n">checkitemIds</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">             <span class="n">CheckgroupCheckitem</span> <span class="n">checkgroupCheckitem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CheckgroupCheckitem</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">             <span class="n">checkgroupCheckitem</span><span class="o">.</span><span class="na">setCheckgroupId</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">             <span class="n">checkgroupCheckitem</span><span class="o">.</span><span class="na">setCheckitemId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">             <span class="c1">//添加检查组和检查项的中间表数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>             <span class="n">checkgroupCheckitemMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">checkgroupCheckitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h1 id="医疗管家-检查组信息维护">医疗管家-检查组信息维护</h1>
<h2 id="一检查组分页显示">一、检查组分页显示</h2>
<h3 id="一前端页面内容">(一)前端页面内容</h3>
<h4 id="1编写分页函数">1：编写分页函数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//分页查询  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">findPage</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//发送ajax的请求完成页面数据加载  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="kd">var</span> <span class="nx">param</span> <span class="o">=</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">currentPage</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">pageSize</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">queryString</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">queryString</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">};</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//发送ajax请求  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;/checkgroup/findPage&#34;</span><span class="p">,</span><span class="nx">param</span><span class="p">,).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//给我们的vue的变量赋值  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">dataList</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">rows</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">},</span>
</span></span></code></pre></div><h4 id="2分页方法执行时机">2：分页方法执行时机</h4>
<p> 加载页面的时候使用vue的钩子函数完成分页功能</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err"> </span> <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">},</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> 
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="nx">点击页码完成分页数据展示</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//切换页码  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">handleCurrentChange</span><span class="p">(</span><span class="nx">currentPage</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">pagination</span><span class="p">.</span><span class="nx">currentPage</span> <span class="o">=</span> <span class="nx">currentPage</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">},</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="nx">查询按钮完成分页显示功能</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">button</span> <span class="err">@</span><span class="nx">click</span><span class="o">=</span><span class="s2">&#34;findPage()&#34;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;dalfBut&#34;</span><span class="o">&gt;</span><span class="nx">查询</span><span class="o">&lt;</span><span class="err">/el-button&gt;  </span>
</span></span><span class="line"><span class="cl"><span class="err"> </span>
</span></span></code></pre></div><h3 id="二后台内容">(二)后台内容</h3>
<h4 id="1控制器方法-2">1：控制器方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//分页显示检查组  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/findPage&#34;</span><span class="o">)</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">PageResult</span> <span class="n">pageResult</span> <span class="o">=</span> <span class="n">checkGroupService</span><span class="o">.</span><span class="na">findPage</span><span class="o">(</span><span class="n">queryPageBean</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="err"> </span><span class="n">pageResult</span><span class="o">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>
</span></span></code></pre></div><h4 id="2-服务接口">2： 服务接口</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">);</span>
</span></span></code></pre></div><h4 id="3接口实现类">3：接口实现类</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="nd">@Override</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="n">PageResult</span> <span class="nf">findPage</span><span class="o">(</span><span class="n">QueryPageBean</span> <span class="n">queryPageBean</span><span class="o">)</span> <span class="o">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="n">page1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Page</span><span class="o">(</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getCurrentPage</span><span class="o">(),</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">());</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">QueryWrapper</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="n">queryWrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">QueryWrapper</span><span class="o">&lt;&gt;();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">if</span><span class="o">(</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">()!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">().</span><span class="na">length</span><span class="o">()&gt;</span><span class="mi">0</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">queryWrapper</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;code&#34;</span><span class="o">,</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">());</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">queryWrapper</span><span class="o">.</span><span class="na">or</span><span class="o">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">queryWrapper</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;name&#34;</span><span class="o">,</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">());</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">queryWrapper</span><span class="o">.</span><span class="na">or</span><span class="o">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">queryWrapper</span><span class="o">.</span><span class="na">like</span><span class="o">(</span><span class="s">&#34;helpCode&#34;</span><span class="o">,</span><span class="n">queryPageBean</span><span class="o">.</span><span class="na">getQueryString</span><span class="o">());</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="n">checkgroupPage</span> <span class="o">=</span> <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">selectPage</span><span class="o">(</span><span class="n">page1</span><span class="o">,</span> <span class="n">queryWrapper</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="k">new</span> <span class="n">PageResult</span><span class="o">(</span><span class="n">checkgroupPage</span><span class="o">.</span><span class="na">getTotal</span><span class="o">(),</span><span class="n">checkgroupPage</span><span class="o">.</span><span class="na">getRecords</span><span class="o">());</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>
</span></span></code></pre></div><h2 id="二编辑检查组功能">二、编辑检查组功能</h2>
<h3 id="一回显编辑信息功能">(一)回显编辑信息功能</h3>
<h4 id="1前端内容编写">1:前端内容编写</h4>
<h5 id="1点击按钮弹出编辑窗口并回显检查组数据">(1)点击按钮弹出编辑窗口并回显检查组数据</h5>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 弹出编辑窗口  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span><span class="nx">handleUpdate</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible4Edit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//回显当前检查组的基本信息  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkgroup/findGroupInfoById?id&#34;</span><span class="o">+</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//回显数据  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">formData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//异步请求获取所有检查项信息  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkitem/showAllItem&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">tableData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//基于双向绑定给我们的checkitemIds赋值 就可以默认勾选当前检查项的所有默认检查组  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="c1">//必须等到我们的检查项的列表加载完毕才可以进行勾选 所有我们的异步请求需要添加到这个位置  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="c1">// java  List&lt;Integer&gt;  转换成的json就是这个效果 [3,4,576,]  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkitem/getCheckItemIdByGroupId?id=&#34;</span><span class="o">+</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">checkitemIds</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> ​</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span><span class="k">else</span><span class="p">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">().</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">messge</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="p">});</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span><span class="p">},</span>
</span></span></code></pre></div><h4 id="2后台内容-2">2:后台内容</h4>
<h5 id="1控制器方法-3">(1):控制器方法</h5>
<h6 id="acheckgroupcontroller">a:CheckgroupController</h6>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">//根据检查组的id获取检查组的信息  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/findGroupInfoById&#34;</span><span class="o">)</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="n">Result</span> <span class="nf">findGroupInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">Checkgroup</span> <span class="n">checkgroup</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">try</span> <span class="o">{</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">checkgroup</span> <span class="o">=</span> <span class="n">checkGroupService</span><span class="o">.</span><span class="na">findGroupInfoById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKGROUP_FAIL</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKGROUP_SUCCESS</span><span class="o">,</span><span class="n">checkgroup</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>
</span></span></code></pre></div><h6 id="bcheckitemcontroller">b:CheckitemController</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="err"> </span> <span class="c1">//根据检查组的id获取检查组包含的检查项的id  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="err"> </span> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/getCheckItemIdByGroupId&#34;</span><span class="o">)</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="nd">@ResponseBody</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="kd">public</span> <span class="err"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getCheckItemIdByGroupId</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="k">return</span> <span class="n">checkItemService</span><span class="o">.</span><span class="na">getCheckItemIdByGroupId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>  
</span></span><span class="line"><span class="cl"><span class="err"> </span> <span class="o">}</span>
</span></span></code></pre></div><h5 id="2服务接口方法">(2)服务接口方法</h5>
<h6 id="acheckgroupservice">a:CheckGroupService</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="n">Checkgroup</span>  <span class="nf">findGroupInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></div><h6 id="bcheckitemservice">b:CheckItemService</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getCheckItemIdByGroupId</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></div><h5 id="3服务接口的实现方法">(3)服务接口的实现方法</h5>
<h6 id="acheckgroupserviceimpl">a:CheckGroupServiceImpl</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">   <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Checkgroup</span> <span class="nf">findGroupInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">selectById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h6 id="bcheckitemsserviceimpl">b:CheckItemsServiceImpl</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getCheckItemIdByGroupId</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">LambdaQueryWrapper</span><span class="o">&lt;</span><span class="n">CheckgroupCheckitem</span><span class="o">&gt;</span> <span class="n">lambdaQueryWrapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LambdaQueryWrapper</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">lambdaQueryWrapper</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="n">CheckgroupCheckitem</span><span class="o">::</span><span class="n">getCheckgroupId</span><span class="o">,</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">lambdaQueryWrapper</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">CheckgroupCheckitem</span><span class="o">::</span><span class="n">getCheckitemId</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">checkgroupCheckitemMapper</span><span class="o">.</span><span class="na">selectObjs</span><span class="o">(</span><span class="n">lambdaQueryWrapper</span><span class="o">).</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">(</span><span class="n">o</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">o</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h3 id="二提交确认按钮完成检查组修改">(二)提交确认按钮完成检查组修改</h3>
<h4 id="1编写前端提交更新函数">1：编写前端提交更新函数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="c1">//编辑检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">handleEdit</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">axios</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">&#34;/checkgroup/editGroup?checkitemIds=&#34;</span><span class="o">+</span><span class="k">this</span><span class="o">.</span><span class="na">checkitemIds</span><span class="o">,</span><span class="k">this</span><span class="o">.</span><span class="na">formData</span><span class="o">).</span><span class="na">then</span><span class="o">((</span><span class="n">res</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">dialogFormVisible4Edit</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">flag</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">({</span>
</span></span><span class="line"><span class="cl">                            <span class="n">message</span><span class="o">:</span> <span class="n">res</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">message</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                            <span class="n">type</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">success</span><span class="err">&#39;</span>
</span></span><span class="line"><span class="cl">                        <span class="o">});</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">().</span><span class="na">error</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">}).</span><span class="na">finally</span><span class="o">(()</span> <span class="o">=&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//从新进行分页查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="o">.</span><span class="na">findPage</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">                <span class="o">});</span>
</span></span><span class="line"><span class="cl">            <span class="o">},</span>
</span></span></code></pre></div><h4 id="2后台内容-3">2：后台内容</h4>
<h5 id="1控制器方法-4">(1)控制器方法</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">//编辑检查项
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/editGroup&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">editGroup</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span><span class="n">Integer</span> <span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkGroupService</span><span class="o">.</span><span class="na">updateGroup</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">,</span><span class="n">checkitemIds</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>  <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">MessageConstant</span><span class="o">.</span><span class="na">EDIT_CHECKGROUP_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">EDIT_CHECKGROUP_SUCCESS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>(2)服务接口内容</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">updateGroup</span><span class="o">(</span><span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span> <span class="n">Integer</span><span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">);</span>
</span></span></code></pre></div><p>(3)接口的实现类内容</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateGroup</span><span class="o">(</span><span class="n">Checkgroup</span> <span class="n">checkgroup</span><span class="o">,</span> <span class="n">Integer</span><span class="o">[]</span> <span class="n">checkitemIds</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">         <span class="c1">//更新检查组数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">updateById</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="c1">//删除检查组和检查项的中间关系表数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">         <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;checkgroup_id&#34;</span><span class="o">,</span><span class="n">checkgroup</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">         <span class="n">checkgroupCheckitemMapper</span><span class="o">.</span><span class="na">deleteByMap</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="c1">//从新添加检查组和检查项的中间表数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">:</span><span class="n">checkitemIds</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">CheckgroupCheckitem</span> <span class="n">checkgroupCheckitem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CheckgroupCheckitem</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkgroupCheckitem</span><span class="o">.</span><span class="na">setCheckgroupId</span><span class="o">(</span><span class="n">checkgroup</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkgroupCheckitem</span><span class="o">.</span><span class="na">setCheckitemId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">checkgroupCheckitemMapper</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">checkgroupCheckitem</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="三删除检查组操作">三、删除检查组操作</h2>
<h3 id="一-前端页面内容编写">(一) 前端页面内容编写</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">        <span class="c1">// 删除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">handleDelete</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//删除组操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">this</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="s2">&#34;确认删除选中的数据么?&#34;</span><span class="p">,</span><span class="s2">&#34;提示&#34;</span><span class="p">,{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&#34;warning&#34;</span><span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                     <span class="c1">//使用ajax方式完成数据的删除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                     <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkgroup/deleteInfoById?id=&#34;</span><span class="o">+</span><span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                                  <span class="nx">message</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                  <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;success&#39;</span>
</span></span><span class="line"><span class="cl">                              <span class="p">});</span>
</span></span><span class="line"><span class="cl">                          <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                              <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                          <span class="p">}</span>
</span></span><span class="line"><span class="cl">                     <span class="p">}).</span><span class="k">finally</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                          <span class="k">this</span><span class="p">.</span><span class="nx">findPage</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                     <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">}).</span><span class="k">catch</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;取消了当前删除检查组操作&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;info&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">});</span>
</span></span><span class="line"><span class="cl">                <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span></code></pre></div><h3 id="二-删除检查组的后台内容">(二) 删除检查组的后台内容</h3>
<h4 id="1控制器方法-5">1：控制器方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="c1">//删除检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/deleteInfoById&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">         <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">             <span class="n">checkGroupService</span><span class="o">.</span><span class="na">deleteInfoById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">             <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKGROUP_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="o">}</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span>  <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">DELETE_CHECKGROUP_SUCCESS</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="2-接口方法">2: 接口方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="kt">void</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></div><h4 id="3接口的实现方法">3:接口的实现方法</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="c1">//删除检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteInfoById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//删除中间表数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;checkgroup_id&#34;</span><span class="o">,</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">checkgroupCheckitemMapper</span><span class="o">.</span><span class="na">deleteByMap</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//删除检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">deleteById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h1 id="医疗管家-套餐管理维护">医疗管家-套餐管理维护</h1>
<h2 id="一体检套餐管理">一、体检套餐管理</h2>
<p>套餐其实就是检查组的集合，例如有一个套餐为“老年套餐”，这个体检套餐可以包括多个检查组：心脑血管检查、甲状腺检查、肺部筛查等。所以在添加套餐时需要选择这 个套餐包括的检查组。 套餐对应的实体类为Setmeal，对应的数据表为t_setmeal。套餐和检查组为多对多关 系，所以需要中间表t_setmeal_checkgroup进行关联</p>
<h3 id="一添加套餐功能">(一)添加套餐功能</h3>
<p>添加套餐功能中涉及到两部分，一部分是添加套餐信息还有一部分是添加套餐对应的检查组的信息，所以在点击套餐页面中的新建的时候在弹出一个已经准备好的隐藏框，在弹出的窗口中需要加载出所有的检查组的信息，每个套餐还有对应的配套图片，我们使用element-ui提供的上传组件完成上传功能</p>
<h4 id="1-弹出添加套餐窗口">1： 弹出添加套餐窗口</h4>
<h5 id="1前台页面">(1)前台页面</h5>
<h6 id="a编写新建套餐按钮事件">a:编写新建套餐按钮事件</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 弹出添加窗口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">handleCreate</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="c1">//重置表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="k">this</span><span class="p">.</span><span class="nx">resetForm</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">       <span class="c1">//显示弹出窗口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">       <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;/checkgroup/showAllGroupInfo&#34;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">flag</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">               <span class="k">this</span><span class="p">.</span><span class="nx">tableData</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">erro</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">       <span class="p">});</span>
</span></span><span class="line"><span class="cl">   <span class="p">},</span>
</span></span></code></pre></div><h6 id="b重置表单事件">b:重置表单事件</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"> <span class="c1">// 重置表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">resetForm</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//清空表单数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">formData</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//清空选中的检查组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">checkitemIds</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//默认选中第一个选项卡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">activeName</span> <span class="o">=</span> <span class="s1">&#39;first&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">//清空图片的预览url
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">},</span>
</span></span></code></pre></div><h5 id="2后台代码实现">(2)后台代码实现</h5>
<h6 id="a控制器方法">a:控制器方法</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//展示所有的检查组信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/showAllGroupInfo&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">showAllGroupInfo</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">List</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">list</span> <span class="o">=</span> <span class="n">checkGroupService</span><span class="o">.</span><span class="na">showAllGroupInfo</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span>  <span class="n">e</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKITEM_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">QUERY_CHECKGROUP_SUCCESS</span><span class="o">,</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h6 id="b服务接口">b:服务接口</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="n">List</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="nf">showAllGroupInfo</span><span class="o">();</span>
</span></span></code></pre></div><h6 id="c实现接口提供服务">c:实现接口提供服务</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl"> <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Checkgroup</span><span class="o">&gt;</span> <span class="nf">showAllGroupInfo</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="n">checkgroupMapper</span><span class="o">.</span><span class="na">selectList</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"> <span class="o">}</span>
</span></span></code></pre></div><h4 id="2处理上传图片功能">2:处理上传图片功能</h4>
<h5 id="1前台页面-1">(1)前台页面</h5>
<h6 id="aelement-ui上传组件">a:element-ui上传组件</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">form</span><span class="o">-</span><span class="nx">item</span> <span class="nx">label</span><span class="o">=</span><span class="s2">&#34;上传图片&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;</span><span class="nx">el</span><span class="o">-</span><span class="nx">upload</span>
</span></span><span class="line"><span class="cl">		<span class="kr">class</span><span class="o">=</span><span class="s2">&#34;avatar-uploader&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nx">action</span><span class="o">=</span><span class="s2">&#34;/setmeal/uploadpic&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">:</span><span class="nx">auto</span><span class="o">-</span><span class="nx">upload</span><span class="o">=</span><span class="s2">&#34;autoUpload&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nx">name</span><span class="o">=</span><span class="s2">&#34;imgFile&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">:</span><span class="nx">show</span><span class="o">-</span><span class="nx">file</span><span class="o">-</span><span class="nx">list</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">:</span><span class="nx">on</span><span class="o">-</span><span class="nx">success</span><span class="o">=</span><span class="s2">&#34;handleAvatarSuccess&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="o">:</span><span class="nx">before</span><span class="o">-</span><span class="nx">upload</span><span class="o">=</span><span class="s2">&#34;beforeAvatarUpload&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;</span><span class="nx">img</span> <span class="nx">v</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">&#34;imageUrl&#34;</span> <span class="o">:</span><span class="nx">src</span><span class="o">=</span><span class="s2">&#34;imageUrl&#34;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;avatar&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">		<span class="o">&lt;</span><span class="nx">i</span> <span class="nx">v</span><span class="o">-</span><span class="k">else</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;el-icon-plus avatar-uploader-icon&#34;</span><span class="o">&gt;&lt;</span><span class="err">/i&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;</span><span class="err">/el-upload&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="err">/el-form-item&gt;</span>
</span></span></code></pre></div><p>当前页面使用elementui的上传组件
action: 上传文件的地址
auto-upload: 自动上传
name：上传文件的名称
on-success: 上传成功后的回调函数
before-upload: 上传之前回调的函数</p>
<h6 id="b编辑上传组件的js函数">b:编辑上传组件的js函数</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//上传图片之前执行 规范了上传图片的类型和上传图片的大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">beforeAvatarUpload</span><span class="o">(</span><span class="n">file</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">const</span> <span class="n">isJPG</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">type</span> <span class="o">===</span> <span class="err">&#39;</span><span class="n">image</span><span class="o">/</span><span class="n">jpeg</span><span class="err">&#39;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">	<span class="kd">const</span> <span class="n">isLt2M</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">size</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="o">(!</span><span class="n">isJPG</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">		    <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="err">&#39;上传套餐图片只能是</span> <span class="n">JPG</span> <span class="err">格式</span><span class="o">!</span><span class="err">&#39;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="o">(!</span><span class="n">isLt2M</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">		    <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="err">&#39;上传套餐图片大小不能超过</span> <span class="mi">2</span><span class="n">MB</span><span class="o">!</span><span class="err">&#39;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">isJPG</span> <span class="o">&amp;&amp;</span> <span class="n">isLt2M</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//文件上传成功后的钩子，response为服务端返回的值，file为当前上传的文件封装成的js对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">handleAvatarSuccess</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="o">.</span><span class="na">imageUrl</span><span class="o">=</span><span class="s">&#34;http://localhost:9003/setmealpic/&#34;</span><span class="o">+</span><span class="n">response</span><span class="o">.</span><span class="na">data</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//设置模型数据（图片名称），后续提交ajax请求时会提交到后台最终保存到数据库
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="o">.</span><span class="na">formData</span><span class="o">.</span><span class="na">img</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">data</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="o">},</span>
</span></span></code></pre></div><h5 id="2后台功能实现代码">(2)后台功能实现代码</h5>
<h6 id="a控制方法">a:控制方法</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//上传图片方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/uploadpic&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Result</span> <span class="nf">uploadpic</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">&#34;imgFile&#34;</span><span class="o">)</span> <span class="n">MultipartFile</span> <span class="n">multipartFile</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">originalFilename</span> <span class="o">=</span> <span class="n">multipartFile</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">lastIndexOf</span> <span class="o">=</span> <span class="n">originalFilename</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">&#34;.&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//获取文件后缀
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">suffix</span> <span class="o">=</span> <span class="n">originalFilename</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">lastIndexOf</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">fileName</span>  <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">()+</span><span class="n">suffix</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D:/upload/&#34;</span><span class="o">+</span><span class="n">fileName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">multipartFile</span><span class="o">.</span><span class="na">transferTo</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">MessageConstant</span><span class="o">.</span><span class="na">PIC_UPLOAD_FAIL</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">new</span> <span class="n">Result</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span><span class="n">MessageConstant</span><span class="o">.</span><span class="na">PIC_UPLOAD_SUCCESS</span><span class="o">,</span><span class="n">fileName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h6 id="b设置虚拟路径完成图片的存储和访问">b：设置虚拟路径完成图片的存储和访问</h6>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Configuration</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyConfiguration</span> <span class="kd">extends</span> <span class="n">WebMvcConfigurerAdapter</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addResourceHandlers</span><span class="o">(</span><span class="n">ResourceHandlerRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">registry</span><span class="o">.</span><span class="na">addResourceHandler</span><span class="o">(</span><span class="s">&#34;/setmealpic/**&#34;</span><span class="o">).</span><span class="na">addResourceLocations</span><span class="o">(</span><span class="s">&#34;file:D:/upload/&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="heading"></h4>

            </div>
            <hr>
            <div style="text-align: center;">
                <button class="btn"><a href="https://lovemjh.github.io/posts/project/20220522222541/">← 小课堂</a></button>
                <button class="btn"><a href="https://lovemjh.github.io/posts/blog/20220430231253/">hexo博客git版本制控制 →</a></button>
            </div>

            
        </article><div class="aside_content" id="aside_content">
    <div class="card-widget card-info">
        <div class="card-content">
            <div class="card-info-avatar is-center">
                <img class="avatar-img" src="http://q1.qlogo.cn/g?b=qq&nk=2409741052&s=640" alt="avatar">
                <div class="author-info__name">青山</div>
                <div class="author-info__description">悟已往之不谏 知来者之可追</div>
            </div>
            
            <div class="card-info-social-icons is-center">
                <a class="social-icon" href="https://github.com/xioyito" target="_blank">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            

        </div>
    </div>


    <div class="card-widget">
        <div class="card-content">
            <meting-js auto="https://y.qq.com/n/yqq/playlist/7713574197.html">
            </meting-js>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-bullhorn" aria-hidden="true"></i>
                <span>一言</span>
            </div>
            <div id="hitokoto"></div>
        </div>
    </div>
    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <span>今日诗词</span>
            </div>
            <div id="jinrishici-sentence"></div>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-line-chart" aria-hidden="true"></i>
                <span>站点信息</span>
            </div>
            <div class="webinfo">
                <div class="webinfo-item">
                    <div class="webinfo-site-uv-name">本站访客数 :</div>
                    <div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div>
                </div>
                <div class="webinfo-item">
                    <div class="webinfo-site-name">本站总访问量 :</div>
                    <div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card-widget js-toc-w" id="js-toc-w">
        <div class="card-content js-toc">
            
        </div>
    </div>
    
</div></div>
</main>
<footer id="footer">
    <div id="footer-wrap">
        <div class="copyright">&copy;2019 - 2021 BY QING SHAN KE</div>
    </div>
</footer>
</div>

<div class="fan" id="fan" style="
position: fixed;
width: 40px;
height: 120px;
right: -200px;
bottom: 0px;
transition: all 0.5s;
z-index: 99999;
 ">
    <i class="fa fa-cog fa-spin fa-2x"></i><br>
    <i class="fa fa-align-justify fa-2x" id="ff"></i><br>
    <i class="fa fa fa-arrow-up fa-2x" id="aa"></i><br>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    var a = 0;
    ff.onclick = function () {
        if (a === 0) {
            $(".js-toc-w").css("position", "fixed"); 
            $(".js-toc-w").css("bottom", "10px");
            $(".js-toc-w").css("right", "40px");

            a++;
        } else {
            $(".js-toc-w").css("position", "static");
            a--;
        }
    }

    aa.onclick = function () {
        window.scrollTo({     
            top: 0,            
            behavior: "smooth"   
        })
    }

    
    window.onload = function () {
        $(".aplayer").css("background", "rgba(0, 0, 0, 0)");
        

        
    } 
</script>
<script>
    $(window).scroll(function () {
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop
        console.log(scrollY + "----------------------")
        if (scrollY > 40) {
            $('.fan').css("right", "0px");
        } else {
            $('.fan').css("right", "-220px");
        }
    });
    $(function () {
        
        var start_height = $(document).scrollTop();
        
        var navigation_height = $('.navigation').outerHeight();
        $(window).scroll(function () {
            
            var end_height = $(document).scrollTop();
            
            if (end_height > navigation_height) {
                $('.navigation').addClass('hide');
            } else {
                $('.navigation').removeClass('hide');
            }
            
            if (end_height < start_height) {
                $('.navigation').removeClass('hide');
            }
            
            start_height = $(document).scrollTop();
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.js"></script>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js" async></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>


<script src="https://unpkg.com/nplayer@latest/dist/index.min.js"></script>


<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>





<script src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.8/js/maodian.js"></script>


<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3, h4, h5 ,h6',
        
        hasInnerContainers: false,
        
    });
</script>


<script type="text/javascript">
    console.clear();
    console.log("%c 有朋自远方来, 不亦说乎.", "background:#24272A; color:#ffffff", "");
    console.log("%c Github %c", "background:#24272A; color:#ffffff", "", "https://github.com/laoxuai");
    console.log("%c 版本号: %c", "background:#24272A; color:#ffffff", "", "1.0.0");

    (function ($) {
        $.fn.snow = function (options) {
            var $flake = $('<div id="snowbox" />').css({ 'position': 'absolute', 'z-index': '9999', 'top': '-50px' }).html('&#10052;'),
                documentHeight = $(document).height(),
                documentWidth = $(document).width(),
                defaults = {
                    minSize: 10,
                    maxSize: 20,
                    newOn: 1000,
                    flakeColor: "#AFDAEF"  
                },
                options = $.extend({}, defaults, options);
            var interval = setInterval(function () {
                var startPositionLeft = Math.random() * documentWidth - 100,
                    startOpacity = 0.5 + Math.random(),
                    sizeFlake = options.minSize + Math.random() * options.maxSize,
                    endPositionTop = documentHeight - 200,
                    endPositionLeft = startPositionLeft - 500 + Math.random() * 500,
                    durationFall = documentHeight * 10 + Math.random() * 5000;
                $flake.clone().appendTo('body').css({
                    left: startPositionLeft,
                    opacity: startOpacity,
                    'font-size': sizeFlake,
                    color: options.flakeColor
                }).animate({
                    top: endPositionTop,
                    left: endPositionLeft,
                    opacity: 0.2
                }, durationFall, 'linear', function () {
                    $(this).remove()
                });
            }, options.newOn);
        };
    })(jQuery);
    $(function () {
        $.fn.snow({
            minSize: 5,  
            maxSize: 50, 
            newOn: 800   
        });
    });

    
    var OriginTitle = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            
            document.title = '╭(°A°`)╮ 页面崩溃啦 ~';
            clearTimeout(titleTime);
        }
        else {
            $('[rel="icon"]').attr('href', "/favicon.ico");
            document.title = '(ฅ>ω<*ฅ) 噫又好啦 ~' + OriginTitle;
            titleTime = setTimeout(function () {
                document.title = OriginTitle;
            }, 2000);
        }
    });
</script></body>
</html>