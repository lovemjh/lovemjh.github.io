<!DOCTYPE html>
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=no">
  <meta name="description" content="MJH Blog & MEET HTML Theme">
  <title>Spring-MVC</title>
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.4/tocbot.css">
  
  <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/agate.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
  
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.5.2/animate.min.css">
  <script type="text/javascript">
    if (!!window.ActiveXObject || "ActiveXObject" in window) { 
      alert('朋友，上古浏览器不支持呢~');
    }
  </script>

  <style>
    .sidebar {
      z-index: 998;
      position: fixed;
      left: -200px;
      width: 200px;
      height: 100%;
      background: #ffffff;
      transition: all .5s ease;
    }

    .sidebar .top {
      font-size: 22px;
      color: rgb(0, 0, 0);
      text-align: center;
      height: 60px;
      line-height: 60px;
      background-color: rgb(255, 255, 255);
      user-select: none;

    }

    .sidebar ul {
      list-style: none;
    }

    .sidebar ul a {
      display: block;
      height: 100%;
      width: 100%;
      text-align: center;
      line-height: 45px;
      font-size: 18px;
      color: rgb(0, 0, 0);
      box-sizing: border-box;
      border-top: 1px solid rgb(255, 0, 0);
      border-bottom: 1px solid rgb(0, 17, 255);
      transition: .4s;
    }

    .sidebar ul li:hover a {
      padding-left: 30px;
      color: #7c4242;
      border-left: 5px solid #ffffff;
      transition: all 0.5s;
    }

    .sidebar ul a i {
      margin-right: 16px;
    }

    #check {
      display: none;
    }

    label #btn,
    label #cancel {
      position: fixed;
      cursor: pointer;
      background-color: #000000;
      border-radius: 3px;
    }

    label #btn {
      left: 5px;
      top: 7px;
      font-size: 25px;
      color: #fff;
      padding: 6px 10px;
      transition: all .5s;
      z-index: 999;
    }

    label #cancel {
      z-index: 999;
      left: -145px;
      top: 10px;
      font-size: 25px;
      color: rgb(255, 255, 255);
      padding: 4px 9px;
      transition: all .5s ease;
    }

    #check:checked~.sidebar {
      left: 0;
    }

    #check:checked~label #btn {
      left: 10px;
      opacity: 0;
      pointer-events: none;
    }

    #check:checked~label #cancel {
      left: 150px;
    }







     
    ::-webkit-scrollbar {
      width: 8px;
      height: 6px
    }

     
    ::-webkit-scrollbar-track {
      background-color: transparent;
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }

     
    ::-webkit-scrollbar-thumb {
      background-color: #30B07F;
      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 100%, transparent 100%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }






     
    .navigation {
      width: 100%;
      height: 50px;
       
      position: fixed;
      left: 0;
      top: 0;
      text-align: center;
      transition: top 0.5s;
      z-index: 999;

      background: rgba(255, 255, 255, .4) !important;
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      backdrop-filter: saturate(180%) blur(20px) !important;
    }

     
    .hide {
      top: -60px;
    }



     
    .btn {
      width: 120px;
      height: 40px;
      background: linear-gradient(315deg, #a4d8fa 0%, #5eb1e9 74%);
      border: none;
      border-radius: 10px;
      font-family: 'Lato', sans-serif;
      font-weight: 500;
      font-size: smaller;
      color: #fff;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, .5),
        7px 7px 20px 0px rgba(0, 0, 0, .1),
        4px 4px 5px 0px rgba(0, 0, 0, .1);
      outline: none;
      position: relative;
      z-index: 0;
    }

    .btn::before {
      position: absolute;
      content: '';
      left: 0;
      bottom: 0;
      width: 100%;
      height: 0;
      transition: all 0.3s ease;
      border-radius: 10px;
      background: linear-gradient(315deg, #4dccc6 0%, #96e4df 74%);
      z-index: -1;
    }

    .btn:hover::before {
      top: 0;
      height: 100%;
    }

    .btn:active {
      top: 2px;
    }




     
     

     
    * {
      font-family: LXGW WenKai
    }

    * {
      font-weight: bold
    }

    body {
      font-family: LXGW WenKai;
    }




     
    .pagination {
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      height: 50px;
      margin: 0px;
    }

    .pagination a {
      text-decoration: none;
      font-size: 22px;
      color: rgb(0, 0, 0);
    }

    .page-item {
      display: inline;
      margin-right: 20px;
    }

    #Background_animation { 
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    }

  </style>

</head>
    <body style="background-color: rgb(229, 204, 15);">
    
<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" viewBox="0 0 100 100" id="Background_animation">
  <defs>
      <style>
          @keyframes rotate {
              100% {
                  transform: rotate(360deg);
              }
          }
          .out-top {
              animation: rotate 20s linear infinite;
              transform-origin: 13px 25px;
          }
          .in-top {
              animation: rotate 10s linear infinite;
              transform-origin: 13px 25px;
          }
          .out-bottom {
              animation: rotate 25s linear infinite;
              transform-origin: 84px 93px;
          }
          .in-bottom {
              animation: rotate 15s linear infinite;
              transform-origin: 84px 93px;
          }
      </style>
  </defs>
  <path fill="#9b5de5" class="out-top" d="M37-5C25.1-14.7,5.7-19.1-9.2-10-28.5,1.8-32.7,31.1-19.8,49c15.5,21.5,52.6,22,67.2,2.3C59.4,35,53.7,8.5,37-5Z"/>
  <path fill="#f15bb5" class="in-top" d="M20.6,4.1C11.6,1.5-1.9,2.5-8,11.2-16.3,23.1-8.2,45.6,7.4,50S42.1,38.9,41,24.5C40.2,14.1,29.4,6.6,20.6,4.1Z"/>
  <path fill="#00bbf9" class="out-bottom" d="M105.9,48.6c-12.4-8.2-29.3-4.8-39.4.8-23.4,12.8-37.7,51.9-19.1,74.1s63.9,15.3,76-5.6c7.6-13.3,1.8-31.1-2.3-43.8C117.6,63.3,114.7,54.3,105.9,48.6Z"/>
  <path fill="#00f5d4" class="in-bottom" d="M102,67.1c-9.6-6.1-22-3.1-29.5,2-15.4,10.7-19.6,37.5-7.6,47.8s35.9,3.9,44.5-12.5C115.5,92.6,113.9,74.6,102,67.1Z"/>
</svg>

  <input type="checkbox" id="check">
<label for="check">
  <i class="fa fa-bars" id="btn"></i>
  <i class="fa fa-times" id="cancel"></i>
</label>
<div class="sidebar">
  <div class="top">Hi~</div>
  <ul>
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</div><nav class="navigation">
  <ul class="ull">
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</nav>
<div id="body-wrap">
  
  <div style="width: 100%; height: 65vh;">
    <div id="page_site-info">
      <div id="site-title">
        <input type="checkbox" id="check">
        <br>
        <span class="blogtitle"></span>
        
        
        <div class="post-header">
          <span>
            
            <i class="fa fa-calendar"></i>
            2022-05-26&nbsp;
          </span>
          <span>
            
            <i class="fa fa-calendar-check-o"></i>
            2022-05-26&nbsp;&nbsp;&nbsp;
          </span>
          <span>
            
            <i class="fa fa-edit"></i>
            16296 字
          </span>&nbsp;
          <span>
            
            <i class="fa fa-paper-plane"></i>
            33 分钟
          </span>
        </div><div class="container-ctgtag">
	<div class="taxonomy" style="display: flex; justify-content: center;">
		
		<div class="ctg" style="display: flex; justify-content: center; margin-right: 20px;">
			
			<div style="margin-right: 10px;">
				
				<a href="/categories/"></a>
			</div>
			
		</div>
		<div class="tag" style="display: flex; justify-content: center;">
			
			<div style="margin-right: 10px;">
				
				<a href="/tags/"></a></i>
			</div>
			
		</div>
	</div>
</div>

        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
        <script>
          var typed = new Typed(".blogtitle", {
            strings: ['Spring-MVC'],
            startDelay: 300,
            typeSpeed: 100,
            loop: true,
            backSpeed: 50,
            showCursor: true
          });
        </script>
      </div>
    </div>
  </div>
  
<main id="content-outer">
    <div class="layout_page" id="content-inner">
        <article id="page" style="margin-right: 10px;">
            
            <div class="js-toc-content" style="height: 100%;">
                <h1 id="springmvc第一天">SpringMVC第一天</h1>
<h2 id="一springmvc的基本概念了解">一、SpringMVC的基本概念（了解）</h2>
<h3 id="一三层架构和mvc">（一）三层架构和MVC</h3>
<h4 id="1三层架构概述">1、三层架构概述</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">我们的开发架构一般都是基于两种形式，一种是 C/S 架构，也就是客户端/服务器，另一种是 B/S 架构，也就是浏览器服务器。在 JavaEE 开发中，几乎全都是基于 Browser/S 架构的开发。那么在 B/S 架构中，系统标准的三层架构
</span></span><span class="line"><span class="cl">包括：表现层（web）、业务层（service）、持久层（dao）。三层架构在我们的实际开发中使用的非常多，所以我们课程中的案例也都是基于三层架构设计的。
</span></span><span class="line"><span class="cl">三层架构中，每一层各司其职，接下来我们就说说每层都负责哪些方面：
</span></span><span class="line"><span class="cl">（1）表现层（表示层，web）：也就是我们常说的web层。它负责接收客户端请求，向客户端响应结果，通常客户端使用http协议请求web 层，web 需要接收 http 请求，完成 http 响应。
</span></span><span class="line"><span class="cl">表现层包括展示层和控制层：控制层负责接收请求，展示层负责结果的展示。	
</span></span><span class="line"><span class="cl">（2）业务层：也就是我们常说的 service 层。它负责业务逻辑处理，和我们开发项目的需求息息相关。	
</span></span><span class="line"><span class="cl">（3）持久层（Dao data access  object）：也就是我们是常说的 dao 层。负责数据持久化，和数据库做交互。
</span></span></code></pre></div><h3 id="二springmvc-概述">（二）SpringMVC 概述</h3>
<h4 id="1springmvc是什么">1、springMVC是什么？</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SpringMVC是一个基于Java的实现了MVC设计模式的请求驱动类型的轻量级Web框架，通过把Model，View，Controller分离，将web层进行职责解耦，把复杂的web应用分成逻辑清晰的几部分，简化开发，减少出错，方便组内开发人员之间的配合。
</span></span><span class="line"><span class="cl">model： 模型 bean pojo
</span></span><span class="line"><span class="cl">controller： servlet 充当了控制器
</span></span><span class="line"><span class="cl">view： 试图~ 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">百科介绍：
</span></span><span class="line"><span class="cl">Spring MVC属于SpringFrameWork的后续产品，已经融合在Spring Web Flow里面。Spring 框架提供了构建 Web 应用程序的全功能 MVC 模块。使用 Spring 可插入的 MVC 架构，从而在使用Spring进行WEB开发时，可以选择使用Spring的Spring MVC框架或集成其他MVC开发框架，如Struts1(现在一般不用)，Struts 2(一般老项目使用)等等。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结： 
</span></span><span class="line"><span class="cl">springmvc 是应用web层的 基于MVC设计模式的轻量级的web框架。 对Servlet封装，支持restful风格。
</span></span><span class="line"><span class="cl">官网： 
</span></span><span class="line"><span class="cl">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web
</span></span></code></pre></div><h4 id="2springmvc在三层架构中的位置">2、SpringMVC在三层架构中的位置？</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">springMVC位于三层架构中的表现层，作用是接收请求响应数据，响应的数据通过视图、模板展示给用： 
</span></span><span class="line"><span class="cl">数据访问层：  Mybatis DButils JdbcTemplate Jdbc | Mybatis-plus | mapper Hibernate JPA  
</span></span><span class="line"><span class="cl">业务层：    spring框架： IOC提供对象， 声明式事务~ 
</span></span><span class="line"><span class="cl">表现层：    springMVC Servlet | Struts2（很少）  Struts1 
</span></span></code></pre></div><p><img src="/posts/Java-frame/20220526160511/image-20220526161445462.png"
    
    
    
    loading="lazy"
    
    
></p>
<h4 id="3springmvc的优势">3、SpringMVC的优势？</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">（1）清晰的角色划分：
</span></span><span class="line"><span class="cl">（2）分工明确，而且扩展点相当灵活，可以很容易扩展，虽然几乎不需要。 
</span></span><span class="line"><span class="cl">（3）POJO 就可以充当控制器，屏蔽了繁琐的servlet的API
</span></span><span class="line"><span class="cl">（4）和 Spring 其他框架无缝集成，是其它 Web 框架所不具备的。 
</span></span><span class="line"><span class="cl">（5）可适配，通过 HandlerAdapter 可以支持任意的类作为处理器。 
</span></span><span class="line"><span class="cl">（6）可定制性，HandlerMapping、ViewResolver 等能够非常简单的定制。 
</span></span><span class="line"><span class="cl">（7）功能强大的数据验证、格式化、绑定机制。 
</span></span><span class="line"><span class="cl">………………还有比如RESTful风格的支持、简单的文件上传、约定大于配置的契约式编程支持、基于注解的零配
</span></span><span class="line"><span class="cl">置支持等等。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">约定优于配置， 配置优于编码~ 
</span></span></code></pre></div><h2 id="二springmvc入门实战">二、SpringMVC入门（实战）</h2>
<h3 id="一springmvc-的入门案例">（一）SpringMVC 的入门案例</h3>
<h4 id="1入门案例需求分析">1、入门案例需求分析</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">构建页面index.jsp发起请求，在服务器端处理请求，控制台打印处理请求成功，跳转success.jsp成功页面；
</span></span></code></pre></div><h4 id="2构建maven项目并添加依赖">2、构建maven项目并添加依赖</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">注意：  maven war   工程打包方式war。 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>spring-webmvc<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>5.2.5.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>5.2.5.RELEASE<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结： springmvc： webmvc web
</span></span></code></pre></div><h4 id="3webxml中配置核心控制器dispatcherservlet">3、web.xml中配置核心控制器DispatcherServlet</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;servlet&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-name&gt;</span>springmvc01<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;init-param&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;param-value&gt;</span>classpath:springmvc.xml<span class="nt">&lt;/param-value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/init-param&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/servlet&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;servlet-mapping&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-name&gt;</span>springmvc01<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/servlet-mapping&gt;</span>
</span></span></code></pre></div><h4 id="4配置springmvc的配置文件springmvcxml">4、配置springMVC的配置文件springmvc.xml</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"> 	<span class="c">&lt;!--扫描注解包--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.offcn.controller&#34;</span><span class="nt">&gt;&lt;/context:component-scan&gt;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">	<span class="c">&lt;!--处理器映射器：根据请求路径匹配映射路径找到对应的执行器--&gt;</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--处理器适配器：根据处理器映射器返回的执行器对象，去执行执行器对象--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--视图解析器：解析视图--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.view.InternalResourceViewResolver&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;prefix&#34;</span> <span class="na">value=</span><span class="s">&#34;/&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;suffix&#34;</span> <span class="na">value=</span><span class="s">&#34;.jsp&#34;</span><span class="nt">&gt;&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/bean&gt;</span>
</span></span></code></pre></div><h4 id="5构建页面发起请求">5、构建页面发起请求</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/hello/test1&#34;</span><span class="p">&gt;</span>hello<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre></div><h4 id="6编写控制器并使用注解配置">6、编写控制器并使用注解配置</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Controller</span> <span class="c1">//必须开启注解扫描
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;hello&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test1&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test1</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;正在处理请求&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="7启动服务器测试">7、启动服务器测试</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">pom.xml文件中服务器插件配置：
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;plugins&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;plugin&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;groupId&gt;</span>org.apache.tomcat.maven<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;artifactId&gt;</span>tomcat7-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;version&gt;</span>2.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="c">&lt;!--指定编码格式--&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;uriEncoding&gt;</span>utf-8<span class="nt">&lt;/uriEncoding&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="c">&lt;!--指定项目启动后的访问路径--&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;path&gt;</span>/<span class="nt">&lt;/path&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="c">&lt;!--指定访问端口号--&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;port&gt;</span>8888<span class="nt">&lt;/port&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/configuration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/plugin&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/plugins&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/build&gt;</span>
</span></span></code></pre></div><h3 id="二springmvc执行过程及原理分析">（二）SpringMVC执行过程及原理分析</h3>
<h4 id="1springmvc的请求响应流程">1、SpringMVC的请求响应流程</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">浏览器发送请求，被DispatcherServlet捕获，DispatcherServlet没有直接处理请求，而是将请求交给HandlerMapping处理器映射器，处理器映射器根据请求路径去controller控制层中匹配对应的执行器，并将匹配结果返回给DispatcherServlet，由DispacherServlet调用HandlerAdapter处理器适配器来执行控制层执行器方法；
</span></span><span class="line"><span class="cl">执行器方法执行后的返回结果，由DispatcherServlet交给视图解析器ViewResolver来处理，找到对应的结果视图，渲染视图，并将结果响应给浏览器。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">http://localhost:8080/xxx/servlet
</span></span><span class="line"><span class="cl">(1)客户端浏览器发出请求， 到达DispatcherServlet前端控制器。 springmvc 框架提供的。  
</span></span><span class="line"><span class="cl">(2)DispatcherServlet 将请求交给了 处理器映射器，进行路径映射。映射结果交给前端控制器。 
</span></span><span class="line"><span class="cl">(3)请求到达处理器适配器，可以进行数据类型的转换等操作，最后达到Handler。【后端处理器，自定义的 Servlet】 
</span></span><span class="line"><span class="cl">(4)后端处理器处理完毕之后， 将结果经过处理器适配器最终交给 前端控制器。 
</span></span><span class="line"><span class="cl">(5)经过视图解析器： 数据解析到 view 对象当中。  交给了前端控制器
</span></span><span class="line"><span class="cl">(6)前端控制器将view对象 交给模板引擎，进行试图渲染。 最终生成静态页面，响应给用户。 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">以下组件： 
</span></span><span class="line"><span class="cl">一个中心是三个基本点： 不需要自己开发，springmvc提供的
</span></span><span class="line"><span class="cl">一个中心： DispatcherServlet 
</span></span><span class="line"><span class="cl">三个基本点： 处理器映射器  处理器适配器  试图解析器
</span></span><span class="line"><span class="cl">Handler后端处理器：程序员自己开发~ 
</span></span></code></pre></div><p><img src="/posts/Java-frame/20220526160511/image-20220526161519809.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><a class="link" href="/posts/Java-frame/https://www.pianshen.com/article/72582080569/"  target="_blank" rel="noopener"
    >https://www.pianshen.com/article/72582080569/</a></p>
<h3 id="三springmvc常用组件介绍">（三）SpringMVC常用组件介绍</h3>
<h4 id="1dispatcherservlet前端控制器">1、DispatcherServlet：前端控制器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用户请求到达前端控制器，它就相当于 mvc 模式中的 controller，dispatcherServlet 是整个流程控制的中心，由它调用其它组件处理用户的请求，dispatcherServlet 的存在降低了组件之间的耦合性。 
</span></span><span class="line"><span class="cl">DispatcherServlet本质上就是servlet web.xml当中。 该组件是springMVC 提供的， 无所编写，只需配制。
</span></span></code></pre></div><h4 id="2handlermapping处理器映射器">2、HandlerMapping：处理器映射器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">HandlerMapping 负责根据用户请求找到 Handler 即处理器，SpringMVC提供了不同的映射器实现不同的映射方式： 
</span></span><span class="line"><span class="cl">该组件： springMVC提供的。 无需编写
</span></span></code></pre></div><h4 id="3handler后端处理器自定义的类似于servlet">3、Handler：后端处理器【自定义的，类似于servlet】</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">它就是我们开发中要编写的具体业务控制器。由 DispatcherServlet 把用户请求转发到 Handler。由Handler 对具体的用户请求进行处理。 
</span></span><span class="line"><span class="cl">等价于之前编写的Servlet。后端逻辑处理 【程序员编写】
</span></span></code></pre></div><h4 id="4handladapter处理器适配器">4、HandlAdapter：处理器适配器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">通过 HandlerAdapter 对处理器进行执行， 适配器主要进行数据类型类转换等操作~  
</span></span><span class="line"><span class="cl">该组件： 无需编写， 只需配置~ 
</span></span></code></pre></div><h4 id="5view-resolver视图解析器">5、View Resolver：视图解析器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">View Resolver 负责将处理结果（ModelAndView）生成 View 对象，将view对象返回给前端控制器。 
</span></span><span class="line"><span class="cl">注意： 组件springmvc提供的， 如果不使用，可以不用配置。  
</span></span><span class="line"><span class="cl">      如果要使用，自行配置试图解析器~ 
</span></span></code></pre></div><h4 id="6view视图渲染">6、View：视图渲染</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SpringMVC 框架提供了很多的 View 视图类型的支持，包括：jsp、freemarkerView、pdfView，FreeMark ，thymeleaf 等。我们最常用的视图就是 jsp。之后的学习， 我们会学习静态模板技术~  
</span></span><span class="line"><span class="cl">view对象的数据渲染到页面上。 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">总结： 
</span></span><span class="line"><span class="cl">springmvc 基于组件开发： 
</span></span><span class="line"><span class="cl">DispatcherServlet： 一个中心
</span></span><span class="line"><span class="cl">三个基本点：
</span></span><span class="line"><span class="cl">    处理器映射器： 
</span></span><span class="line"><span class="cl">    处理器适配器： 
</span></span><span class="line"><span class="cl">    试图解析器： 
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">后端处理器： 类似与servlet， 程序员自定义。 
</span></span></code></pre></div><h4 id="7mvcannotation-driven标签说明">7、<a class="link" href="/posts/Java-frame/mvc:annotation-driven" >mvc:annotation-driven</a>标签说明：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-XML" data-lang="XML"><span class="line"><span class="cl">在 SpringMVC 的各个组件中，处理器映射器、处理器适配器、视图解析器称为 SpringMVC 的三大组件。使用 <span class="nt">&lt;mvc:annotation-driven&gt;</span> 自动加载 RequestMappingHandlerMapping（处理映射器）和RequestMappingHandlerAdapter （ 处 理 适 配 器 ），可 用 在 SpringMVC.xml 配 置 文 件 中 使 用<span class="nt">&lt;mvc:annotation-driven&gt;</span>替代处理映射器和适配器的配置（一般开发中都需要该标签）。注意：我们只需要编写处理具体业务的控制器以及视图。
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mvc:annotation-driven&gt;</span> 标签相当于以下配置：
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- HandlerMapping处理器映射器 --&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerM
</span></span></span><span class="line"><span class="cl"><span class="s">apping&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- HandlerAdapter处理器适配器 --&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerA
</span></span></span><span class="line"><span class="cl"><span class="s">dapter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- HadnlerExceptionResolvers异常处理器 --&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExcept
</span></span></span><span class="line"><span class="cl"><span class="s">ionResolver&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolv
</span></span></span><span class="line"><span class="cl"><span class="s">er&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span> 
</span></span><span class="line"><span class="cl"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div><h2 id="三springmvc中的请求参数绑定重点">三、SpringMVC中的请求参数绑定【重点】</h2>
<h3 id="一绑定说明">（一）绑定说明</h3>
<h4 id="1绑定的机制">1、绑定的机制</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">我们都知道，表单中请求参数都是基于 key=value 的。SpringMVC绑定请求参数的过程是通过把表单提交请求参数，作为控制器中方法参数进行绑定的。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">获得前端页面提交的参数：
</span></span><span class="line"><span class="cl">request.getParameter(&#34;username&#34;);
</span></span><span class="line"><span class="cl">String [] values = request.getParameterValues(&#34;hobby&#34;);
</span></span><span class="line"><span class="cl">request.getParameterMap(); =&gt; Map集合
</span></span></code></pre></div><h4 id="2支持的数据类型">2、支持的数据类型</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">简单类型参数：包括基本类型和 String 类型
</span></span><span class="line"><span class="cl">POJO 类型参数：包括实体类，以及关联的实体类
</span></span><span class="line"><span class="cl">数组和集合类型参数：包括 List 结构和 Map 结构的集合（包括数组）
</span></span></code></pre></div><h4 id="3使用要求">3、使用要求：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">如果是基本类型或者 String 类型：要求我们的参数名称必须和控制器中方法的形参名称保持一致。(严格区分大小写)
</span></span><span class="line"><span class="cl">如果是 POJO 类型，或者它的关联对象：要求表单中参数名称和 POJO 类的属性名称保持一致。并且控制器方法的参数类型是 POJO 类型。
</span></span><span class="line"><span class="cl">如果是集合类型,有两种方式：
</span></span><span class="line"><span class="cl">（1）第一种：要求集合类型的请求参数必须在 POJO 中。在表单中请求参数名称要和 POJO 中集合属性名称相同。给 List 集合中的元素赋值，使用下标。给 Map 集合中的元素赋值，使用键值对。
</span></span><span class="line"><span class="cl">（2）第二种：接收的请求参数是 json 格式数据。需要借助一个注解实现。 @RequestBody注解
</span></span></code></pre></div><h3 id="二参数绑定示例">（二）参数绑定示例</h3>
<h4 id="1基本类型和-string-类型作为参数">1、基本类型和 String 类型作为参数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">页面定义请求</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/hello/test2&#34;</span> <span class="n">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">用户名</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">年龄</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">执行器方法绑定参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test2&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test2</span><span class="o">(</span><span class="n">String</span> <span class="n">userName</span><span class="o">,</span><span class="kt">int</span> <span class="n">age</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;用户名：&#34;</span><span class="o">+</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;年龄：&#34;</span><span class="o">+</span><span class="n">age</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">注意</span><span class="err">：</span> <span class="n">参数提交的名称和方法形式参数的名称保持一致</span><span class="err">。</span> <span class="n">否则封装失败</span><span class="o">~</span>  <span class="err">，</span><span class="n">并且能够进行数据类型的转换</span><span class="err">。</span> 
</span></span></code></pre></div><h4 id="2pojo-类型作为参数">2、POJO 类型作为参数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">页面定义请求</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/hello/test3&#34;</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">用户名</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;pname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">年龄</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">车名称</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;car.cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">车价格</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;car.cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">执行器方法绑定参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test3&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test3</span><span class="o">(</span><span class="n">Person</span> <span class="n">person</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="3pojo-类中包含集合类型参数了解">3、POJO 类中包含集合类型参数（了解）</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">集合类型</span><span class="err">，</span><span class="n">不能直接绑定在方法的形式参数上</span><span class="err">。</span> 
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">页面定义请求</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/hello/test4&#34;</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">用户名</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;pname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">年龄</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">车名称</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;car.cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">车价格</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;car.cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">list集合车1</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carList[0].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">list集合车1</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carList[0].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">list集合车2</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carList[1].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">list集合车2</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carList[1].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">set集合车1</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carSet[0].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">set集合车1</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carSet[0].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">set集合车2</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carSet[1].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">set集合车2</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;carSet[1].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">map集合车1</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;map[&#39;x&#39;].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">map集合车1</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;map[&#39;x&#39;].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">map集合车2</span><span class="err">：</span><span class="n">车名称</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;map[&#39;y&#39;].cname&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">map集合车2</span><span class="err">：</span><span class="n">车价格</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;map[&#39;y&#39;].cprice&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">执行器方法绑定参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test4&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test4</span><span class="o">(</span><span class="n">Person</span> <span class="n">person</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">注意</span><span class="err">：</span> <span class="n">set集合</span><span class="err">：</span><span class="o">---</span><span class="err">【</span><span class="n">了解</span><span class="err">】</span> 
</span></span><span class="line"><span class="cl"> <span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">set集合必须创建</span> <span class="err">：</span><span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl"> <span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">set集合提供set</span> <span class="n">和get</span> <span class="n">方法</span>
</span></span><span class="line"><span class="cl"> <span class="err">（</span><span class="n">3</span><span class="err">）</span><span class="n">在构造器当中明确set集合当中添加的元素个数</span>
</span></span></code></pre></div><h4 id="4数组类型参数重点">4、数组类型参数（重点）</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">页面定义请求</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/hello/test5&#34;</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">爱好1</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;hobbies&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">爱好2</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;hobbies&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">爱好3</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;hobbies&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">执行器方法绑定参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test5&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test5</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">hobbies</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">hobby</span><span class="o">:</span><span class="n">hobbies</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hobby</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="5使用-servletapi-对象作为方法参数">5、使用 ServletAPI 对象作为方法参数</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">引入servletAPI的依赖jar包</span><span class="err">：（</span><span class="n">注意jar包作用范围provided</span><span class="o">:</span><span class="n">不参与项目部署</span><span class="err">）</span>
</span></span><span class="line"><span class="cl">		 <span class="o">&lt;!--</span><span class="n">web</span><span class="o">:</span> <span class="n">servlet</span> <span class="o">,</span><span class="n">jsp</span><span class="o">,</span> <span class="n">jstl</span> <span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">-</span><span class="n">api</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">3</span><span class="o">.</span><span class="na">1</span><span class="o">.</span><span class="na">0</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">provided</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">jsp</span><span class="o">-</span><span class="n">api</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">2</span><span class="o">.</span><span class="na">0</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">scope</span><span class="o">&gt;</span><span class="n">provided</span><span class="o">&lt;/</span><span class="n">scope</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">jstl</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">jstl</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">1</span><span class="o">.</span><span class="na">2</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">执行器方法绑定参数</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test6&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test6</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span><span class="n">HttpSession</span> <span class="n">session</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我在请求转发&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">&#34;/hello/test1&#34;</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="6请求参数乱码问题">6、请求参数乱码问题</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">tomacat 对 GET 和 POST 请求处理方式是不同的：
</span></span><span class="line"><span class="cl">（1）GET 请求的编码问题，要改 tomcat 的 server.xml配置文件：【了解】
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!--在实际开发当中， 不允许使用，第一：无权限修改 第二：其对他用户造成影响--&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;Connector</span> <span class="na">connectionTimeout=</span><span class="s">&#34;20000&#34;</span> <span class="na">port=</span><span class="s">&#34;8080&#34;</span><span class="na">protocol=</span><span class="s">&#34;HTTP/1.1&#34;</span> <span class="na">redirectPort=</span><span class="s">&#34;8443&#34;</span> <span class="na">URIEncoding=</span><span class="s">&#34;UTF-8&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> 使用的方式：  在配置tomcat插件的时候，指定一个tomcat字符集编码。 
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;uriEncoding&gt;</span>utf-8<span class="nt">&lt;/uriEncoding&gt;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">（2）POST 请求的编码问题，要在web.xml文件中配置编码过滤器：
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-name&gt;</span>characterEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="nt">&lt;/filter-class&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;init-param&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;param-name&gt;</span>encoding<span class="nt">&lt;/param-name&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;param-value&gt;</span>utf-8<span class="nt">&lt;/param-value&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/init-param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/filter&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter-mapping&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-name&gt;</span>characterEncodingFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div><h4 id="7静态资源访问">7、静态资源访问：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">（1）将静态资源交给默认的DefaultServlet处理：在springMVC.xml配置文件中加如下配置：
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;mvc:default-servlet-handler&gt;&lt;/mvc:default-servlet-handler&gt;</span>
</span></span><span class="line"><span class="cl">（2）指定静态资源的访问路径：在springMVC.xml配置文件中加如下配置：
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;mvc:resources</span> <span class="na">location=</span><span class="s">&#34;/css/&#34;</span> <span class="na">mapping=</span><span class="s">&#34;/css/**&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;mvc:resources</span> <span class="na">location=</span><span class="s">&#34;/images/&#34;</span> <span class="na">mapping=</span><span class="s">&#34;/images/**&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">	<span class="nt">&lt;mvc:resources</span> <span class="na">location=</span><span class="s">&#34;/js/&#34;</span> <span class="na">mapping=</span><span class="s">&#34;/js/**&#34;</span><span class="nt">/&gt;</span>
</span></span></code></pre></div><h3 id="三自定义参数类型转换器">（三）自定义参数类型转换器</h3>
<h4 id="1使用场景">1、使用场景：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SpringMVC不能自动识别参数转换为我们需要的数据类型，浏览器报400错误，类型转换异常；
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">默认支持的类型： yyyy/MM/dd  
</span></span><span class="line"><span class="cl">如果需要使用自定义的类型：此时就需要类型转换器
</span></span><span class="line"><span class="cl">开发步骤： 
</span></span><span class="line"><span class="cl">（1）开发一个类型转换器  implements Converter&lt;String, Date&gt; 
</span></span><span class="line"><span class="cl">（2）将自定义的类型转换器配置在工厂当中： 
</span></span><span class="line"><span class="cl">（3）在注解当中引用工厂： &lt;mvc:annotation-driven conversion-service=&#34;serviceFactoryBean&#34; /&gt; 
</span></span></code></pre></div><h4 id="2使用步骤">2、使用步骤：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">定义类型转换器</span><span class="err">；</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDateConverter</span> <span class="kd">implements</span> <span class="n">Converter</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Date</span><span class="o">&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Date</span> <span class="nf">convert</span><span class="o">(</span><span class="n">String</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SimpleDateFormat</span> <span class="n">simpleDateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&#34;yyyy-MM-dd&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">date</span><span class="o">=</span><span class="n">simpleDateFormat</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">source</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ParseException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">配置类型转换器</span><span class="err">；</span>
</span></span><span class="line"><span class="cl"> <span class="o">&lt;</span><span class="n">bean</span> <span class="n">id</span><span class="o">=</span><span class="s">&#34;formattingConversionService&#34;</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;org.springframework.format.support.FormattingConversionServiceFactoryBean&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;converters&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">bean</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;com.offcn.util.MyDateConverter&#34;</span><span class="o">&gt;&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">3</span><span class="err">）</span><span class="n">引用类型转换器</span><span class="err">；</span>	
</span></span><span class="line"><span class="cl"> <span class="n">引用自定义的类型转换器</span><span class="err">：</span> 
</span></span><span class="line"><span class="cl"> <span class="o">&lt;</span><span class="n">mvc</span><span class="o">:</span><span class="n">annotation</span><span class="o">-</span><span class="n">driven</span> <span class="n">conversion</span><span class="o">-</span><span class="n">service</span><span class="o">=</span><span class="s">&#34;serviceFactoryBean&#34;</span> <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/hello/test7&#34;</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">入职日期</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;hireDate&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;date&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test7&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test7</span><span class="o">(</span><span class="n">Date</span> <span class="n">hireDate</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hireDate</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h3 id="四参数绑定默认类型">（四）参数绑定默认类型</h3>
<p>参数绑定：默认类型：<code>Map&lt;String,Object&gt;</code> ModelAndView  <code>Model</code> ModelMap 类型，能够给前台传递。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">path</span><span class="o">=</span><span class="s">&#34;hello01&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">modelAndView</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ModelAndView</span> <span class="n">mav</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">mav</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>  <span class="n">mav</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">path</span><span class="o">=</span><span class="s">&#34;hello01&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">modelAndView</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ModelAndView</span> <span class="n">mav</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">,</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="n">mav</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>  <span class="n">mav</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;findById&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">findById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="n">Model</span> <span class="n">model</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">29</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;许~&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setBirthday</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//视图路径的跳转：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//存在Model当中： 传递给前台：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&#34;person&#34;</span><span class="o">,</span><span class="n">person</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="四springmvc的注解详解">四、SpringMVC的注解详解</h2>
<h3 id="0requestmapping注解">（0）RequestMapping注解</h3>
<h4 id="0requestmapping-注解">0、RequestMapping 注解</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用于定义映射路径，建立请求url和控制层方法之间的对应关系；
</span></span><span class="line"><span class="cl">（1）注解位置：
</span></span><span class="line"><span class="cl">	a.类上：定义一级映射路径；
</span></span><span class="line"><span class="cl">	b.方法上：定义二级映射路径；
</span></span><span class="line"><span class="cl">（2）注解属性：		
</span></span><span class="line"><span class="cl">	value：用于指定映射路径url。它和 path 属性的作用是一样的。
</span></span><span class="line"><span class="cl">	method：用于指定请求的方式。method = {RequestMethod.POST } 只能处理post请求。 状态码405
</span></span><span class="line"><span class="cl">	params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的 	key 和 value 必须和配置的一模一样。eg:params = {&#34;username&#34;}，表示请求参数必须有 username; 
</span></span><span class="line"><span class="cl">	如果没有携带username的参数：前端浏览器400 bad request
</span></span></code></pre></div><p>​</p>
<h3 id="一requestparam">（一）RequestParam</h3>
<h4 id="1requestparam注解介绍">1、RequestParam注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">使用在方法入参位置，用于指定请求参数名称，将该请求参数绑定到注解参数位置。
</span></span><span class="line"><span class="cl">属性：name:指定要绑定的请求参数名称；
</span></span><span class="line"><span class="cl">     required：指定请求参数是否必传； true：表明必须提交参数， 没有400
</span></span><span class="line"><span class="cl">	 defaultValue：指定当没有传入请求参数时的默认取值；
</span></span></code></pre></div><h4 id="2requestparam注解使用案例">2、RequestParam注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test1&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test1</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;pname&#34;</span><span class="o">,</span><span class="n">required</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="s">&#34;李四&#34;</span><span class="o">)</span><span class="n">String</span> <span class="n">name</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="3requestparam注解测试结果">3、RequestParam注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="二requestheader">（二）RequestHeader</h3>
<h4 id="1requestheader注解介绍">1、RequestHeader注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">注解在方法入参位置，用于获取请求头信息。
</span></span></code></pre></div><h4 id="2requestheader注解使用案例">2、RequestHeader注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="n">value</span><span class="err">：</span><span class="n">指定头的名称</span><span class="err">；</span> 
</span></span><span class="line"><span class="cl"> <span class="n">require</span><span class="err">：</span><span class="n">是否是必须</span><span class="err">，</span> <span class="kc">true</span><span class="err">，</span><span class="n">必须传递</span><span class="err">，</span> <span class="n">没传递</span><span class="err">。</span><span class="n">400</span> 
</span></span><span class="line"><span class="cl"> <span class="n">defaultValue</span><span class="err">：</span> <span class="n">如果前台没传递头信息</span><span class="err">，</span> <span class="n">指定默认值</span><span class="err">。</span> <span class="n">require冲突</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test2&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test2</span><span class="o">(</span><span class="nd">@RequestHeader</span><span class="o">(</span><span class="s">&#34;Upgrade-Insecure-Requests&#34;</span><span class="o">)</span><span class="n">String</span> <span class="n">data</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="3requestheader注解测试结果">3、RequestHeader注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="三requestbody">（三）RequestBody</h3>
<h4 id="1requestbody注解介绍">1、RequestBody注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用于方法入参位置，获取请求体内容。直接使用得到是 key=value&amp;key=value...结构的数据。get 请求方式不适用。通常用于将json格式字符串绑定到bean对象中；
</span></span></code></pre></div><h4 id="2requestbody注解使用案例">2、RequestBody注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">直接获取请求体内容</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/annotation/test3&#34;</span> <span class="n">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">用户名</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">年龄</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test3&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">test3</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">String</span> <span class="n">data</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">将json格式请求参数绑定到指定对象bean中</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">button</span> <span class="n">onclick</span><span class="o">=</span><span class="s">&#34;sendCar()&#34;</span><span class="o">&gt;</span><span class="n">发起ajax请求</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">function</span> <span class="nf">sendCar</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">$</span><span class="o">.</span><span class="na">ajax</span><span class="o">({</span>
</span></span><span class="line"><span class="cl">            <span class="n">type</span><span class="o">:</span> <span class="s">&#34;POST&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">url</span><span class="o">:</span> <span class="s">&#34;/annotation/test4&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span><span class="o">:</span> <span class="err">&#39;</span><span class="o">{</span><span class="s">&#34;cname&#34;</span><span class="o">:</span><span class="s">&#34;宝马&#34;</span><span class="o">,</span><span class="s">&#34;cprice&#34;</span><span class="o">:</span><span class="s">&#34;20&#34;</span><span class="o">}</span><span class="err">&#39;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">contentType</span><span class="o">:</span><span class="s">&#34;application/json&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">success</span><span class="o">:</span> <span class="n">function</span><span class="o">(</span><span class="n">msg</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">alert</span><span class="o">(</span> <span class="s">&#34;Data Saved: &#34;</span> <span class="o">+</span> <span class="n">msg</span> <span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">});</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test4&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">test4</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Car</span> <span class="n">car</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">car</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">注意</span><span class="err">：</span> <span class="n">使用json</span> <span class="n">需要引入json的解析器</span><span class="o">~</span> 
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">fasterxml</span><span class="o">.</span><span class="na">jackson</span><span class="o">.</span><span class="na">core</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">jackson</span><span class="o">-</span><span class="n">databind</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="n">2</span><span class="o">.</span><span class="na">9</span><span class="o">.</span><span class="na">9</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></span></code></pre></div><h4 id="3requestbody注解测试结果">3、RequestBody注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="四cookievalue">（四）CookieValue</h3>
<h4 id="1cookievalue注解介绍">1、CookieValue注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用于方法入参位置，把指定 cookie 名称的值传入控制器方法参数。
</span></span></code></pre></div><h4 id="2cookievalue注解使用案例">2、CookieValue注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//1 : 获得所有的cookie 
</span></span></span><span class="line"><span class="cl"><span class="c1">//2:  cookie
</span></span></span><span class="line"><span class="cl"><span class="c1">//3   getName(&#34;JSESSIONID&#34;) -value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test5&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">test5</span><span class="o">(</span><span class="nd">@CookieValue</span><span class="o">(</span><span class="s">&#34;JSESSIONID&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">data</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//通过@CookieValue 获得cookie对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;cookie2&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">cookie2</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="nd">@CookieValue</span><span class="o">(</span><span class="s">&#34;JSESSIONID&#34;</span><span class="o">)</span> <span class="n">Cookie</span> <span class="n">cookie</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;cookie:&#34;</span><span class="o">+</span><span class="n">cookie</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//cookie 的API信息~
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="3cookievalue注解测试结果">3、CookieValue注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="五modelattribute">（五）ModelAttribute</h3>
<h4 id="1modelattribute注解介绍">1、ModelAttribute注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">该注解是SpringMVC4.3版本以后新加入的。它可以用于修饰方法和参数。
</span></span><span class="line"><span class="cl">出现在方法上，表示当前方法会在控制器的方法执行之前，先执行。它可以修饰没有返回值的方法，也可以修饰有具体返回值的方法。
</span></span><span class="line"><span class="cl">出现在参数上，获取指定的数据给参数赋值。
</span></span></code></pre></div><h4 id="2modelattribute注解使用案例">2、ModelAttribute注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="err">（</span><span class="n">1</span><span class="err">）</span><span class="n">注解在方法上</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">&#34;shareParam&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">test6</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是公共方法&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s">&#34;公共参数&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="err">（</span><span class="n">2</span><span class="err">）</span><span class="n">注解在参数位置</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test7&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="n">String</span> <span class="nf">test7</span><span class="o">(</span><span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">&#34;shareParam&#34;</span><span class="o">)</span><span class="n">String</span> <span class="n">data</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span></code></pre></div><h4 id="3modelattribute注解测试结果">3、ModelAttribute注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="六sessionattributes">（六）SessionAttributes</h3>
<h4 id="1sessionattributes注解介绍">1、SessionAttributes注解介绍</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">注解在类上，作用将请求域中的参数存放到session域中，用于参数共享。
</span></span></code></pre></div><h4 id="2sessionattributes注解使用案例">2、SessionAttributes注解使用案例</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">   <span class="c1">//将参数存放到请求域
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test8&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">test8</span><span class="o">(</span><span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&#34;aa&#34;</span><span class="o">,</span><span class="s">&#34;aa1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&#34;bb&#34;</span><span class="o">,</span><span class="s">&#34;bb1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&#34;cc&#34;</span><span class="o">,</span><span class="s">&#34;cc1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;main&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//将请求域参数存放到session域中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nd">@Controller</span>
</span></span><span class="line"><span class="cl"><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;annotation&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@SessionAttributes</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&#34;aa&#34;</span><span class="o">,</span><span class="s">&#34;bb&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnnotationController</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="3sessionattributes注解测试结果">3、SessionAttributes注解测试结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h1 id="springmvc第二天">springMVC第二天</h1>
<p>springMVC： web层的轻量级框架， servlet</p>
<p>springMVC的执行流程： 图</p>
<p>springMVC的入门案例：</p>
<p>参数的绑定：</p>
<p>a： 获得前段页面的参数。</p>
<p>b： 原生servletAPI</p>
<p>c： 绑定一些默认类型：Map Model ModelMap 向前台传递值。</p>
<p>springMVC常用的注解：</p>
<h2 id="一rest风格编程">一、Rest风格编程</h2>
<h3 id="一rest风格url规范介绍">（一）Rest风格URL规范介绍</h3>
<h4 id="1什么是restful">1、什么是restful?</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">RESTful架构，就是目前最流行的一种互联网软件架构风格，并不是开发规范。它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用。REST这个词，是Roy Thomas Fielding在他2000年的博士论文中提出的. Fielding将他对互联网软件的架构原则，定名为REST，即Representational State Transfer的缩写。即&#34;表现层状态转化&#34;。如果一个架构符合REST原则，就称它为RESTful架构。值得注意的是 REST 并没有一个明确的标准，而更像是一种设计的风格。
</span></span><span class="line"><span class="cl">它本身并没有什么实用性，其核心价值在于如何设计出符合 REST 风格的网络接口。
</span></span></code></pre></div><h4 id="2restful的优点">2、restful的优点：</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用。
</span></span></code></pre></div><h4 id="3restful-的特性体现">3、restful 的特性【体现】</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> （1）资源（Resources）：网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的存在。可以用一个 URI（统一资源定位符）指向它，每种资源对应一个特定的 URI 。要获取这个资源，访问它的 URI 就可以，因此 URI 即为每一个资源的独一无二的识别符。
</span></span><span class="line"><span class="cl">（2）表现层（Representation）：把资源具体呈现出来的形式，叫做它的表现层 （Representation）。比如，文本可以用 txt 格式表现，也可以用 HTML 格式、XML 格式、JSON 格式表现，甚至可以采用二进制格式。
</span></span><span class="line"><span class="cl">（3）状态转化（State Transfer）：每发出一个请求，就代表了客户端和服务器的一次交互过程。HTTP 协议，是一个无状态协议，即所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生“状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是“表现层状态转化”。具体说，就是 HTTP 协议里面，四个表示操作方式的动词：GET 、POST 、PUT、DELETE。它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源。
</span></span><span class="line"><span class="cl">（4）传统请求url:
</span></span><span class="line"><span class="cl">新增：http://localhost:8888/annotation/addPerson      POST
</span></span><span class="line"><span class="cl">修改：http://localhost:8888/annotation/updatePerson   POST
</span></span><span class="line"><span class="cl">删除：http://localhost:8888/annotation/deletePerson?id=1   GET
</span></span><span class="line"><span class="cl">查询：http://localhost:8888/annotation/findPerson?id=1     GET
</span></span><span class="line"><span class="cl">（4）REST风格请求：
</span></span><span class="line"><span class="cl">新增：http://localhost:8888/annotation/person      POST
</span></span><span class="line"><span class="cl">修改：http://localhost:8888/annotation/person      PUT
</span></span><span class="line"><span class="cl">删除：http://localhost:8888/annotation/person/1      DELETE
</span></span><span class="line"><span class="cl">查询：http://localhost:8888/annotation/person/1      GET
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">2： 传递的参数可以作为url地址的一部分。 
</span></span><span class="line"><span class="cl">http://localhost:8888/annotation/person/1
</span></span></code></pre></div><h3 id="二pathvariable注解重要">（二）PathVariable注解【重要】</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">该注解用于绑定</span> <span class="n">url</span> <span class="n">中的占位符</span><span class="err">。</span><span class="n">例如</span><span class="err">：</span><span class="n">请求</span> <span class="n">url</span> <span class="n">中</span><span class="o">/</span><span class="n">annotation</span><span class="o">/</span><span class="n">test9</span><span class="o">/{</span><span class="n">id</span><span class="o">}</span><span class="err">，</span><span class="n">这个</span><span class="o">{</span><span class="n">id</span><span class="o">}</span><span class="n">就是</span> <span class="n">url</span> <span class="n">占位符</span><span class="err">。</span><span class="n">url</span> <span class="n">支持占位符是</span> <span class="n">spring3</span><span class="o">.</span><span class="na">0</span> <span class="n">之后加入的</span><span class="err">。</span><span class="n">是springmvc</span> <span class="n">支持</span> <span class="n">rest</span> <span class="n">风格</span> <span class="n">URL</span> <span class="n">的一个重要标志</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="n">属性</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">	<span class="n">value</span><span class="err">：</span><span class="n">用于指定</span> <span class="n">url</span> <span class="n">中占位符名称</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">	<span class="n">required</span><span class="err">：</span><span class="n">是否必须提供占位符</span><span class="err">。</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="n">localhost</span><span class="o">:</span><span class="n">8080</span><span class="o">/</span><span class="n">hello3</span><span class="o">/</span><span class="n">250</span> <span class="n">url</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">	<span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 获得url地址当中的变量值：
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param modelAndView
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param id
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;hello3/{xx}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span>  <span class="n">ModelAndView</span> <span class="nf">hello3</span><span class="o">(</span><span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">,</span> <span class="nd">@PathVariable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;xx&#34;</span><span class="o">,</span><span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;id:&#34;</span><span class="o">+</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//模型数据：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&#34;key1&#34;</span><span class="o">,</span><span class="s">&#34;value1&#34;</span><span class="o">);</span><span class="c1">//request.attribute()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//视图数据：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;success&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h3 id="三pathvariable案例">（三）PathVariable案例</h3>
<h4 id="1构建页面发起请求">1、构建页面发起请求</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl">REST风格编程：
</span></span><span class="line"><span class="cl">新增：
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;/annotation/person&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    用户名：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    年龄：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">修改：
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;/annotation/person&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;_method&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;PUT&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    用户名：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    年龄：<span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;age&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">删除：
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;/annotation/person/1&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;hidden&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;_method&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;DELETE&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">查询：
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/annotation/person/1&#34;</span><span class="p">&gt;</span>查询用户<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre></div><h4 id="2定义控制层执行器处理请求">2、定义控制层执行器处理请求</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;person&#34;</span><span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@Getting</span><span class="o">(</span><span class="s">&#34;/person&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">String</span> <span class="nf">addPerson</span><span class="o">(</span><span class="n">String</span> <span class="n">userName</span><span class="o">,</span><span class="kt">int</span> <span class="n">age</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;新增用户：&#34;</span><span class="o">+</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;person&#34;</span><span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">PUT</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">String</span> <span class="nf">updatePerson</span><span class="o">(</span><span class="n">String</span> <span class="n">userName</span><span class="o">,</span><span class="kt">int</span> <span class="n">age</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;修改用户：&#34;</span><span class="o">+</span><span class="n">userName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;person/{id}&#34;</span><span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">DELETE</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">String</span> <span class="nf">deletePerson</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">)</span><span class="kt">int</span> <span class="n">id</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;删除用户：id&#34;</span><span class="o">+</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span><span class="line"><span class="cl">   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;person/{id}&#34;</span><span class="o">,</span><span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="n">String</span> <span class="nf">findPerson</span><span class="o">(</span><span class="nd">@PathVariable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">)</span><span class="kt">int</span> <span class="n">id</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">       <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;查询用户信息：id&#34;</span><span class="o">+</span><span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span></code></pre></div><h4 id="3引入请求方式转换过滤器">3.引入请求方式转换过滤器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"> <span class="nt">&lt;filter&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-name&gt;</span>hiddenMethodFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-class&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="nt">&lt;/filter-class&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/filter&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;filter-mapping&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;filter-name&gt;</span>hiddenMethodFilter<span class="nt">&lt;/filter-name&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/filter-mapping&gt;</span>
</span></span></code></pre></div><h2 id="二响应数据和结果视图">二、响应数据和结果视图</h2>
<h3 id="一返回值分类">（一）返回值分类</h3>
<h4 id="1返回值为字符串">1、返回值为字符串</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">用于指定返回的逻辑视图名称</span><span class="err">；</span>
</span></span><span class="line"><span class="cl"><span class="n">控制器代码</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test1&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test1</span><span class="o">(</span><span class="n">String</span> <span class="n">pname</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pname</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;返回string类型测试&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">运行结果</span><span class="err">：</span><span class="n">详见课堂案例结果</span>
</span></span></code></pre></div><h4 id="2void类型">2、void类型</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  方法的返回值void：
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  （1） 默认情况下， void也会进行路径的跳转。
</span></span></span><span class="line"><span class="cl"><span class="cm">     *       跳转位置：  经过视图解析器 + 访问位置 寻找对应的页面。
</span></span></span><span class="line"><span class="cl"><span class="cm">     *
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  （2）void 的应用场景：
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  a:字符流或者是字节流向客户端浏览器异步返回数据。
</span></span></span><span class="line"><span class="cl"><span class="cm">     *  b：使用原生servlet进行 页面的转换或者是重定向时候， 可以使用void类型。
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/void&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">voidTest</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span><span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;void方法被执行了~&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// response.getWriter().println(&#34;xxx&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">       <span class="c1">// request.getRequestDispatcher().forward();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>       <span class="c1">// response.sendRedirect();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>	
</span></span></code></pre></div><h4 id="3modelandview">3、ModelAndView</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">用于绑定参数和指定返回视图名称</span><span class="err">；</span>
</span></span><span class="line"><span class="cl"><span class="n">控制器代码</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test3&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">test3</span><span class="o">(</span><span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&#34;aa&#34;</span><span class="o">,</span><span class="s">&#34;aa1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;main&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ModelAndView</span> <span class="n">对象</span><span class="err">：</span>  
</span></span><span class="line"><span class="cl"><span class="n">封装模型数据</span>
</span></span><span class="line"><span class="cl"><span class="n">封装视图数据</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="nl">注意:</span><span class="n">对象是springMVC底层对象</span><span class="err">，</span><span class="n">使用很少</span><span class="o">~</span>
</span></span></code></pre></div><h4 id="4-自定义类型重要">4： 自定义类型【重要】</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;getData&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">     <span class="nd">@ResponseBody</span><span class="c1">//引入依赖包：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">String</span>  <span class="nf">getDate1</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">       <span class="k">return</span> <span class="s">&#34;ok&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;getData2&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span><span class="c1">//引入依赖包：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">Person</span>  <span class="nf">getData2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1001</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;许8&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">person</span><span class="o">;</span><span class="c1">//异步返回数据：{&#34;id&#34;:1001,&#34;name&#34;:&#34;许8&#34;}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;getData3&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span><span class="c1">//引入依赖包：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="nf">getData3</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">         <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1001</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;许8&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1002</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;康7&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person3</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1003</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person3</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;夏66&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">list</span><span class="o">;</span><span class="c1">//异步返回数据：[{&#34;id&#34;:1001,&#34;name&#34;:&#34;许8&#34;},{},{}]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;getData4&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@ResponseBody</span><span class="c1">//引入依赖包：
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Person</span><span class="o">&gt;</span> <span class="nf">getData4</span><span class="o">(){</span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1001</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;许8&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1002</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;康7&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Person</span> <span class="n">person3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">person3</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">1003</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">person3</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;夏66&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;person1&#34;</span><span class="o">,</span><span class="n">person</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;person2&#34;</span><span class="o">,</span><span class="n">person2</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&#34;person3&#34;</span><span class="o">,</span><span class="n">person3</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">map</span><span class="o">;</span><span class="c1">//异步返回数据：{person1:{},person2:{}}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">注意</span><span class="err">：</span> 
</span></span><span class="line"><span class="cl"><span class="n">使用</span><span class="nd">@ResponseBody</span> <span class="n">必须引入jackson</span><span class="o">-</span><span class="n">databind</span> <span class="n">json解析器</span><span class="err">。</span> 
</span></span></code></pre></div><h3 id="二转发和重定向">（二）转发和重定向</h3>
<h4 id="1forward请求转发">1、forward请求转发</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">控制器代码</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test4&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test4</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是请求转发&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;forward:/response/test1&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">运行结果</span><span class="err">：</span><span class="n">详见课堂案例结果</span>	
</span></span></code></pre></div><h4 id="2redirect重定向">2、redirect重定向</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">控制器代码</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test5&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test5</span><span class="o">(</span><span class="n">RedirectAttributes</span> <span class="n">redirectAttributes</span><span class="o">,</span><span class="n">String</span> <span class="n">pname</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是重定向&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// redirectAttributes.addAttribute(&#34;pname&#34;,pname);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">redirectAttributes</span><span class="o">.</span><span class="na">addFlashAttribute</span><span class="o">(</span><span class="s">&#34;pname&#34;</span><span class="o">,</span><span class="n">pname</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;redirect:/response/test1&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">运行结果</span><span class="err">：</span><span class="n">详见课堂案例结果</span>
</span></span><span class="line"><span class="cl"><span class="c1">//注意：重定向携带参数，需要使用对象RedirectAttributes，该对象提供两个方法封装参数addAttribute()和addFlashAttribute()，第一个方法参数会明文显示在浏览器地址栏，第二个方法参会会隐藏，使用第二种方法传参时，获取参数时需要加注解@ModelAttribute;
</span></span></span></code></pre></div><h2 id="三postman工具使用">三、Postman工具使用</h2>
<h3 id="一postman工具介绍">（一）Postman工具介绍</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用户在开发或者调试网络程序或者是网页B/S模式的程序的时候是需要一些方法来跟踪网页请求的，用户可以使用一些网络的监视工具比如著名的Firebug等网页调试工具。今天给大家介绍的这款网页调试工具不仅可以调试简单的css、html、脚本等简单的网页基本信息，它还可以发送几乎所有类型的HTTP请求！Postman在发送网络HTTP请求方面可以说是Chrome插件类产品中的代表产品之一。
</span></span></code></pre></div><h3 id="二postman工具的下载安装">（二）Postman工具的下载安装</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、下载地址：https://www.postman.com/downloads/
</span></span><span class="line"><span class="cl">2、安装步骤：
</span></span><span class="line"><span class="cl">（1）下载安装文件
</span></span><span class="line"><span class="cl">（2）运行安装程序
</span></span><span class="line"><span class="cl">（3）重启电脑自动安装
</span></span><span class="line"><span class="cl">（4）运行
</span></span></code></pre></div><h3 id="三postman工具的使用">（三）Postman工具的使用</h3>
<p><img src="/posts/Java-frame/20220526160511/image-20220526161710207.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/Java-frame/20220526160511/image-20220526161722429.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="四springmvc中的父子容器解析">四、SpringMVC中的父子容器解析</h2>
<h3 id="一springmvc中的父子容器解析">（一）SpringMVC中的父子容器解析</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">Spring和SpringMVC的容器具有父子关系，Spring容器为父容器，SpringMVC为子容器，子容器可以引用父容器中的Bean，而父容器不可以引用子容器中的Bean。
</span></span><span class="line"><span class="cl">配置spring的配置文件时，排出扫描控制层注解：
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.offcn&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;context:exclude-filter</span> <span class="na">type=</span><span class="s">&#34;annotation&#34;</span> <span class="na">expression=</span><span class="s">&#34;org.springframework.stereotype.Controller&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;/context:component-scan&gt;</span>
</span></span><span class="line"><span class="cl">配置springMVC的配置文件时，扫描控制层注解：
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&#34;com.offcn.controller&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;context:include-filter</span> <span class="na">type=</span><span class="s">&#34;annotation&#34;</span> <span class="na">expression=</span><span class="s">&#34;org.springframework.stereotype.Controller&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&lt;/context:component-scan&gt;</span>
</span></span></code></pre></div><h2 id="五springmvc中的文件上传">五、SpringMVC中的文件上传</h2>
<h3 id="一文件上传的必要前提">（一）文件上传的必要前提：</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、form 表单的 enctype 取值必须是：multipart/form-data(默认值是:application/x-www-form-urlencoded)enctype:是表单请求正文的类型
</span></span><span class="line"><span class="cl">2、 method 属性取值必须是 Post
</span></span><span class="line"><span class="cl">3、提供一个文件选择域&lt;input type=”file”/&gt;
</span></span></code></pre></div><h3 id="二文件上传原理分析">（二）文件上传原理分析</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">当 form 表单的 enctype 取值不是默认值后，request.getParameter()将失效。 enctype=”application/x-www-form-urlencoded”时，form 表单的正文内容是：key=value&amp;key=value&amp;key=value;
</span></span><span class="line"><span class="cl">当 form 表单的 enctype 取值为 Mutilpart/form-data 时，请求正文内容就变成：每一部分都是 MIME 类型描述的正文;
</span></span></code></pre></div><h3 id="三springmvc的文件上传">（三）SpringMVC的文件上传</h3>
<h4 id="1构建maven工程添加相关依赖">1、构建maven工程添加相关依赖</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">  <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>commons-fileupload<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>commons-fileupload<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>1.3.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h4 id="2编写-jsp-页面">2、编写 jsp 页面</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&#34;multipart/form-data&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;/file/fileUpload&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;file&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;file&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;上传&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span></code></pre></div><h4 id="3编写控制器">3、编写控制器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">   <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;fileUpload&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">fileUpload</span><span class="o">(</span><span class="n">MultipartFile</span> <span class="n">file</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">File</span> <span class="n">dest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;C:\\Users\\mwx\\Pictures\\&#34;</span><span class="o">+</span><span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//文件上传
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">file</span><span class="o">.</span><span class="na">transferTo</span><span class="o">(</span><span class="n">dest</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h4 id="4配置文件解析器">4、配置文件解析器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&#34;multipartResolver&#34;</span> <span class="na">class=</span><span class="s">&#34;org.springframework.web.multipart.commons.CommonsMultipartResolver&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div><h4 id="5测试文件上传的运行结果">5、测试文件上传的运行结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h2 id="六springmvc中的异常处理">六、SpringMVC中的异常处理</h2>
<h3 id="一项目开发中异常处理的方式介绍">（一）项目开发中异常处理的方式介绍</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">系统中异常包括两类：预期异常和运行时异常 RuntimeException，前者通过捕获异常从而获取异常信息，后者主要通过规范代码开发、测试等手段减少运行时异常的发生。
</span></span></code></pre></div><h3 id="二异常处理的设计思路">（二）异常处理的设计思路</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">系统的 dao、service、controller 出现都通过 throws Exception 向上抛出，最后由 springmvc 前端控制器交由异常处理器进行异常处理。
</span></span></code></pre></div><h3 id="三异常处理的步骤">（三）异常处理的步骤</h3>
<h4 id="1编写异常类和错误页面">1、编写异常类和错误页面</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl">  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;test2&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">test2</span><span class="o">(){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;模拟出现异常&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">10</span><span class="o">/</span><span class="n">0</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">页面error</span><span class="o">.</span><span class="na">jsp详见具体课堂案例</span><span class="err">；</span>
</span></span></code></pre></div><h4 id="2自定义异常处理器">2、自定义异常处理器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyExceptionHandler</span> <span class="kd">implements</span> <span class="n">HandlerExceptionResolver</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">resolveException</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span> <span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;自定义异常处理&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">&#34;error&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="3配置异常处理器">3、配置异常处理器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"> <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;com.offcn.util.MyExceptionHandler&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div><h4 id="4测试异常处理的运行结果">4、测试异常处理的运行结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h2 id="七springmvc中的拦截器使用">七、SpringMVC中的拦截器使用</h2>
<h3 id="一拦截器的介绍和作用">（一）拦截器的介绍和作用</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SpringMVC 的处理器拦截器类似于 Servlet 开发中的过滤器 Filter，用于对处理器进行预处理和后处理。用户可以自己定义一些拦截器来实现特定的功能。谈到拦截器，还要向大家提一个词——拦截器链（Interceptor Chain）。拦截器链就是将拦截器按一定的顺序联结成一条链。在访问被拦截的方法或字段时，拦截器链中的拦截器就会按其之前定义的顺序被调用。
</span></span></code></pre></div><h3 id="二拦截器与过滤器的区别面试题目">（二）拦截器与过滤器的区别【面试题目】</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">过滤器： 
</span></span><span class="line"><span class="cl">过滤器是 servlet 规范中的一部分，任何 java web 工程都可以使用。
</span></span><span class="line"><span class="cl">过滤器在web.xml中的 url-pattern 标签中配置了/*：
</span></span><span class="line"><span class="cl">可以对所有要访问的资源拦截。 /* html css js 
</span></span><span class="line"><span class="cl">底层实现基于回调函数实现： 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">拦截器： 
</span></span><span class="line"><span class="cl">拦截器是 SpringMVC 框架自己的，只有使用了SpringMVC框架的工程才能用。
</span></span><span class="line"><span class="cl">拦截器在springmvc.xml当中进行配置： 
</span></span><span class="line"><span class="cl">只会拦截访问的控制器方法，如果访问的是 jsp，html,css,image 或者js是不会进行拦截的： /**
</span></span><span class="line"><span class="cl">AOP 思想的具体应用。
</span></span></code></pre></div><h3 id="三自定义拦截器的步骤">（三）自定义拦截器的步骤</h3>
<h4 id="1编写一个普通类实现-handlerinterceptor-接口">1、编写一个普通类实现 HandlerInterceptor 接口</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyIntercepter</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层执行器方法前的拦截器
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法前的拦截器&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//校验用户是否登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pname</span><span class="o">=(</span><span class="n">String</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;pname&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="n">pname</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//当前用户已经登录，放行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//当前用户未登录，拦截跳转到登录页面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">&#34;/login.jsp&#34;</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//返回true表示继续执行控制层执行器方法，返回false表示方法结束，不会执行控制层执行器方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法返回时拦截器
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param modelAndView
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                    <span class="nd">@Nullable</span> <span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法返回时拦截器&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法结束后的拦截器
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param ex
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCompletion</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                         <span class="nd">@Nullable</span> <span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法结束后的拦截器&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="2配置拦截器">2、配置拦截器</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--springMVC配置文件中注册拦截器--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mvc:interceptors&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;mvc:interceptor&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&#34;/**&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&#34;/file/login&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;com.offcn.util.MyIntercepter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/mvc:interceptor&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/mvc:interceptors&gt;</span>
</span></span></code></pre></div><h4 id="3测试拦截器的运行结果">3、测试拦截器的运行结果</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">详见课堂案例结果
</span></span></code></pre></div><h3 id="四拦截器的注意事项">（四）拦截器的注意事项</h3>
<h4 id="1拦截器的放行">1、拦截器的放行</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">拦截器中的放行指的是</span><span class="err">：</span><span class="n">如果有下一个拦截器就执行下一个</span><span class="err">，</span><span class="n">如果该拦截器处于拦截器链的最后一个</span><span class="err">，</span><span class="n">则执行控制器中的方法</span><span class="err">。</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span><span class="n">方法返回true表示继续执行控制层执行器方法</span><span class="err">，</span><span class="n">返回false表示方法结束</span><span class="err">，</span><span class="n">不会执行控制层执行器方法</span><span class="err">。</span>
</span></span></code></pre></div><h4 id="2拦截器中方法的说明">2、拦截器中方法的说明</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInterceptor2</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层执行器方法前的拦截器（该方法时在控制层执行器方法前调用，当该方法返回结果为true则继续调用下一个拦截器，如果已经时最后
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 一个拦截器，则调用控制层中的执行器方法；当该方法返回结果为false，则不会继续执行控制层执行器中的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制器方法前拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法返回时拦截器（该方法是控制层执行器方法执行之后，由DispatcherServlet在将结果响应给浏览器前调用的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param modelAndView
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                           <span class="nd">@Nullable</span> <span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法返回时拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法结束后的拦截器（该方法在请求业务处理执行完全结束之后由DispatcherServlet调用执行）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param ex
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCompletion</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nd">@Nullable</span> <span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法结束后的拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="3拦截器的作用路径">3、拦截器的作用路径</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">  <span class="c">&lt;!--拦截器注册--&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mvc:interceptors&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;mvc:interceptor&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;mvc:mapping</span> <span class="na">path=</span><span class="s">&#34;/**&#34;</span><span class="nt">/&gt;</span><span class="c">&lt;!--用于指定拦截的 url--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;mvc:exclude-mapping</span> <span class="na">path=</span><span class="s">&#34;/file/login&#34;</span><span class="nt">/&gt;</span><span class="c">&lt;!--用于指定排除的 url--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">&#34;com.offcn.util.MyIntercepter&#34;</span><span class="nt">&gt;&lt;/bean&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/mvc:interceptor&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/mvc:interceptors&gt;</span>
</span></span></code></pre></div><h4 id="4多个拦截器的执行顺序">4、多个拦截器的执行顺序</h4>
<h5 id="1多个拦截器放行的情况">（1）多个拦截器放行的情况：</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">拦截器1</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInterceptor1</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层执行器方法前的拦截器（该方法时在控制层执行器方法前调用，当该方法返回结果为true则继续调用下一个拦截器，如果已经时最后
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 一个拦截器，则调用控制层中的执行器方法；当该方法返回结果为false，则不会继续执行控制层执行器中的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制器方法前拦截器1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法返回时拦截器（该方法是控制层执行器方法执行之后，由DispatcherServlet在将结果响应给浏览器前调用的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param modelAndView
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                           <span class="nd">@Nullable</span> <span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法返回时拦截器1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法结束后的拦截器（该方法在请求业务处理执行完全结束之后由DispatcherServlet调用执行）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param ex
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCompletion</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nd">@Nullable</span> <span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法结束后的拦截器1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">拦截器2</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyInterceptor2</span> <span class="kd">implements</span> <span class="n">HandlerInterceptor</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层执行器方法前的拦截器（该方法时在控制层执行器方法前调用，当该方法返回结果为true则继续调用下一个拦截器，如果已经时最后
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 一个拦截器，则调用控制层中的执行器方法；当该方法返回结果为false，则不会继续执行控制层执行器中的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @return
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制器方法前拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法返回时拦截器（该方法是控制层执行器方法执行之后，由DispatcherServlet在将结果响应给浏览器前调用的方法）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param modelAndView
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">postHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                           <span class="nd">@Nullable</span> <span class="n">ModelAndView</span> <span class="n">modelAndView</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法返回时拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * 控制层方法结束后的拦截器（该方法在请求业务处理执行完全结束之后由DispatcherServlet调用执行）
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param request
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param response
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param handler
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @param ex
</span></span></span><span class="line"><span class="cl"><span class="cm">     * @throws Exception
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterCompletion</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">                                <span class="nd">@Nullable</span> <span class="n">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法结束后的拦截器2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">执行结果如下</span><span class="err">：</span>
</span></span></code></pre></div><p><img src="/posts/Java-frame/20220526160511/image-20220526161831090.png"
    
    
    
    loading="lazy"
    
    
></p>
<h5 id="2多个拦截器阻断的情况">（2）多个拦截器阻断的情况：</h5>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">第一个拦截器返回true,第二个拦截器返回false时，执行结果如下：
</span></span></code></pre></div><p><img src="/posts/Java-frame/20220526160511/image-20220526161846466.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">第一个拦截器返回false,第二个拦截器返回true时，执行结果如下：
</span></span></code></pre></div><p><img src="/posts/Java-frame/20220526160511/image-20220526161858222.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="八拦截器的简单案例验证用户是否登录">八、拦截器的简单案例（验证用户是否登录）</h2>
<h3 id="一实现思路分析">（一）实现思路分析</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1、定义登录页面，并定义请求映射。
</span></span><span class="line"><span class="cl">2、判断用户名密码是否正确
</span></span><span class="line"><span class="cl">3、如果正确 向 session 中写入用户信息
</span></span><span class="line"><span class="cl">4、返回登录成功。
</span></span><span class="line"><span class="cl">5、拦截用户请求，判断用户是否登录
</span></span><span class="line"><span class="cl">6、如果用户已经登录。放行
</span></span><span class="line"><span class="cl">7、如果用户未登录，跳转到登录页面
</span></span></code></pre></div><h3 id="二案例代码">（二）案例代码</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">1</span><span class="err">、</span><span class="n">登录页面login</span><span class="o">.</span><span class="na">jsp定义</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Title</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&#34;/file/login&#34;</span> <span class="n">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">用户名</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;pname&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">密码</span><span class="err">：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="n">value</span><span class="o">=</span><span class="s">&#34;登录&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">2</span><span class="err">、</span><span class="n">控制器实现</span><span class="err">：</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;login&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">login</span><span class="o">(</span><span class="n">String</span> <span class="n">pname</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">,</span> <span class="n">HttpSession</span> <span class="n">session</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;登录校验成功&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//将登录成功的用户名存放到session中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;pname&#34;</span><span class="o">,</span><span class="n">pname</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;main&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">3</span><span class="err">、</span><span class="n">拦截器实现</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">preHandle</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="n">Object</span> <span class="n">handler</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">            <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;我是控制层执行器方法前的拦截器&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//校验用户是否登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pname</span><span class="o">=(</span><span class="n">String</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;pname&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="n">pname</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//当前用户已经登录，放行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//当前用户未登录，拦截跳转到登录页面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">&#34;/login.jsp&#34;</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//返回true表示继续执行控制层执行器方法，返回false表示方法结束，不会执行控制层执行器方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">4</span><span class="err">、</span><span class="n">注册拦截器</span><span class="err">：</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">mvc</span><span class="o">:</span><span class="n">interceptor</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">mvc</span><span class="o">:</span><span class="n">mapping</span> <span class="n">path</span><span class="o">=</span><span class="s">&#34;/**&#34;</span><span class="o">/&gt;&lt;!--</span><span class="n">用于指定拦截的</span> <span class="n">url</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">mvc</span><span class="o">:</span><span class="n">exclude</span><span class="o">-</span><span class="n">mapping</span> <span class="n">path</span><span class="o">=</span><span class="s">&#34;/file/login&#34;</span><span class="o">/&gt;&lt;!--</span><span class="n">用于指定排除的</span> <span class="n">url</span><span class="o">--&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&lt;</span><span class="n">bean</span> <span class="n">class</span><span class="o">=</span><span class="s">&#34;com.offcn.util.MyIntercepter&#34;</span><span class="o">&gt;&lt;/</span><span class="n">bean</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">mvc</span><span class="o">:</span><span class="n">interceptor</span><span class="o">&gt;</span>
</span></span></code></pre></div><p>spring  :</p>
<p>springMVC :</p>
<p>xmind:【选做】  有道云笔记   。</p>
<p>Linux：  安装， 配置好网络：  静态分配~  【必须】</p>

            </div>
            <hr>
            <div style="text-align: center;">
                <button class="btn"><a href="https://lovemjh.github.io/posts/java-frame/20220526213257/">← Spring-Boot-2</a></button>
                <button class="btn"><a href="https://lovemjh.github.io/posts/java-frame/20220526235888/">SpringCloud →</a></button>
            </div>

            
        </article><div class="aside_content" id="aside_content">
    <div class="card-widget card-info">
        <div class="card-content">
            <div class="card-info-avatar is-center">
                <img class="avatar-img" src="http://q1.qlogo.cn/g?b=qq&nk=2409741052&s=640" alt="avatar">
                <div class="author-info__name">青山</div>
                <div class="author-info__description">悟已往之不谏 知来者之可追</div>
            </div>
            
            <div class="card-info-social-icons is-center">
                <a class="social-icon" href="https://github.com/xioyito" target="_blank">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            

        </div>
    </div>


    <div class="card-widget">
        <div class="card-content">
            <meting-js auto="https://y.qq.com/n/yqq/playlist/7713574197.html">
            </meting-js>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-bullhorn" aria-hidden="true"></i>
                <span>一言</span>
            </div>
            <div id="hitokoto"></div>
        </div>
    </div>
    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <span>今日诗词</span>
            </div>
            <div id="jinrishici-sentence"></div>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-line-chart" aria-hidden="true"></i>
                <span>站点信息</span>
            </div>
            <div class="webinfo">
                <div class="webinfo-item">
                    <div class="webinfo-site-uv-name">本站访客数 :</div>
                    <div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div>
                </div>
                <div class="webinfo-item">
                    <div class="webinfo-site-name">本站总访问量 :</div>
                    <div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card-widget js-toc-w" id="js-toc-w">
        <div class="card-content js-toc">
            
        </div>
    </div>
    
</div></div>
</main>
<footer id="footer">
    <div id="footer-wrap">
        <div class="copyright">&copy;2019 - 2021 BY QING SHAN KE</div>
    </div>
</footer>
</div>

<div class="fan" id="fan" style="
position: fixed;
width: 40px;
height: 120px;
right: -200px;
bottom: 0px;
transition: all 0.5s;
z-index: 99999;
 ">
    <i class="fa fa-cog fa-spin fa-2x"></i><br>
    <i class="fa fa-align-justify fa-2x" id="ff"></i><br>
    <i class="fa fa fa-arrow-up fa-2x" id="aa"></i><br>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>


  
  <script src="/js/jquery.pjax.js"></script> 

    <script type="text/javascript">
            $(function () {
                $(document).pjax('a', '#page', {
                    fragment: '#page',
                    timeout: 5000,
                    cache: false
                });
                $(document).on({
                    'pjax:click': function () {
                        
                        console.log("点击链接");
                    },
                    'pjax:start': function () {
                        
                        console.log("获取请求");
                    },
                    'pjax:end': function () {
                        
                        console.log("请求完成");
                    }
                });
            });


        </script>





<script>
  const imgArr = [
    "https://pic1.zhimg.com/80/v2-23d671bf74a246c54b1256bd2322d461_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-3afad658b44f596b10ec13b2b6d4299d_720w.webp?source=1940ef5c",
    "https://picx.zhimg.com/80/v2-b83d637fafb72fd13a5922aa0038bff9_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-3afad658b44f596b10ec13b2b6d4299d_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-7ee6f104979814d2bf420461e3872475_720w.webp?source=1940ef5c",
    "https://picx.zhimg.com/80/v2-585754b4ab4d49f480b833cbbbf4839f_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-b3d8f74192b2940a1112c93797cc0815_720w.webp?source=1940ef5c",
  ];
  var objs = document.getElementsByClassName('page-img');
  for (var i = 0; i < objs.length; i++) {
    objs[i].id = "myid" + i;
    let randNum = Math.floor(Math.random() * imgArr.length);
    var odiv = document.getElementById("myid" + i);
    odiv.style.backgroundImage = `url(${imgArr[randNum]})`;
    
    odiv.style.backgroundRepeat = "no-repeat";
    odiv.style.backgroundPosition = "0px 0px";
  }
</script>

<script>
    var a = 0;
    ff.onclick = function () {
        if (a === 0) {
            $(".js-toc-w").css("position", "fixed"); 
            $(".js-toc-w").css("bottom", "10px");
            $(".js-toc-w").css("right", "40px");

            a++;
        } else {
            $(".js-toc-w").css("position", "static");
            a--;
        }
    }

    aa.onclick = function () {
        window.scrollTo({     
            top: 0,            
            behavior: "smooth"   
        })
    }

    
    window.onload = function () {
        $(".aplayer").css("background", "rgba(0, 0, 0, 0)");
        

        
    } 
</script>
<script>
    $(window).scroll(function () {
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop
        console.log(scrollY + "----------------------")
        if (scrollY > 40) {
            $('.fan').css("right", "0px");
        } else {
            $('.fan').css("right", "-220px");
        }
    });
    $(function () {
        
        var start_height = $(document).scrollTop();
        
        var navigation_height = $('.navigation').outerHeight();
        $(window).scroll(function () {
            
            var end_height = $(document).scrollTop();
            
            if (end_height > navigation_height) {
                $('.navigation').addClass('hide');
            } else {
                $('.navigation').removeClass('hide');
            }
            
            if (end_height < start_height) {
                $('.navigation').removeClass('hide');
            }
            
            start_height = $(document).scrollTop();
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.js"></script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.js" type="module"></script>

<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js" async></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>


<script src="https://unpkg.com/nplayer@latest/dist/index.min.js"></script>


<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>





<script src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.8/js/maodian.js"></script>


<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3, h4, h5 ,h6',
        
        hasInnerContainers: false,
        
    });
</script>


<script type="text/javascript">
    console.clear();
    console.log("%c 有朋自远方来, 不亦说乎.", "background:#24272A; color:#ffffff", "");
    console.log("%c Github %c", "background:#24272A; color:#ffffff", "", "https://github.com/laoxuai");
    console.log("%c 版本号: %c", "background:#24272A; color:#ffffff", "", "1.0.0");

    (function ($) {
        $.fn.snow = function (options) {
            var $flake = $('<div id="snowbox" />').css({ 'position': 'absolute', 'z-index': '9999', 'top': '-50px' }).html('&#10052;'),
                documentHeight = $(document).height(),
                documentWidth = $(document).width(),
                defaults = {
                    minSize: 10,
                    maxSize: 20,
                    newOn: 1000,
                    flakeColor: "#AFDAEF"  
                },
                options = $.extend({}, defaults, options);
            var interval = setInterval(function () {
                var startPositionLeft = Math.random() * documentWidth - 100,
                    startOpacity = 0.5 + Math.random(),
                    sizeFlake = options.minSize + Math.random() * options.maxSize,
                    endPositionTop = documentHeight - 200,
                    endPositionLeft = startPositionLeft - 500 + Math.random() * 500,
                    durationFall = documentHeight * 10 + Math.random() * 5000;
                $flake.clone().appendTo('body').css({
                    left: startPositionLeft,
                    opacity: startOpacity,
                    'font-size': sizeFlake,
                    color: options.flakeColor
                }).animate({
                    top: endPositionTop,
                    left: endPositionLeft,
                    opacity: 0.2
                }, durationFall, 'linear', function () {
                    $(this).remove()
                });
            }, options.newOn);
        };
    })(jQuery);
    $(function () {
        $.fn.snow({
            minSize: 5,  
            maxSize: 50, 
            newOn: 800   
        });
    });

    
    var OriginTitle = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            
            document.title = '╭(°A°`)╮ 页面崩溃啦 ~';
            clearTimeout(titleTime);
        }
        else {
            $('[rel="icon"]').attr('href', "/favicon.ico");
            document.title = '(ฅ>ω<*ฅ) 噫又好啦 ~' + OriginTitle;
            titleTime = setTimeout(function () {
                document.title = OriginTitle;
            }, 2000);
        }
    });
</script></body>
</html>