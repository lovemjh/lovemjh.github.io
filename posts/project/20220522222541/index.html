<!DOCTYPE html>
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=no">
  <meta name="description" content="MJH Blog & MEET HTML Theme">
  <title>小课堂</title>
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.4/tocbot.css">
  
  <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/agate.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
  <script>
    hljs.highlightAll();
  </script>
  
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.5.2/animate.min.css">
  <script type="text/javascript">
    if (!!window.ActiveXObject || "ActiveXObject" in window) { 
      alert('朋友，上古浏览器不支持呢~');
    }
  </script>

  <style>
    .sidebar {
      z-index: 998;
      position: fixed;
      left: -200px;
      width: 200px;
      height: 100%;
      background: #ffffff;
      transition: all .5s ease;
    }

    .sidebar .top {
      font-size: 22px;
      color: rgb(0, 0, 0);
      text-align: center;
      height: 60px;
      line-height: 60px;
      background-color: rgb(255, 255, 255);
      user-select: none;

    }

    .sidebar ul {
      list-style: none;
    }

    .sidebar ul a {
      display: block;
      height: 100%;
      width: 100%;
      text-align: center;
      line-height: 45px;
      font-size: 18px;
      color: rgb(0, 0, 0);
      box-sizing: border-box;
      border-top: 1px solid rgb(255, 0, 0);
      border-bottom: 1px solid rgb(0, 17, 255);
      transition: .4s;
    }

    .sidebar ul li:hover a {
      padding-left: 30px;
      color: #7c4242;
      border-left: 5px solid #ffffff;
      transition: all 0.5s;
    }

    .sidebar ul a i {
      margin-right: 16px;
    }

    #check {
      display: none;
    }

    label #btn,
    label #cancel {
      position: fixed;
      cursor: pointer;
      background-color: #000000;
      border-radius: 3px;
    }

    label #btn {
      left: 5px;
      top: 7px;
      font-size: 25px;
      color: #fff;
      padding: 6px 10px;
      transition: all .5s;
      z-index: 999;
    }

    label #cancel {
      z-index: 999;
      left: -145px;
      top: 10px;
      font-size: 25px;
      color: rgb(255, 255, 255);
      padding: 4px 9px;
      transition: all .5s ease;
    }

    #check:checked~.sidebar {
      left: 0;
    }

    #check:checked~label #btn {
      left: 10px;
      opacity: 0;
      pointer-events: none;
    }

    #check:checked~label #cancel {
      left: 150px;
    }







     
    ::-webkit-scrollbar {
      width: 8px;
      height: 6px
    }

     
    ::-webkit-scrollbar-track {
      background-color: transparent;
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }

     
    ::-webkit-scrollbar-thumb {
      background-color: #30B07F;
      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 100%, transparent 100%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }






     
    .navigation {
      width: 100%;
      height: 50px;
       
      position: fixed;
      left: 0;
      top: 0;
      text-align: center;
      transition: top 0.5s;
      z-index: 999;

      background: rgba(255, 255, 255, .4) !important;
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      backdrop-filter: saturate(180%) blur(20px) !important;
    }

     
    .hide {
      top: -60px;
    }



     
    .btn {
      width: 120px;
      height: 40px;
      background: linear-gradient(315deg, #a4d8fa 0%, #5eb1e9 74%);
      border: none;
      border-radius: 10px;
      font-family: 'Lato', sans-serif;
      font-weight: 500;
      font-size: smaller;
      color: #fff;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, .5),
        7px 7px 20px 0px rgba(0, 0, 0, .1),
        4px 4px 5px 0px rgba(0, 0, 0, .1);
      outline: none;
      position: relative;
      z-index: 0;
    }

    .btn::before {
      position: absolute;
      content: '';
      left: 0;
      bottom: 0;
      width: 100%;
      height: 0;
      transition: all 0.3s ease;
      border-radius: 10px;
      background: linear-gradient(315deg, #4dccc6 0%, #96e4df 74%);
      z-index: -1;
    }

    .btn:hover::before {
      top: 0;
      height: 100%;
    }

    .btn:active {
      top: 2px;
    }




     
     

     
    * {
      font-family: LXGW WenKai
    }

    * {
      font-weight: bold
    }

    body {
      font-family: LXGW WenKai;
    }




     
    .pagination {
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      height: 50px;
      margin: 0px;
    }

    .pagination a {
      text-decoration: none;
      font-size: 22px;
      color: rgb(0, 0, 0);
    }

    .page-item {
      display: inline;
      margin-right: 20px;
    }

    #Background_animation { 
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    }

  </style>

</head>
    <body style="background-color: rgb(229, 204, 15);">
    
<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" viewBox="0 0 100 100" id="Background_animation">
  <defs>
      <style>
          @keyframes rotate {
              100% {
                  transform: rotate(360deg);
              }
          }
          .out-top {
              animation: rotate 20s linear infinite;
              transform-origin: 13px 25px;
          }
          .in-top {
              animation: rotate 10s linear infinite;
              transform-origin: 13px 25px;
          }
          .out-bottom {
              animation: rotate 25s linear infinite;
              transform-origin: 84px 93px;
          }
          .in-bottom {
              animation: rotate 15s linear infinite;
              transform-origin: 84px 93px;
          }
      </style>
  </defs>
  <path fill="#9b5de5" class="out-top" d="M37-5C25.1-14.7,5.7-19.1-9.2-10-28.5,1.8-32.7,31.1-19.8,49c15.5,21.5,52.6,22,67.2,2.3C59.4,35,53.7,8.5,37-5Z"/>
  <path fill="#f15bb5" class="in-top" d="M20.6,4.1C11.6,1.5-1.9,2.5-8,11.2-16.3,23.1-8.2,45.6,7.4,50S42.1,38.9,41,24.5C40.2,14.1,29.4,6.6,20.6,4.1Z"/>
  <path fill="#00bbf9" class="out-bottom" d="M105.9,48.6c-12.4-8.2-29.3-4.8-39.4.8-23.4,12.8-37.7,51.9-19.1,74.1s63.9,15.3,76-5.6c7.6-13.3,1.8-31.1-2.3-43.8C117.6,63.3,114.7,54.3,105.9,48.6Z"/>
  <path fill="#00f5d4" class="in-bottom" d="M102,67.1c-9.6-6.1-22-3.1-29.5,2-15.4,10.7-19.6,37.5-7.6,47.8s35.9,3.9,44.5-12.5C115.5,92.6,113.9,74.6,102,67.1Z"/>
</svg>

  <input type="checkbox" id="check">
<label for="check">
  <i class="fa fa-bars" id="btn"></i>
  <i class="fa fa-times" id="cancel"></i>
</label>
<div class="sidebar">
  <div class="top">Hi~</div>
  <ul>
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</div><nav class="navigation">
  <ul class="ull">
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</nav>
<div id="body-wrap">
  
  <div style="width: 100%; height: 65vh;">
    <div id="page_site-info">
      <div id="site-title">
        <input type="checkbox" id="check">
        <br>
        <span class="blogtitle"></span>
        
        
        <div class="post-header">
          <span>
            
            <i class="fa fa-calendar"></i>
            2022-05-22&nbsp;
          </span>
          <span>
            
            <i class="fa fa-calendar-check-o"></i>
            2022-05-22&nbsp;&nbsp;&nbsp;
          </span>
          <span>
            
            <i class="fa fa-edit"></i>
            6922 字
          </span>&nbsp;
          <span>
            
            <i class="fa fa-paper-plane"></i>
            14 分钟
          </span>
        </div><div class="container-ctgtag">
	<div class="taxonomy" style="display: flex; justify-content: center;">
		
		<div class="ctg" style="display: flex; justify-content: center; margin-right: 20px;">
			
			<div style="margin-right: 10px;">
				
				<a href="/categories/"></a>
			</div>
			
		</div>
		<div class="tag" style="display: flex; justify-content: center;">
			
			<div style="margin-right: 10px;">
				
				<a href="/tags/"></a></i>
			</div>
			
		</div>
	</div>
</div>

        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
        <script>
          var typed = new Typed(".blogtitle", {
            strings: ['小课堂'],
            startDelay: 300,
            typeSpeed: 100,
            loop: true,
            backSpeed: 50,
            showCursor: true
          });
        </script>
      </div>
    </div>
  </div>
  
<main id="content-outer">
    <div class="layout_page" id="content-inner">
        <article id="page" style="margin-right: 10px;">
            
            <div class="js-toc-content" style="height: 100%;">
                <h1 id="项目简介">项目简介</h1>
<h2 id="后台管理系统">后台管理系统</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Text" data-lang="Text"><span class="line"><span class="cl"> - 用户管理  
</span></span><span class="line"><span class="cl">   用户添加  
</span></span><span class="line"><span class="cl">   用户修改  
</span></span><span class="line"><span class="cl">   用户详情  
</span></span><span class="line"><span class="cl">   删除用户  
</span></span><span class="line"><span class="cl">   搜索用户  
</span></span><span class="line"><span class="cl">   分页展示  
</span></span><span class="line"><span class="cl"> - 课程管理  
</span></span><span class="line"><span class="cl">   课程的上传  
</span></span><span class="line"><span class="cl">   课程的修改  
</span></span><span class="line"><span class="cl">   课程的删除  
</span></span><span class="line"><span class="cl">   课程的明细(章节)  
</span></span><span class="line"><span class="cl">   搜索  
</span></span><span class="line"><span class="cl">   分页  
</span></span><span class="line"><span class="cl"> - 选课管理  
</span></span><span class="line"><span class="cl">   选课的修改  
</span></span><span class="line"><span class="cl">   选课的详情  
</span></span><span class="line"><span class="cl">   选课的删除  
</span></span><span class="line"><span class="cl">   搜索  
</span></span><span class="line"><span class="cl">   分页
</span></span></code></pre></div><h2 id="用户系统">用户系统</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Text" data-lang="Text"><span class="line"><span class="cl"> - 用户注册和登录  
</span></span><span class="line"><span class="cl"> - 首页分类展示  
</span></span><span class="line"><span class="cl"> - 全部课程展示(分类、分页和搜索)  
</span></span><span class="line"><span class="cl"> - 课程详情  
</span></span><span class="line"><span class="cl"> - 购买课程  
</span></span><span class="line"><span class="cl"> - 课程播放  
</span></span><span class="line"><span class="cl"> - 个人中心课程展示
</span></span></code></pre></div><h2 id="开发项目">开发项目</h2>
<p><img src="/posts/project/20220522222541/image-20220522223233067.png"
    
    
    
    loading="lazy"
    
    
>
<img src="/posts/project/20220522222541/image-20220522223244189.png"
    
    
    
    loading="lazy"
    
    
>
<img src="/posts/project/20220522222541/image-20220522223258239.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="搭建环境">搭建环境</h1>
<p> ① 导入页面<br>
 ② 创建项目
 ③ 先引入依赖 pom.xml
 ④ 搭建目录结构
 ⑤ 引入 工具类 配置文件 等
 ⑥ 导入数据库
<img src="/posts/project/20220522222541/image-20220522223317566.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="验证码实现">验证码实现</h2>
<p> ① 创建Servlet生成验证码</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ujiuye.web.servlet.back</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">cn.dsna.util.images.ValidateCode</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.annotation.WebServlet</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.servlet.http.HttpSession</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * 生成验证码
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#34;ImgCodeServlet&#34;</span><span class="o">,</span> <span class="n">urlPatterns</span> <span class="o">=</span> <span class="s">&#34;/imgCode&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ImgCodeServlet</span> <span class="kd">extends</span> <span class="n">HttpServlet</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ServletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 生成验证码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 1.1  创建核心对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 参数1：宽度  参数2：高度  参数3：字符个数 参数4：干扰元素线的条数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">ValidateCode</span> <span class="n">code</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ValidateCode</span><span class="o">(</span><span class="n">100</span><span class="o">,</span> <span class="n">30</span><span class="o">,</span> <span class="n">4</span><span class="o">,</span> <span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 将生成的验证码字符 保存到session中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;code&#34;</span><span class="o">,</span> <span class="n">code</span><span class="o">.</span><span class="na">getCode</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 1.2 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">code</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p> ② 后台登录页面 显示验证码 login.html
<img src="/posts/project/20220522222541/image-20220522224227081.png"
    
    
    
    loading="lazy"
    
    
>
<img src="/posts/project/20220522222541/image-20220522224235660.png"
    
    
    
    loading="lazy"
    
    
>
<img src="/posts/project/20220522222541/image-20220522224241615.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="登录实现">登录实现</h2>
<p> ① 登录页面点击登录按钮
<img src="/posts/project/20220522222541/image-20220522224540339.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">  <span class="c1">// 点击登录按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">submitForm</span><span class="p">(</span><span class="nx">ruleForm</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 校验表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="nx">ruleForm</span><span class="p">].</span><span class="nx">validate</span><span class="p">(</span><span class="nx">valid</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;method&#34;</span><span class="p">,</span> <span class="s2">&#34;login&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;username&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;password&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;imageCode&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">imageCode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 校验通过 提交表单信息到后台校验
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/smallU_1012/user&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 返回结果  消息提示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// console.log(resp)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="mi">500</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 提示警告信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;warning&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 提示成功信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;success&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// 跳转到首页 2s后跳
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="s2">&#34;window.location.href=&#39;http://127.0.0.1:5500/smallU_back/html/index.html&#39;&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 校验失败 消息提示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">message</span><span class="o">:</span> <span class="s2">&#34;表单校验未通过&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;warning&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>② 请求到UserServlet中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 处理登录的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">login</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;password&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">imageCode</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;imageCode&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">code</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;code&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 判断验证码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">code</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">imageCode</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 验证码正确 调用业务 处理登录判断
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">serivce</span><span class="o">.</span><span class="na">checkLogin</span><span class="o">(</span><span class="n">username</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 登录失败  提示用户名和密码不匹配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;用户名和密码不匹配！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 校验角色  状态
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()==</span><span class="n">1</span> <span class="o">&amp;&amp;</span> <span class="n">user</span><span class="o">.</span><span class="na">getRole</span><span class="o">()==</span><span class="n">1</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 登录成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;登录成功！&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 登录失败 提示权限不足
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;权限不足！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 验证码错误
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;验证码输入有误！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 响应 信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="首页权限">首页权限</h2>
<p>正常登录成功跳转到首页，如果没有登录成功不允许跳转首页。
① 加载index.html之前 判断管理员是否登录
<img src="/posts/project/20220522222541/image-20220522224608446.png"
    
    
    
    loading="lazy"
    
    
>
② Servlet中判断用户是否登录 响应对应信息</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 判断管理员是否登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">isUserLogin</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取session
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 获取用户信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="n">User</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">user</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;获取用户信息失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取用户信息成功！&#34;</span><span class="o">,</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="首页信息回显和退出登录">首页信息回显和退出登录</h2>
<p>① 页面回显用户信息
<img src="/posts/project/20220522222541/image-20220522224731827.png"
    
    
    
    loading="lazy"
    
    
>
② 退出登录
<img src="/posts/project/20220522222541/image-20220522224743616.png"
    
    
    
    loading="lazy"
    
    
>
<img src="/posts/project/20220522222541/image-20220522224754486.png"
    
    
    
    loading="lazy"
    
    
>
后台处理清除session的用户信息</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 退出登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">loginOut</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 获取session
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 2. 清除用户信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">session</span><span class="o">.</span><span class="na">removeAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 3. 响应结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;退出成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h1 id="用户管理">用户管理</h1>
<h2 id="首页数据获取">首页数据获取</h2>
<p>① 后台的首页index.html中点击用户管理按钮
<img src="/posts/project/20220522222541/image-20220522224906994.png"
    
    
    
    loading="lazy"
    
    
>
② 在User/index.html中通过钩子函数 请求后台获取数据
<img src="/posts/project/20220522222541/image-20220522224913961.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="c1">// 获取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">findByPage</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// 请求后台获取数据 分页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&#34;http://localhost:8080/smallU_1012/user?method=findByPage&amp;currentPage=&#34;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">currentPage</span><span class="o">+</span><span class="s2">&#34;&amp;pageSize=&#34;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">pageSize</span>
</span></span><span class="line"><span class="cl">        <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 获取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">200</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">currentPage</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">currentPage</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">pageSize</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pageSize</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">totalCount</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">totalCount</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">totalPage</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">totalPage</span>
</span></span><span class="line"><span class="cl">                <span class="k">this</span><span class="p">.</span><span class="nx">tableData</span> <span class="o">=</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">list</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>③ 后台Servlet处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 用户分页查询
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findByPage</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">currentPage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;currentPage&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 获取分页数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="n">serivce</span><span class="o">.</span><span class="na">findUserByPage</span><span class="o">(</span><span class="n">currentPage</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 封装响应数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据成功！&#34;</span><span class="o">,</span> <span class="n">pageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>④ 后台业务层 封装的PageBean对象</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">PageBean</span> <span class="nf">findUserByPage</span><span class="o">(</span><span class="n">String</span> <span class="n">currentPage</span><span class="o">,</span> <span class="n">String</span> <span class="n">pageSize</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 处理分页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 1. 创建PageBean对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PageBean</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 一页显示个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setPageSize</span><span class="o">(</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 数据总个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findUserCount</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalCount</span><span class="o">(</span><span class="n">totalCount</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 总页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalPage</span> <span class="o">=</span>  <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">totalCount</span><span class="o">*</span><span class="n">1</span><span class="o">.</span><span class="na">0</span><span class="o">/</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalPage</span><span class="o">(</span><span class="n">totalPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// 5. 当前页的页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">cp</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">currentPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setCurrentPage</span><span class="o">(</span><span class="n">cp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 6. 当前页的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findUserByPage</span><span class="o">(</span><span class="n">cp</span><span class="o">,</span> <span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pageBean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>⑤ User/index.html中获取响应的数据
<img src="/posts/project/20220522222541/image-20220522225044311.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="用户添加">用户添加</h2>
<p>① User/index.html 点击用户点击按钮
<img src="/posts/project/20220522222541/image-20220522225114177.png"
    
    
    
    loading="lazy"
    
    
>
② 在addUser.html中输入 用户信息  提交后台保存即可
<img src="/posts/project/20220522222541/image-20220522225340807.png"
    
    
    
    loading="lazy"
    
    
>
 发送请求提交数据到后台</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">    <span class="c1">// 点击提交按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">submitForm</span><span class="p">(</span><span class="nx">formName</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// 提交数据到后台
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 1. 校验表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="nx">formName</span><span class="p">].</span><span class="nx">validate</span><span class="p">(</span><span class="nx">valid</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 校验成功  获取表单数据 发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// 2. 获取表单数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;method&#34;</span><span class="p">,</span> <span class="s2">&#34;addUser&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>  
</span></span><span class="line"><span class="cl">            <span class="c1">// 3. 发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/smallU_1012/user&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 4. 获取响应结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;success&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// 跳转到 User/index.html
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="s2">&#34;window.location.href=&#39;http://127.0.0.1:5500/smallU_back/html/User/index.html&#39;&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">message</span><span class="o">:</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warnings&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 校验失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">                <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;表单校验未通过&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p> 
后台Servlet处理<br>
 </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 添加用户的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addUser</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BeanUtils</span><span class="o">.</span><span class="na">populate</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理添加业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">serivce</span><span class="o">.</span><span class="na">saveUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据返回结果 封装响应结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 添加成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;添加用户成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 添加失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;添加用户失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>         <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">         <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p> 
 ③ 在addUser.html 重置按钮
<img src="/posts/project/20220522222541/image-20220522225941172.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522225947555.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="修改用户">修改用户</h2>
<p> ① User/index.html 点击修改按钮
<img src="/posts/project/20220522222541/image-20220522230021501.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230028162.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230034453.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 点击确认按钮  请求后台修改数据库数据
<img src="/posts/project/20220522222541/image-20220522230054124.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ③ 后台的Servlet获取修改后的数据 去修改数据库
 </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 修改用户信息的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateUser</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BeanUtils</span><span class="o">.</span><span class="na">populate</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理修改业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">serivce</span><span class="o">.</span><span class="na">updateUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 修改成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;修改成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 修改失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;修改失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="用户详情">用户详情</h2>
<p>① User/index.html中的详情按钮
<img src="/posts/project/20220522222541/image-20220522230416876.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230423283.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="用户删除">用户删除</h2>
<p>① 点击删除选中按钮之前 获取删除信息
<img src="/posts/project/20220522222541/image-20220522230510608.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230516593.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 点击删除选中按钮 执行函数
<img src="/posts/project/20220522222541/image-20220522230521973.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="nx">delAll</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 提示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$confirm</span><span class="p">(</span><span class="sb">`确定要删除吗？`</span><span class="p">,</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 确定
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 2. 获取选中 复选框数据的uid
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">multipleSelection</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">delarr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">multipleSelection</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">uid</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">delarr</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 3. 发送请求到后台
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nx">axios</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/smallU_1012/user?method=delUser&amp;uids=&#34;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">delarr</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 4. 获取响应数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 删除成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="c1">// 重新加载当前页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="s2">&#34;window.location.href=&#39;http://127.0.0.1:5500/smallU_back/html/User/index.html&#39;&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 删除失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s2">&#34;请选择要删除的数据！&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="k">catch</span><span class="p">(()=&gt;{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 取消
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">message</span><span class="p">(</span><span class="s2">&#34;取消删除！&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></div><p>③ 后台的Servlet中处理删除</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 删除用户的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delUser</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">uids</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;uids&#34;</span><span class="o">);</span> <span class="c1">// 1,2,3,4,5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理删除业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">serivce</span><span class="o">.</span><span class="na">deleteUser</span><span class="o">(</span><span class="n">uids</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据删除结果 封装响应数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 删除成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;删除成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 删除失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;删除失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="用户搜索">用户搜索</h2>
<p>① User/index.html中的搜索框输入内容 失去焦点搜索
<img src="/posts/project/20220522222541/image-20220522230707537.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230712561.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522230719719.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 请求后台获取数据
<img src="/posts/project/20220522222541/image-20220522230736073.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">  <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">PageBean</span> <span class="nf">findUserByPage</span><span class="o">(</span><span class="n">String</span> <span class="n">currentPage</span><span class="o">,</span> <span class="n">String</span> <span class="n">pageSize</span><span class="o">,</span> <span class="n">String</span> <span class="n">search</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 处理分页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 1. 创建PageBean对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PageBean</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 一页显示个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setPageSize</span><span class="o">(</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 数据总个数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findUserCount</span><span class="o">(</span><span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalCount</span><span class="o">(</span><span class="n">totalCount</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 总页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalPage</span> <span class="o">=</span>  <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">totalCount</span><span class="o">*</span><span class="n">1</span><span class="o">.</span><span class="na">0</span><span class="o">/</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalPage</span><span class="o">(</span><span class="n">totalPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// 5. 当前页的页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">cp</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">currentPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 问题：搜索的总页码小于当前页 的话  没有数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 解决：如果搜索的总页码小于当前页 的话 当前页 为第一页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">cp</span> <span class="o">&gt;</span> <span class="n">totalPage</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">cp</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setCurrentPage</span><span class="o">(</span><span class="n">cp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 6. 当前页的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findUserByPage</span><span class="o">(</span><span class="n">cp</span><span class="o">,</span> <span class="n">ps</span><span class="o">,</span> <span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pageBean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p><img src="/posts/project/20220522222541/image-20220522230816418.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="课程管理">课程管理</h1>
<h2 id="上传课程">上传课程</h2>
<p>① index.html中点击课程管理按钮</p>
<h3 id="上传文件">上传文件</h3>
<p> ① course/index.html中点击上传课程按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522231029018.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 图片和视频的上传 点上传服务器按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522231037325.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ③ 提交对应的上传组件 触发:http-request</p>
<p><img src="/posts/project/20220522222541/image-20220522231048294.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ④ 执行:http-request对应的函数</p>
<p><img src="/posts/project/20220522222541/image-20220522231106663.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ⑤ 后台Servlet处理文件上传</p>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 处理文件上传的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">uploadFile</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">ServletException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取文件上传的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Part</span> <span class="n">part</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getPart</span><span class="o">(</span><span class="s">&#34;file&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="na">getSubmittedFileName</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&#34;http://localhost:8080/upload_1012/&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 封装响应内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.jpg&#34;</span><span class="o">)</span> <span class="o">||</span> <span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.jpeg&#34;</span><span class="o">)</span> <span class="o">||</span> <span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.png&#34;</span><span class="o">)</span> <span class="o">||</span> <span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.gif&#34;</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 图片上传成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>             <span class="n">fileName</span> <span class="o">=</span> <span class="n">FileUploadUtils</span><span class="o">.</span><span class="na">uploadFile</span><span class="o">(</span><span class="n">part</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;图片上传成功！&#34;</span><span class="o">,</span> <span class="n">url</span><span class="o">+</span><span class="n">fileName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.mp4&#34;</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 视频上传成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">fileName</span> <span class="o">=</span> <span class="n">FileUploadUtils</span><span class="o">.</span><span class="na">uploadFile</span><span class="o">(</span><span class="n">part</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;视频上传成功！&#34;</span><span class="o">,</span> <span class="n">url</span><span class="o">+</span><span class="n">fileName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 格式不合法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;上传文件不合法！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h3 id="删除上传文件">删除上传文件</h3>
<p> ① 点击文件上传组件的上传图标</p>
<p><img src="/posts/project/20220522222541/image-20220522231405371.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522231412373.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 文件删除后台处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 处理文件删除
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeFile</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 获取要删除文件的名字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;fileUrl&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 2. 获取文件的路径 file
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;D://upload_1012//&#34;</span><span class="o">+</span><span class="n">fileName</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">exists</span><span class="o">()){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 解决删除失败 流信息引用关闭
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">gc</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">2000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="kt">boolean</span> <span class="n">d</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">delete</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="n">d</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="o">(</span><span class="n">fileName</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">&#34;.mp4&#34;</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">                <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;视频删除成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;图片删除成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;删除失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;文件不存在！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 3. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h3 id="文件个数限制">文件个数限制</h3>
<p><img src="/posts/project/20220522222541/image-20220522231440494.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="课程添加">课程添加</h3>
<p>① course/addCourse.html中点击 确定按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522231449805.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"><span class="c1">// 点击确定按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">submitForm</span><span class="p">(</span><span class="nx">formName</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 校验表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="nx">formName</span><span class="p">].</span><span class="nx">validate</span><span class="p">(</span><span class="nx">valid</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 表单校验通过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// 2. 获取表单数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;method&#34;</span><span class="p">,</span> <span class="s2">&#34;addCourse&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;courseImage&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialogImageUrl</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dialogImageUrl</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;courseVideo&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialogVedioUrl</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">dialogVedioUrl</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 3. 携带信息发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/smallU_1012/courses&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 4. 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">200</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="c1">// 跳转到课程首页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="s2">&#34;window.location.href=&#39;http://127.0.0.1:5500/smallU_back/html/course/index.html&#39;&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 失败 提示信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 表单未通过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s2">&#34;表单校验未通过！&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>② 后台的Servlet处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 处理课程添加
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span>  <span class="kt">void</span> <span class="nf">addCourse</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Course</span> <span class="n">course</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Course</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BeanUtils</span><span class="o">.</span><span class="na">populate</span><span class="o">(</span><span class="n">course</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">saveCourse</span><span class="o">(</span><span class="n">course</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 添加成功
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;课程添加成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 添加失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;课程添加失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="课程首页展示">课程首页展示</h2>
<p>① 访问course/index.html时先执行钩子函数获取数据</p>
<p><img src="/posts/project/20220522222541/image-20220522231603516.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 调用获取数据的方法</p>
<p><img src="/posts/project/20220522222541/image-20220522231610314.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>③ 后台Servlet处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 课程首页展示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findByPage</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">currentPage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;currentPage&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findCourseByPage</span><span class="o">(</span><span class="n">currentPage</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">pageBean</span><span class="o">.</span><span class="na">getList</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据成功！&#34;</span><span class="o">,</span> <span class="n">pageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;没有数据！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="课程搜索">课程搜索</h2>
<p><img src="/posts/project/20220522222541/image-20220522231715260.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522231723488.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 课程首页展示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findByPage</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">currentPage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;currentPage&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">search</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;search&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findCourseByPage</span><span class="o">(</span><span class="n">currentPage</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">,</span> <span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">pageBean</span><span class="o">.</span><span class="na">getList</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据成功！&#34;</span><span class="o">,</span> <span class="n">pageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;没有数据！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">PageBean</span> <span class="nf">findCourseByPage</span><span class="o">(</span><span class="n">String</span> <span class="n">currentPage</span><span class="o">,</span> <span class="n">String</span> <span class="n">pageSize</span><span class="o">,</span> <span class="n">String</span> <span class="n">search</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 处理课程首页的业务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PageBean</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 将一页显示个数 封装到PageBean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setPageSize</span><span class="o">(</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 总个数 封装PageBean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findCourseCount</span><span class="o">(</span><span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalCount</span><span class="o">(</span><span class="n">totalCount</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 总页数 封装到PageBean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">totalPage</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">totalCount</span><span class="o">*</span><span class="n">1</span><span class="o">.</span><span class="na">0</span><span class="o">/</span><span class="n">ps</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setTotalPage</span><span class="o">(</span><span class="n">totalPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 当前页码 封装PageBean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">int</span> <span class="n">cp</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">currentPage</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(</span><span class="n">cp</span> <span class="o">&gt;</span> <span class="n">totalPage</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">cp</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setCurrentPage</span><span class="o">(</span><span class="n">cp</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 5. 当前页数据 封装到PageBean
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findCourseByPage</span><span class="o">(</span><span class="n">cp</span><span class="o">,</span> <span class="n">ps</span><span class="o">,</span> <span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">pageBean</span><span class="o">.</span><span class="na">setList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">pageBean</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="课程修改">课程修改</h2>
<p>① 在course/index.html 中点击修改按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522231822227.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522231828831.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 处理文件上传 和 删除 同课程添加一样</p>
<p>③ 点击修改对话框中的确认按钮
<img src="/posts/project/20220522222541/image-20220522231837744.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 修改确认按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">submitForm</span><span class="o">(</span><span class="n">formName</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 校验表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="o">.</span><span class="na">$refs</span><span class="o">[</span><span class="n">formName</span><span class="o">].</span><span class="na">validate</span><span class="o">(</span><span class="n">valid</span> <span class="o">=&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 判断
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">valid</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 表单校验通过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="c1">// 3. 获取修改表单的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">let</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FormData</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;method&#34;</span><span class="o">,</span> <span class="s">&#34;updateCourse&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span><span class="o">(</span><span class="n">let</span> <span class="n">key</span> <span class="n">in</span> <span class="k">this</span><span class="o">.</span><span class="na">ruleForm</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">p</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">ruleForm</span><span class="o">[</span><span class="n">key</span><span class="o">])</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">p</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;courseImage&#34;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">dialogImageUrl</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dialogImageUrl</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)+</span><span class="n">1</span><span class="o">))</span>
</span></span><span class="line"><span class="cl">                <span class="n">p</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;courseVideo&#34;</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">dialogVedioUrl</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dialogVedioUrl</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)+</span><span class="n">1</span><span class="o">))</span>
</span></span><span class="line"><span class="cl">                <span class="n">axios</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/smallU_1012/courses&#34;</span><span class="o">,</span> <span class="n">p</span><span class="o">).</span><span class="na">then</span><span class="o">(</span><span class="n">resp</span> <span class="o">=&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 4. 获取响应结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">code</span> <span class="o">==</span> <span class="n">200</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">.</span><span class="na">success</span><span class="o">(</span><span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">msg</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">dialogFormVisible1</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">.</span><span class="na">warning</span><span class="o">(</span><span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">msg</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">})</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 表单校验失败
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">this</span><span class="o">.</span><span class="na">$message</span><span class="o">.</span><span class="na">warning</span><span class="o">(</span><span class="s">&#34;表单校验失败！&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>④ 后台Servlet处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 课程首页展示
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findByPage</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">currentPage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;currentPage&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">search</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;search&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findCourseByPage</span><span class="o">(</span><span class="n">currentPage</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">,</span> <span class="n">search</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">pageBean</span><span class="o">.</span><span class="na">getList</span><span class="o">().</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据成功！&#34;</span><span class="o">,</span> <span class="n">pageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;没有数据！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 课程修改的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateCourse</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">Course</span> <span class="n">course</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Course</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BeanUtils</span><span class="o">.</span><span class="na">populate</span><span class="o">(</span><span class="n">course</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理修改业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">updateCourse</span><span class="o">(</span><span class="n">course</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;修改成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;修改失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="删除选中">删除选中</h2>
<p> ① 获取选中的内容</p>
<p><img src="/posts/project/20220522222541/image-20220522232026524.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232040122.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 点击删除选中按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522232047728.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232053643.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ③ 后台的Servlet处理
 </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">  <span class="c1">// 课程的删除选中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delCourse</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">cids</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;cids&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">delCourseByCid</span><span class="o">(</span><span class="n">cids</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;删除成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;删除失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="章节的添加">章节的添加</h2>
<p> ① course/index.html中点击章节按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522232131644.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232137966.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 点击添加章节中的确定按钮</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 点击章节添加确定按钮
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">addCDForm</span><span class="p">(</span><span class="nx">formName</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 校验表单
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">[</span><span class="nx">formName</span><span class="p">].</span><span class="nx">validate</span><span class="p">(</span><span class="nx">valid</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 判断
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="p">(</span><span class="nx">valid</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 3. 获取表单的数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="kd">let</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormData</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;method&#34;</span><span class="p">,</span> <span class="s2">&#34;addCourseDetail&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;cid&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">cid</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;type&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;url&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="nx">p</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&#34;start_date&#34;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">ruleForm</span><span class="p">.</span><span class="nx">start_date</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1">// 4. 发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&#34;http://localhost:8080/smallU_1012/courseDetail&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">resp</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 获取响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="p">.</span><span class="nx">dialogFormVisible2</span> <span class="o">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="s2">&#34;window.location=&#39;http://127.0.0.1:5500/smallU_back/html/course/index.html&#39;&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">this</span><span class="p">.</span><span class="nx">$message</span><span class="p">.</span><span class="nx">warning</span><span class="p">(</span><span class="s2">&#34;表单校验未通过&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span>
</span></span></code></pre></div><p> ③ 请求到Servlet中</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 添加章节的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCourseDetail</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">[]&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameterMap</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">CourseDetail</span> <span class="n">cd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CourseDetail</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BeanUtils</span><span class="o">.</span><span class="na">populate</span><span class="o">(</span><span class="n">cd</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">saveCD</span><span class="o">(</span><span class="n">cd</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;章节添加成功！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">500</span><span class="o">,</span> <span class="s">&#34;章节添加失败！&#34;</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h1 id="前台功能">前台功能</h1>
<h2 id="用户注册">用户注册</h2>
<h3 id="验证码">验证码</h3>
<p><img src="/posts/project/20220522222541/image-20220522232238590.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="表单的校验">表单的校验</h3>
<p><img src="/posts/project/20220522222541/image-20220522232251244.png"
    
    
    
    loading="lazy"
    
    
></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 校验表单中的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">checkV</span><span class="o">(</span><span class="n">v</span><span class="o">,</span> <span class="n">msg</span><span class="o">){</span>             
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. 表单非空校验
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="o">(</span><span class="n">v</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="s">&#34;&#34;</span><span class="o">==</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">()){</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="n">msg</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> 
</span></span><span class="line"><span class="cl">    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">let</span> <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">length</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 表单不为空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span><span class="o">(</span><span class="n">msg</span><span class="o">==</span><span class="s">&#34;用户名不能为空&#34;</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 1. 校验用户名  长度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span><span class="o">(</span><span class="n">vv</span><span class="o">&lt;</span><span class="n">3</span> <span class="o">||</span> <span class="n">vv</span><span class="o">&gt;</span><span class="n">12</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">&#34;长度3-12位&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 2. 用户名是否可用 是否已经注册过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// 发送请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">axios</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/smallU_1012/user_b?method=checkName&amp;username=&#34;</span><span class="o">+</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">()).</span><span class="na">then</span><span class="o">(</span><span class="n">resp</span> <span class="o">=&gt;{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// 3. 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">if</span><span class="o">(</span><span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">code</span><span class="o">==</span><span class="n">500</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">msg</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="err">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                            <span class="k">this</span><span class="o">.</span><span class="na">num</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">                <span class="o">})</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">msg</span> <span class="o">==</span> <span class="s">&#34;手机号不能为空&#34;</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// 校验手机号  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="c1">// 1. 手机号合法 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">let</span> <span class="n">reg</span> <span class="o">=</span> <span class="o">/^</span><span class="n">1</span><span class="o">[</span><span class="n">3</span><span class="o">|</span><span class="n">5</span><span class="o">|</span><span class="n">7</span><span class="o">|</span><span class="n">8</span><span class="o">|</span><span class="n">9</span><span class="o">][</span><span class="n">0</span><span class="o">-</span><span class="n">9</span><span class="o">]{</span><span class="n">9</span><span class="o">}</span><span class="n">$</span><span class="o">/</span> 
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="o">(</span><span class="n">reg</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">())){</span>
</span></span><span class="line"><span class="cl">                        <span class="c1">// 2. 手机是否已经注册
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                        <span class="n">axios</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/smallU_1012/user_b?method=checkPhone&amp;phone=&#34;</span><span class="o">+</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">()).</span><span class="na">then</span><span class="o">(</span><span class="n">resp</span> <span class="o">=&gt;</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                            <span class="c1">// 3. 获取响应结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                            <span class="k">if</span><span class="o">(</span><span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">code</span> <span class="o">==</span> <span class="n">500</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                                <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="na">data</span><span class="o">.</span><span class="na">msg</span>
</span></span><span class="line"><span class="cl">                            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                                <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="err">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                                    <span class="k">this</span><span class="o">.</span><span class="na">num</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">                            <span class="o">}</span>
</span></span><span class="line"><span class="cl">                        <span class="o">})</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">&#34;手机号不合法&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">msg</span> <span class="o">==</span> <span class="s">&#34;密码不能为空&#34;</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="o">(</span><span class="n">vv</span> <span class="o">&lt;</span> <span class="n">3</span> <span class="o">||</span> <span class="n">vv</span> <span class="o">&gt;</span> <span class="n">24</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">&#34;长度3-24位&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="err">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">num</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">()==</span><span class="kc">null</span> <span class="o">||</span> <span class="s">&#34;&#34;</span><span class="o">==</span><span class="n">v</span><span class="o">.</span><span class="na">trim</span><span class="o">()){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="s">&#34;验证码不能为空&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">this</span><span class="o">.</span><span class="na">msg</span> <span class="o">=</span> <span class="err">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">this</span><span class="o">.</span><span class="na">num</span><span class="o">++;</span>
</span></span><span class="line"><span class="cl">                <span class="o">}</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>    
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><p>点击注册按钮 处理</p>
<p><img src="/posts/project/20220522222541/image-20220522232314196.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="用户登录">用户登录</h3>
<p>① 校验表单</p>
<p><img src="/posts/project/20220522222541/image-20220522232321543.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232327875.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 点击登录按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522232335816.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="首页用户信息展示">首页用户信息展示</h3>
<p>① 判读是否用户登录</p>
<p><img src="/posts/project/20220522222541/image-20220522232350890.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 首页用户信息页面展示
<img src="/posts/project/20220522222541/image-20220522232430684.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="前台系统">前台系统</h1>
<h2 id="用户退出登录">用户退出登录</h2>
<p> ① 点击用户信息中的退出登录按钮</p>
<p><img src="/posts/project/20220522222541/image-20220522232519590.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232524964.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 在后台清除session的用户信息</p>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Js" data-lang="Js"><span class="line"><span class="cl"> <span class="c1">// 退出登录
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">public</span> <span class="k">void</span> <span class="nx">loginOut</span><span class="p">(</span><span class="nx">HttpServletRequest</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">HttpServletResponse</span> <span class="nx">response</span><span class="p">)</span> <span class="kr">throws</span> <span class="nx">IOException</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">HttpSession</span> <span class="nx">session</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getSession</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">session</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&#34;user&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ResultVO</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s2">&#34;退出成功！&#34;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">json</span> <span class="o">=</span> <span class="nx">JsonUtils</span><span class="p">.</span><span class="nx">objToJson</span><span class="p">(</span><span class="nx">vo</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">response</span><span class="p">.</span><span class="nx">getWriter</span><span class="p">().</span><span class="nx">print</span><span class="p">(</span><span class="nx">json</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><h2 id="首页课程展示">首页课程展示</h2>
<p> ① 首页展示一部分数据，获取数据</p>
<p><img src="/posts/project/20220522222541/image-20220522232623605.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232630019.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 后台的Servlet根据类型 调用业务获取数据</p>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 根据类别 获取数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getData</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">courseType</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;courseType&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层处理业务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findCourseByType</span><span class="o">(</span><span class="n">courseType</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据数据响应 信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据！&#34;</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p> ③ 渲染数据到视图中</p>
<p><img src="/posts/project/20220522222541/image-20220522232730935.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="全部课程">全部课程</h2>
<p> ① index.html中点击 全部课程 跳转到全部课程页面</p>
<p><img src="/posts/project/20220522222541/image-20220522232741309.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 在全部课程页面 先获取数据</p>
<p><img src="/posts/project/20220522222541/image-20220522232748025.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232753986.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>③ 后台根据条件搜索需要的课程 返回页面</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl">  <span class="c1">// 查询全部课程中信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findAllCourse</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">courseType</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;courseType&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">currentPage</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;currentPage&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">courseName</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;courseName&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;pageSize&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理业务 返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">PageBean</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">pageBean</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findAllCourse</span><span class="o">(</span><span class="n">courseType</span><span class="o">,</span> <span class="n">currentPage</span><span class="o">,</span> <span class="n">courseName</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 封装 响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据！&#34;</span><span class="o">,</span> <span class="n">pageBean</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>④ 回显数据 和页码</p>
<p><img src="/posts/project/20220522222541/image-20220522232818929.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232824735.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232829504.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="课程详情">课程详情</h2>
<p>① 点击课程图片 跳转到课程详情页面展示</p>
<p><img src="/posts/project/20220522222541/image-20220522232837764.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 跳转到课程详情页面 videoDetail.html中</p>
<p><img src="/posts/project/20220522222541/image-20220522232843772.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232848868.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232853969.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522232903595.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>③ 页面渲染
<img src="/posts/project/20220522222541/image-20220522232922349.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="章节的显示">章节的显示</h2>
<p> ① 进入看课程详情页面 直接根据课程查询章节</p>
<p><img src="/posts/project/20220522222541/image-20220522232955513.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233000487.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 后台处理获取章节信息</p>
<p> </p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"><span class="c1">// 根据cid查询章节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findCDByCid</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取请求携带的参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">cid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;cid&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理业务 返回结果 第一章：{},{}  第二章：{}, {}, {}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findCDByCid</span><span class="o">(</span><span class="n">cid</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 封装响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;获取数据成功！&#34;</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 4. 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="nd">@Override</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="nf">findCDByCid</span><span class="o">(</span><span class="n">String</span> <span class="n">cid</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 创建map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 查询 每个章节的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">CourseDetail</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findCDByCid</span><span class="o">(</span><span class="n">cid</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 获取每一个章节号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="o">(</span><span class="n">CourseDetail</span> <span class="n">courseDetail</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">courseDetail</span><span class="o">.</span><span class="na">getType</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">List</span><span class="o">&lt;</span><span class="n">CourseDetail</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">findCDByCidType</span><span class="o">(</span><span class="n">cid</span><span class="o">,</span> <span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="n">list1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">map</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p> ③ 页面中渲染</p>
<p><img src="/posts/project/20220522222541/image-20220522233044149.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="购买课程">购买课程</h2>
<h3 id="支付宝平台">支付宝平台</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Text" data-lang="Text"><span class="line"><span class="cl"> ① 课程详情中如果显示 价格 点击价格  支付(支付宝支付)  
</span></span><span class="line"><span class="cl">  https://open.alipay.com/   支付宝平台  
</span></span><span class="line"><span class="cl">  https://opendocs.alipay.com/common/02kkv7   开发文档
</span></span></code></pre></div><p><img src="/posts/project/20220522222541/image-20220522233102488.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233110744.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233118310.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233131265.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233139658.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="引入支付">引入支付</h3>
<p> ① 详情页面中点击 支付(个人价格、平团价格)</p>
<p><img src="/posts/project/20220522222541/image-20220522233342974.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233348143.png"
    
    
    
    loading="lazy"
    
    
></p>
<p> ② 后台处理付款</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 处理课程的支付
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">aliPay</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//获得初始化的AlipayClient
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">AlipayClient</span> <span class="n">alipayClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultAlipayClient</span><span class="o">(</span><span class="n">AlipayConfig</span><span class="o">.</span><span class="na">gatewayUrl</span><span class="o">,</span> <span class="n">AlipayConfig</span><span class="o">.</span><span class="na">app_id</span><span class="o">,</span> <span class="n">AlipayConfig</span><span class="o">.</span><span class="na">merchant_private_key</span><span class="o">,</span> <span class="s">&#34;json&#34;</span><span class="o">,</span> <span class="n">AlipayConfig</span><span class="o">.</span><span class="na">charset</span><span class="o">,</span> <span class="n">AlipayConfig</span><span class="o">.</span><span class="na">alipay_public_key</span><span class="o">,</span> <span class="n">AlipayConfig</span><span class="o">.</span><span class="na">sign_type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//设置请求参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">AlipayTradePagePayRequest</span> <span class="n">alipayRequest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AlipayTradePagePayRequest</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 付款完成之后 回来的路径
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">cid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;cid&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="n">User</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">alipayRequest</span><span class="o">.</span><span class="na">setReturnUrl</span><span class="o">(</span><span class="s">&#34;http://localhost:8080/smallU_1012/course_user?method=addCourseUser&amp;cid=&#34;</span><span class="o">+</span><span class="n">cid</span><span class="o">+</span><span class="s">&#34;&amp;uid=&#34;</span><span class="o">+</span><span class="n">user</span><span class="o">.</span><span class="na">getUid</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// alipayRequest.setNotifyUrl(AlipayConfig.notify_url);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">//商户订单号，商户网站订单系统中唯一订单号，必填
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">out_trade_no</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">().</span><span class="na">replace</span><span class="o">(</span><span class="s">&#34;-&#34;</span><span class="o">,</span><span class="s">&#34;&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//付款金额，必填
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">total_amount</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;price&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//订单名称，必填
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">subject</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;courseName&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//商品描述，可空
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// String body = new String(request.getParameter(&#34;WIDbody&#34;).getBytes(&#34;ISO-8859-1&#34;),&#34;UTF-8&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="n">alipayRequest</span><span class="o">.</span><span class="na">setBizContent</span><span class="o">(</span><span class="s">&#34;{\&#34;out_trade_no\&#34;:\&#34;&#34;</span><span class="o">+</span> <span class="n">out_trade_no</span> <span class="o">+</span><span class="s">&#34;\&#34;,&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="o">+</span> <span class="s">&#34;\&#34;total_amount\&#34;:\&#34;&#34;</span><span class="o">+</span> <span class="n">total_amount</span> <span class="o">+</span><span class="s">&#34;\&#34;,&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="o">+</span> <span class="s">&#34;\&#34;subject\&#34;:\&#34;&#34;</span><span class="o">+</span> <span class="n">subject</span> <span class="o">+</span><span class="s">&#34;\&#34;,&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// + &#34;\&#34;body\&#34;:\&#34;&#34;+ body +&#34;\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="o">+</span> <span class="s">&#34;\&#34;product_code\&#34;:\&#34;FAST_INSTANT_TRADE_PAY\&#34;}&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//若想给BizContent增加其他可选请求参数，以增加自定义超时时间参数timeout_express来举例说明
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//alipayRequest.setBizContent(&#34;{\&#34;out_trade_no\&#34;:\&#34;&#34;+ out_trade_no +&#34;\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//		+ &#34;\&#34;total_amount\&#34;:\&#34;&#34;+ total_amount +&#34;\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//		+ &#34;\&#34;subject\&#34;:\&#34;&#34;+ subject +&#34;\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//		+ &#34;\&#34;body\&#34;:\&#34;&#34;+ body +&#34;\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//		+ &#34;\&#34;timeout_express\&#34;:\&#34;10m\&#34;,&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//		+ &#34;\&#34;product_code\&#34;:\&#34;FAST_INSTANT_TRADE_PAY\&#34;}&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">//请求参数可查阅【电脑网站支付的API文档-alipay.trade.page.pay-请求参数】章节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">//请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">alipayClient</span><span class="o">.</span><span class="na">pageExecute</span><span class="o">(</span><span class="n">alipayRequest</span><span class="o">).</span><span class="na">getBody</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">AlipayApiException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//输出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&#34;text/html;charset=utf-8&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
</span></span></code></pre></div><p>③ 将该用户购买该课程的记录保存到数据库</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 支付成功之后 处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCourseUser</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// System.out.println(&#34;xxxxx&#34;);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// 1. 获取请求携带参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">String</span> <span class="n">cid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;cid&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">uid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&#34;uid&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层 处理业务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">saveCourseUser</span><span class="o">(</span><span class="n">cid</span><span class="o">,</span> <span class="n">uid</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果 处理响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// 返回详情页面  重定向
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">&#34;http://127.0.0.1:5500/smallU_before/pages/videoDetail.html?cid=&#34;</span><span class="o">+</span><span class="n">cid</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><h2 id="课程学习">课程学习</h2>
<p>① 在课程详情页面 如果购买之后 点击课程学习 跳转到播放页面</p>
<p><img src="/posts/project/20220522222541/image-20220522233427381.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 播放页面 显示章节目录 点击章节目录播放视频</p>
<p><img src="/posts/project/20220522222541/image-20220522233433765.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233438440.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>③ 渲染到视图中</p>
<p><img src="/posts/project/20220522222541/image-20220522233444634.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="课程中心">课程中心</h2>
<p>① 个人信息中点击课程中心  进入课程中心页面  回显购买的课程</p>
<p><img src="/posts/project/20220522222541/image-20220522233456734.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>② 课程中心页面 通过钩子函数获取数据</p>
<p><img src="/posts/project/20220522222541/image-20220522233503052.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220522222541/image-20220522233507812.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>③ 后台处理</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Java" data-lang="Java"><span class="line"><span class="cl"> <span class="c1">// 根据用户查询 购买的课程
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getDataByUid</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 1. 获取用户id
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="n">User</span><span class="o">)</span> <span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&#34;user&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 2. 调用业务层  获取结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">List</span><span class="o">&lt;</span><span class="n">Course</span><span class="o">&gt;</span> <span class="n">courses</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">findByUid</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUid</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 3. 根据结果响应信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResultVO</span><span class="o">(</span><span class="n">200</span><span class="o">,</span> <span class="s">&#34;&#34;</span><span class="o">,</span> <span class="n">courses</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 响应
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">json</span> <span class="o">=</span> <span class="n">JsonUtils</span><span class="o">.</span><span class="na">objToJson</span><span class="o">(</span><span class="n">vo</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">print</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span></code></pre></div><p>④ 将数据渲染到视图中</p>
<p><img src="/posts/project/20220522222541/image-20220522233600820.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="总结">总结</h1>
<h2 id="后台管理">后台管理</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">- 管理员登录   (验证码)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">- 用户管理 
</span></span><span class="line"><span class="cl">    用户添加
</span></span><span class="line"><span class="cl">    用户修改
</span></span><span class="line"><span class="cl">    用户删除选中
</span></span><span class="line"><span class="cl">    用户详情
</span></span><span class="line"><span class="cl">    用户搜索
</span></span><span class="line"><span class="cl">    用户分页
</span></span><span class="line"><span class="cl">- 课程管理 (文件上传)
</span></span><span class="line"><span class="cl">    课程的上传 
</span></span><span class="line"><span class="cl">    课程的修改
</span></span><span class="line"><span class="cl">    课程删除选中
</span></span><span class="line"><span class="cl">    课程的章节添加
</span></span><span class="line"><span class="cl">    课程的搜索
</span></span><span class="line"><span class="cl">    课程的分页
</span></span><span class="line"><span class="cl">- 选课管理(作业)
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></div><h2 id="用户系统-1">用户系统</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">- 用户的注册和登录
</span></span><span class="line"><span class="cl">- 首页分类展示
</span></span><span class="line"><span class="cl">- 全部课程 (分页 搜索  分类)
</span></span><span class="line"><span class="cl">- 课程详情 (章节)
</span></span><span class="line"><span class="cl">- 课程的购买 (支付宝沙箱支付)
</span></span><span class="line"><span class="cl">- 课程章节的播放
</span></span><span class="line"><span class="cl">- 课程中心 
</span></span><span class="line"><span class="cl">- 页面对登录用户的信息展示
</span></span><span class="line"><span class="cl">- 个人资料(作业)
</span></span></code></pre></div>
            </div>
            <hr>
            <div style="text-align: center;">
                <button class="btn"><a href="https://lovemjh.github.io/posts/tool/20220523233691/">← Linux常用命令</a></button>
                <button class="btn"><a href="https://lovemjh.github.io/posts/project/20220518154841/">医疗管家 →</a></button>
            </div>

            
        </article><div class="aside_content" id="aside_content">
    <div class="card-widget card-info">
        <div class="card-content">
            <div class="card-info-avatar is-center">
                <img class="avatar-img" src="http://q1.qlogo.cn/g?b=qq&nk=2409741052&s=640" alt="avatar">
                <div class="author-info__name">青山</div>
                <div class="author-info__description">悟已往之不谏 知来者之可追</div>
            </div>
            
            <div class="card-info-social-icons is-center">
                <a class="social-icon" href="https://github.com/xioyito" target="_blank">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            

        </div>
    </div>


    <div class="card-widget">
        <div class="card-content">
            <meting-js auto="https://y.qq.com/n/yqq/playlist/7713574197.html">
            </meting-js>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-bullhorn" aria-hidden="true"></i>
                <span>一言</span>
            </div>
            <div id="hitokoto"></div>
        </div>
    </div>
    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <span>今日诗词</span>
            </div>
            <div id="jinrishici-sentence"></div>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-line-chart" aria-hidden="true"></i>
                <span>站点信息</span>
            </div>
            <div class="webinfo">
                <div class="webinfo-item">
                    <div class="webinfo-site-uv-name">本站访客数 :</div>
                    <div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div>
                </div>
                <div class="webinfo-item">
                    <div class="webinfo-site-name">本站总访问量 :</div>
                    <div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card-widget js-toc-w" id="js-toc-w">
        <div class="card-content js-toc">
            
        </div>
    </div>
    
</div></div>
</main>
<footer id="footer">
    <div id="footer-wrap">
        <div class="copyright">&copy;2019 - 2021 BY QING SHAN KE</div>
    </div>
</footer>
</div>

<div class="fan" id="fan" style="
position: fixed;
width: 40px;
height: 120px;
right: -200px;
bottom: 0px;
transition: all 0.5s;
z-index: 99999;
 ">
    <i class="fa fa-cog fa-spin fa-2x"></i><br>
    <i class="fa fa-align-justify fa-2x" id="ff"></i><br>
    <i class="fa fa fa-arrow-up fa-2x" id="aa"></i><br>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>


  
  <script src="/js/jquery.pjax.js"></script> 

    <script type="text/javascript">
            $(function () {
                $(document).pjax('a', '#page', {
                    fragment: '#page',
                    timeout: 5000,
                    cache: false
                });
                $(document).on({
                    'pjax:click': function () {
                        
                        console.log("点击链接");
                    },
                    'pjax:start': function () {
                        
                        console.log("获取请求");
                    },
                    'pjax:end': function () {
                        
                        console.log("请求完成");
                    }
                });
            });


        </script>





<script>
  const imgArr = [
    "https://pic1.zhimg.com/80/v2-23d671bf74a246c54b1256bd2322d461_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-3afad658b44f596b10ec13b2b6d4299d_720w.webp?source=1940ef5c",
    "https://picx.zhimg.com/80/v2-b83d637fafb72fd13a5922aa0038bff9_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-3afad658b44f596b10ec13b2b6d4299d_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-7ee6f104979814d2bf420461e3872475_720w.webp?source=1940ef5c",
    "https://picx.zhimg.com/80/v2-585754b4ab4d49f480b833cbbbf4839f_720w.webp?source=1940ef5c",
    "https://pic1.zhimg.com/80/v2-b3d8f74192b2940a1112c93797cc0815_720w.webp?source=1940ef5c",
  ];
  var objs = document.getElementsByClassName('page-img');
  for (var i = 0; i < objs.length; i++) {
    objs[i].id = "myid" + i;
    let randNum = Math.floor(Math.random() * imgArr.length);
    var odiv = document.getElementById("myid" + i);
    odiv.style.backgroundImage = `url(${imgArr[randNum]})`;
    
    odiv.style.backgroundRepeat = "no-repeat";
    odiv.style.backgroundPosition = "0px 0px";
  }
</script>

<script>
    var a = 0;
    ff.onclick = function () {
        if (a === 0) {
            $(".js-toc-w").css("position", "fixed"); 
            $(".js-toc-w").css("bottom", "10px");
            $(".js-toc-w").css("right", "40px");

            a++;
        } else {
            $(".js-toc-w").css("position", "static");
            a--;
        }
    }

    aa.onclick = function () {
        window.scrollTo({     
            top: 0,            
            behavior: "smooth"   
        })
    }

    
    window.onload = function () {
        $(".aplayer").css("background", "rgba(0, 0, 0, 0)");
        

        
    } 
</script>
<script>
    $(window).scroll(function () {
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop
        console.log(scrollY + "----------------------")
        if (scrollY > 40) {
            $('.fan').css("right", "0px");
        } else {
            $('.fan').css("right", "-220px");
        }
    });
    $(function () {
        
        var start_height = $(document).scrollTop();
        
        var navigation_height = $('.navigation').outerHeight();
        $(window).scroll(function () {
            
            var end_height = $(document).scrollTop();
            
            if (end_height > navigation_height) {
                $('.navigation').addClass('hide');
            } else {
                $('.navigation').removeClass('hide');
            }
            
            if (end_height < start_height) {
                $('.navigation').removeClass('hide');
            }
            
            start_height = $(document).scrollTop();
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.js"></script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.js" type="module"></script>

<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js" async></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>


<script src="https://unpkg.com/nplayer@latest/dist/index.min.js"></script>


<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>





<script src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.8/js/maodian.js"></script>


<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3, h4, h5 ,h6',
        
        hasInnerContainers: false,
        
    });
</script>


<script type="text/javascript">
    console.clear();
    console.log("%c 有朋自远方来, 不亦说乎.", "background:#24272A; color:#ffffff", "");
    console.log("%c Github %c", "background:#24272A; color:#ffffff", "", "https://github.com/laoxuai");
    console.log("%c 版本号: %c", "background:#24272A; color:#ffffff", "", "1.0.0");

    (function ($) {
        $.fn.snow = function (options) {
            var $flake = $('<div id="snowbox" />').css({ 'position': 'absolute', 'z-index': '9999', 'top': '-50px' }).html('&#10052;'),
                documentHeight = $(document).height(),
                documentWidth = $(document).width(),
                defaults = {
                    minSize: 10,
                    maxSize: 20,
                    newOn: 1000,
                    flakeColor: "#AFDAEF"  
                },
                options = $.extend({}, defaults, options);
            var interval = setInterval(function () {
                var startPositionLeft = Math.random() * documentWidth - 100,
                    startOpacity = 0.5 + Math.random(),
                    sizeFlake = options.minSize + Math.random() * options.maxSize,
                    endPositionTop = documentHeight - 200,
                    endPositionLeft = startPositionLeft - 500 + Math.random() * 500,
                    durationFall = documentHeight * 10 + Math.random() * 5000;
                $flake.clone().appendTo('body').css({
                    left: startPositionLeft,
                    opacity: startOpacity,
                    'font-size': sizeFlake,
                    color: options.flakeColor
                }).animate({
                    top: endPositionTop,
                    left: endPositionLeft,
                    opacity: 0.2
                }, durationFall, 'linear', function () {
                    $(this).remove()
                });
            }, options.newOn);
        };
    })(jQuery);
    $(function () {
        $.fn.snow({
            minSize: 5,  
            maxSize: 50, 
            newOn: 800   
        });
    });

    
    var OriginTitle = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            
            document.title = '╭(°A°`)╮ 页面崩溃啦 ~';
            clearTimeout(titleTime);
        }
        else {
            $('[rel="icon"]').attr('href', "/favicon.ico");
            document.title = '(ฅ>ω<*ฅ) 噫又好啦 ~' + OriginTitle;
            titleTime = setTimeout(function () {
                document.title = OriginTitle;
            }, 2000);
        }
    });
</script></body>
</html>