<!DOCTYPE html>
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=no">
  <meta name="description" content="MJH Blog & MEET HTML Theme">
  <title>tk-题库微信小程序端功能开发</title>
  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.4/tocbot.css">
  
  <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css" />
  <script type="text/javascript">
    if (!!window.ActiveXObject || "ActiveXObject" in window) { 
      alert('朋友，上古浏览器不支持呢~');
    }
  </script>

  <style>
    .sidebar {
      z-index: 998;
      position: fixed;
      left: -200px;
      width: 200px;
      height: 100%;
      background: #ffffff;
      transition: all .5s ease;
    }

    .sidebar .top {
      font-size: 22px;
      color: rgb(0, 0, 0);
      text-align: center;
      height: 60px;
      line-height: 60px;
      background-color: rgb(255, 255, 255);
      user-select: none;

    }

    .sidebar ul {
      list-style: none;
    }

    .sidebar ul a {
      display: block;
      height: 100%;
      width: 100%;
      text-align: center;
      line-height: 45px;
      font-size: 18px;
      color: rgb(0, 0, 0);
      box-sizing: border-box;
      border-top: 1px solid rgb(255, 0, 0);
      border-bottom: 1px solid rgb(0, 17, 255);
      transition: .4s;
    }

    .sidebar ul li:hover a {
      padding-left: 30px;
      color: #7c4242;
      border-left: 5px solid #ffffff;
      transition: all 0.5s;
    }

    .sidebar ul a i {
      margin-right: 16px;
    }

    #check {
      display: none;
    }

    label #btn,
    label #cancel {
      position: fixed;
      cursor: pointer;
      background-color: #000000;
      border-radius: 3px;
    }

    label #btn {
      left: 5px;
      top: 7px;
      font-size: 25px;
      color: #fff;
      padding: 6px 10px;
      transition: all .5s;
      z-index: 999;
    }

    label #cancel {
      z-index: 999;
      left: -145px;
      top: 10px;
      font-size: 25px;
      color: rgb(255, 255, 255);
      padding: 4px 9px;
      transition: all .5s ease;
    }

    #check:checked~.sidebar {
      left: 0;
    }

    #check:checked~label #btn {
      left: 10px;
      opacity: 0;
      pointer-events: none;
    }

    #check:checked~label #cancel {
      left: 150px;
    }







     
    ::-webkit-scrollbar {
      width: 8px;
      height: 6px
    }

     
    ::-webkit-scrollbar-track {
      background-color: transparent;
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }

     
    ::-webkit-scrollbar-thumb {
      background-color: #30B07F;
      background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 100%, transparent 100%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
      -webkit-border-radius: 2em;
      -moz-border-radius: 2em;
      border-radius: 2em
    }






     
    .navigation {
      width: 100%;
      height: 50px;
       
      position: fixed;
      left: 0;
      top: 0;
      text-align: center;
      transition: top 0.5s;
      z-index: 999;

      background: rgba(255, 255, 255, .4) !important;
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      backdrop-filter: saturate(180%) blur(20px) !important;
    }

     
    .hide {
      top: -60px;
    }



     
    .btn {
      width: 120px;
      height: 40px;
      background: linear-gradient(315deg, #a4d8fa 0%, #5eb1e9 74%);
      border: none;
      border-radius: 10px;
      font-family: 'Lato', sans-serif;
      font-weight: 500;
      font-size: smaller;
      color: #fff;
      box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, .5),
        7px 7px 20px 0px rgba(0, 0, 0, .1),
        4px 4px 5px 0px rgba(0, 0, 0, .1);
      outline: none;
      position: relative;
      z-index: 0;
    }

    .btn::before {
      position: absolute;
      content: '';
      left: 0;
      bottom: 0;
      width: 100%;
      height: 0;
      transition: all 0.3s ease;
      border-radius: 10px;
      background: linear-gradient(315deg, #4dccc6 0%, #96e4df 74%);
      z-index: -1;
    }

    .btn:hover::before {
      top: 0;
      height: 100%;
    }

    .btn:active {
      top: 2px;
    }




     
    a.toc-link {
      color: currentColor;
      height: auto;
    }

     
    * {
      font-family: LXGW WenKai
    }

    * {
      font-weight: bold
    }

    body {
      font-family: LXGW WenKai;
    }




     
    .pagination {
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      align-items: center;
      height: 50px;
      margin: 0px;
    }

    .pagination a {
      text-decoration: none;
      font-size: 22px;
      color: rgb(0, 0, 0);
    }

    .page-item {
      display: inline;
      margin-right: 20px;
    }
  </style>

</head>
    <body style="    
    background-image: url(https://api.ixiaowai.cn/api/api.php);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: 100% 100%;
    -moz-background-size: 100% 100%;">
    <input type="checkbox" id="check">
<label for="check">
  <i class="fa fa-bars" id="btn"></i>
  <i class="fa fa-times" id="cancel"></i>
</label>
<div class="sidebar">
  <div class="top">Hi~</div>
  <ul>
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</div>
<div id="body-wrap">
  <nav class="navigation">
  <ul class="ull">
    
    <li class="lii">
      <a href="/">
        <div class="burger-item">
          <i class='fa fa-home'></i> 主页
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/posts">
        <div class="burger-item">
          <i class='fa fa-archive'></i> 文章
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/categories">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 分类
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/archive">
        <div class="burger-item">
          <i class='fa fa-folder-open'></i> 归档
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/tags">
        <div class="burger-item">
          <i class='fa fa-tags'></i> 标签
        </div>
      </a>
    </li>
    
    <li class="lii">
      <a href="/about">
        <div class="burger-item">
          <i class='fa fa-info-circle'></i> 关于
        </div>
      </a>
    </li>
    
  </ul>
</nav>
  <div style="width: 100%; height: 65vh;">
    <div id="page_site-info">
      <div id="site-title">
        <input type="checkbox" id="check">
        <br>
        <span class="blogtitle"></span>
        
        
        <div class="post-header">
          <span>
            
            <i class="fa fa-calendar"></i>
            2022-05-29&nbsp;
          </span>
          <span>
            
            <i class="fa fa-calendar-check-o"></i>
            2022-05-29&nbsp;&nbsp;&nbsp;
          </span>
          <span>
            
            <i class="fa fa-edit"></i>
            5938 字
          </span>&nbsp;
          <span>
            
            <i class="fa fa-paper-plane"></i>
            12 分钟
          </span>
        </div><div class="container-ctgtag">
	<div class="taxonomy" style="display: flex; justify-content: center;">
		
		<div class="ctg" style="display: flex; justify-content: center; margin-right: 20px;">
			
			<div style="margin-right: 10px;">
				
				<a href="/categories/"></a>
			</div>
			
		</div>
		<div class="tag" style="display: flex; justify-content: center;">
			
			<div style="margin-right: 10px;">
				
				<a href="/tags/"></a></i>
			</div>
			
		</div>
	</div>
</div>

        <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11"></script>
        <script>
          var typed = new Typed(".blogtitle", {
            strings: ['tk-题库微信小程序端功能开发'],
            startDelay: 300,
            typeSpeed: 100,
            loop: true,
            backSpeed: 50,
            showCursor: true
          });
        </script>
      </div>
    </div>
  </div>
  
<main id="content-outer">
    <div class="layout_page" id="content-inner">
        <article id="page" style="margin-right: 10px;">
            
            <div class="js-toc-content" style="height: 100%;">
                <h1 align = "center">第七章</h1>
<h1 align = "center">题库微信小程序端功能开发</h1>
<h3 align="center">优就业.JAVA教研室</h3>
<h2 id="学习目标">学习目标</h2>
<ul>
<li>了解 微信小程序项目创建及初始化配置</li>
<li>掌握用户登录注册功能开发</li>
<li>掌握题库分类功能开发</li>
<li>掌握题库列表功能开发</li>
<li>掌握题目详情功能开发</li>
<li>掌握内网穿透</li>
</ul>
<h1 id="一项目创建及初始化配置">一、项目创建及初始化配置</h1>
<h2 id="11创建项目">1.1、创建项目</h2>
<p>新建项目优学题库，开发模式选择 小程序， 语言 选中 JAVAscript
<img src="/posts/project/20220529001925/image-20220529001957149.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>创建好的项目结构及目录
<img src="/posts/project/20220529001925/image-20220529002009884.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="12拷贝相关样式配图等静态资源">1.2、拷贝相关样式、配图等静态资源</h2>
<p>把样式、配图等静态资源拷贝到项目的根目录
<img src="/posts/project/20220529001925/image-20220529002015447.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>拷贝后目录
<img src="/posts/project/20220529001925/image-20220529002020399.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="13配置基础样式">1.3、配置基础样式</h2>
<p>修改app.wxss</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="c">/**app.wxss**/</span>
</span></span><span class="line"><span class="cl"><span class="c">/**app.wxss**/</span>
</span></span><span class="line"><span class="cl"><span class="p">@</span><span class="k">import</span> <span class="s2">&#34;colorui/main.wxss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">@</span><span class="k">import</span> <span class="s2">&#34;colorui/icon.wxss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">space-between</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">padding</span><span class="p">:</span> <span class="mi">200</span><span class="n">rpx</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">box-sizing</span><span class="p">:</span> <span class="kc">border-box</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">text-row</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">row</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">text-column</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">scrollPage</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kp">-webkit-</span><span class="n">overflow-scrolling</span><span class="p">:</span> <span class="n">touch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">page_bottom</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span><span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">page_bottom_left</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">58</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">48</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mi">49</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-right-color</span><span class="p">:</span> <span class="mh">#888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">page_bottom_msg</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">left</span><span class="p">:</span> <span class="mi">70</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">120</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">19</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-align</span><span class="p">:</span><span class="kc">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">page_bottom_star</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">right</span><span class="p">:</span> <span class="mi">125</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-size</span><span class="p">:</span> <span class="mi">19</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mi">24</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">page_bottom_last</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">right</span><span class="p">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">58</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">48</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mi">49</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-left-color</span><span class="p">:</span> <span class="mh">#888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">page_bottom_next</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">58</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="mi">48</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">line-height</span><span class="p">:</span> <span class="mi">49</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-left-color</span><span class="p">:</span> <span class="mh">#888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><h2 id="14配置和后端服务接口调用地址">1.4、配置和后端服务接口调用地址</h2>
<p>修改配置文件app.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="err">globalData:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">userInfo:</span> <span class="err">null,</span>
</span></span><span class="line"><span class="cl">    <span class="err">baseUrl:</span> <span class="nt">&#34;http://localhost:8888/wx&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><p>baseUrl地址即为和后端服务器接口调用地址</p>
<h2 id="15创建对应的页面">1.5、创建对应的页面</h2>
<p>修改配置文件app.json，修改对应的pages数组，修改内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> &#34;pages/account/account&#34;, 
</span></span><span class="line"><span class="cl">    &#34;pages/register/register&#34;,
</span></span><span class="line"><span class="cl">    &#34;pages/index/index&#34;,
</span></span><span class="line"><span class="cl">    &#34;pages/type/type&#34;,
</span></span><span class="line"><span class="cl">    &#34;pages/item/item&#34;,
</span></span><span class="line"><span class="cl">    &#34;pages/info/info&#34;
</span></span></code></pre></div><p>注意默认主页为登录页面！</p>
<p>页面设计规划功能如下：</p>
<table>
<thead>
<tr>
<th>页面名称</th>
<th>页面路径</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>登录页面</td>
<td>pages/account/account</td>
<td>账号登录，在tabBar有定义（默认主页）</td>
</tr>
<tr>
<td>注册页面</td>
<td>pages/register/register</td>
<td>账号注册</td>
</tr>
<tr>
<td>用户信息</td>
<td>pages/index/index</td>
<td>获取用户微信账号 ，tabBar有定义</td>
</tr>
<tr>
<td>题库分类</td>
<td>pages/type/type</td>
<td>获取题库分类</td>
</tr>
<tr>
<td>具体分类实体列表页</td>
<td>pages/item/item</td>
<td>显示选定分类的试题列表</td>
</tr>
<tr>
<td>题目详情页面</td>
<td>pages/info/info</td>
<td>显示题目详情信息</td>
</tr>
</tbody>
</table>
<p>配置好，保存，即可自动生成对应的页面！
<img src="/posts/project/20220529001925/image-20220529002034345.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="16配置tabbar">1.6、配置tabBar</h2>
<p>修改配置文件app.json</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl">  <span class="s2">&#34;tabBar&#34;</span><span class="err">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;color&#34;</span><span class="p">:</span> <span class="s2">&#34;#dbdbdb&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;selectedColor&#34;</span><span class="p">:</span> <span class="s2">&#34;#1296db&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;backgroundColor&#34;</span><span class="p">:</span> <span class="s2">&#34;#ffffff&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;borderStyle&#34;</span><span class="p">:</span> <span class="s2">&#34;black&#34;</span><span class="p">,</span>    
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;list&#34;</span><span class="p">:</span> <span class="p">[{</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;pagePath&#34;</span><span class="p">:</span><span class="s2">&#34;pages/account/account&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;iconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/login.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;selectedIconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/login-select.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;text&#34;</span><span class="p">:</span><span class="s2">&#34;登录&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;pagePath&#34;</span><span class="p">:</span><span class="s2">&#34;pages/type/type&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;iconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/icon_component.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;selectedIconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/icon_component_HL.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;text&#34;</span><span class="p">:</span><span class="s2">&#34;题库分类&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">},{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;pagePath&#34;</span><span class="p">:</span><span class="s2">&#34;pages/index/index&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;iconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/user.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;selectedIconPath&#34;</span><span class="p">:</span> <span class="s2">&#34;img/user-select.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;text&#34;</span><span class="p">:</span><span class="s2">&#34;我的信息&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">}]</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="err">,</span>
</span></span></code></pre></div><p>tabBar效果：
<img src="/posts/project/20220529001925/image-20220529002041489.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="二用户登录注册功能开发">二、用户登录注册功能开发</h1>
<h2 id="21创建用户登录页面">2.1、创建用户登录页面</h2>
<h3 id="211修改页面文件pagesaccountaccountwxml">2.1.1、修改页面文件：pages\account\account.wxml</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;view class=&#34;container&#34;&gt; 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;login-icon&#34;&gt; 
</span></span><span class="line"><span class="cl"> &lt;image class=&#34;login-img&#34; src=&#34;../../img/loginLogo.png&#34;&gt;&lt;/image&gt; 
</span></span><span class="line"><span class="cl"> &lt;/view&gt; 
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;login-from&#34;&gt; 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> &lt;!--账号--&gt;
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;inputView&#34;&gt; 
</span></span><span class="line"><span class="cl">  &lt;image class=&#34;nameImage&#34; src=&#34;../../img/name.png&#34;&gt;&lt;/image&gt; 
</span></span><span class="line"><span class="cl">  &lt;label class=&#34;loginLab&#34;&gt;账号&lt;/label&gt; 
</span></span><span class="line"><span class="cl">  &lt;input class=&#34;inputText&#34; placeholder=&#34;请输入账号&#34; bindinput=&#34;usernameInput&#34; /&gt; 
</span></span><span class="line"><span class="cl"> &lt;/view&gt; 
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;line&#34;&gt;&lt;/view&gt; 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> &lt;!--密码--&gt;
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;inputView&#34;&gt; 
</span></span><span class="line"><span class="cl">  &lt;image class=&#34;keyImage&#34; src=&#34;../../img/key.png&#34;&gt;&lt;/image&gt; 
</span></span><span class="line"><span class="cl">  &lt;label class=&#34;loginLab&#34;&gt;密码&lt;/label&gt; 
</span></span><span class="line"><span class="cl">  &lt;input class=&#34;inputText&#34; password=&#34;true&#34; placeholder=&#34;请输入密码&#34; bindinput=&#34;passwordInput&#34; /&gt; 
</span></span><span class="line"><span class="cl"> &lt;/view&gt; 
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> &lt;!--按钮--&gt;
</span></span><span class="line"><span class="cl"> &lt;view class=&#34;loginBtnView&#34;&gt; 
</span></span><span class="line"><span class="cl">  &lt;button class=&#34;loginBtn&#34; type=&#34;primary&#34;  bindtap=&#34;login&#34;&gt;登录&lt;/button&gt;   
</span></span><span class="line"><span class="cl"> &lt;/view&gt;  
</span></span><span class="line"><span class="cl">   &lt;view&gt;
</span></span><span class="line"><span class="cl">    &lt;button class=&#34;loginBtn&#34; type=&#34;primary&#34; &gt;开始注册&lt;/button&gt;  
</span></span><span class="line"><span class="cl">   &lt;/view&gt;      
</span></span><span class="line"><span class="cl"> &lt;/view&gt; 
</span></span><span class="line"><span class="cl">&lt;/view&gt;
</span></span></code></pre></div><h3 id="212修改页面样式文件pagesaccountaccountwxss">2.1.2、修改页面样式文件：pages\account\account.wxss</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">page{ 
</span></span><span class="line"><span class="cl">  height: 100%; 
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .container { 
</span></span><span class="line"><span class="cl">  height: 100%; 
</span></span><span class="line"><span class="cl">  display: flex; 
</span></span><span class="line"><span class="cl">  flex-direction: column; 
</span></span><span class="line"><span class="cl">  padding: 0; 
</span></span><span class="line"><span class="cl">  box-sizing: border-box; 
</span></span><span class="line"><span class="cl">  /* background-color: rgb(156, 23, 78) */
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> /*登录图片*/
</span></span><span class="line"><span class="cl"> .login-icon{ 
</span></span><span class="line"><span class="cl">  flex: none; 
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .login-img{ 
</span></span><span class="line"><span class="cl">  width: 750rpx;
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> /*表单内容*/
</span></span><span class="line"><span class="cl"> .login-from { 
</span></span><span class="line"><span class="cl">  margin-top: 20px; 
</span></span><span class="line"><span class="cl">  flex: auto; 
</span></span><span class="line"><span class="cl">  height:100%; 
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .inputView { 
</span></span><span class="line"><span class="cl">  /* background-color: #fff;  */
</span></span><span class="line"><span class="cl">  line-height: 45px; 
</span></span><span class="line"><span class="cl">  border-radius:20px;
</span></span><span class="line"><span class="cl">   border:1px solid #999999;
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> /*输入框*/
</span></span><span class="line"><span class="cl"> .nameImage, .keyImage { 
</span></span><span class="line"><span class="cl">  margin-left: 22px; 
</span></span><span class="line"><span class="cl">  width: 18px; 
</span></span><span class="line"><span class="cl">  height: 16px
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .loginLab { 
</span></span><span class="line"><span class="cl">  margin: 15px 15px 15px 10px; 
</span></span><span class="line"><span class="cl">  color: #545454; 
</span></span><span class="line"><span class="cl">  font-size: 14px
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .inputText { 
</span></span><span class="line"><span class="cl">  flex: block; 
</span></span><span class="line"><span class="cl">  float: right; 
</span></span><span class="line"><span class="cl">  text-align: right; 
</span></span><span class="line"><span class="cl">  margin-right: 22px; 
</span></span><span class="line"><span class="cl">  margin-top: 11px;
</span></span><span class="line"><span class="cl">  color: #cccccc; 
</span></span><span class="line"><span class="cl">  font-size: 14px
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl"> .line { 
</span></span><span class="line"><span class="cl">  margin-top: 8px; 
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> /* .line { 
</span></span><span class="line"><span class="cl">  width: 100%; 
</span></span><span class="line"><span class="cl">  height: 1px; 
</span></span><span class="line"><span class="cl">  background-color: #cccccc; 
</span></span><span class="line"><span class="cl">  margin-top: 1px; 
</span></span><span class="line"><span class="cl"> }  */
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> /*按钮*/
</span></span><span class="line"><span class="cl"> .loginBtnView { 
</span></span><span class="line"><span class="cl">  width: 100%; 
</span></span><span class="line"><span class="cl">  height: auto; 
</span></span><span class="line"><span class="cl">  /* background-color:#DCDCDC;  */
</span></span><span class="line"><span class="cl">  margin-top: 0px; 
</span></span><span class="line"><span class="cl">  margin-bottom: 0px; 
</span></span><span class="line"><span class="cl">  padding-bottom: 0px; 
</span></span><span class="line"><span class="cl"> } 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"> .loginBtn { 
</span></span><span class="line"><span class="cl">  width: 90%; 
</span></span><span class="line"><span class="cl">  margin-top: 40px; 
</span></span><span class="line"><span class="cl">  border-radius:10px;
</span></span><span class="line"><span class="cl"> }
</span></span><span class="line"><span class="cl"> .operate{
</span></span><span class="line"><span class="cl">  display: flex;
</span></span><span class="line"><span class="cl">  flex-direction: row; 
</span></span><span class="line"><span class="cl"> }
</span></span><span class="line"><span class="cl">.operate view{
</span></span><span class="line"><span class="cl">    margin: 0 auto;
</span></span><span class="line"><span class="cl">    margin-top: 40px;
</span></span><span class="line"><span class="cl">    font-size: 14px;
</span></span><span class="line"><span class="cl">    color: #333333;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><h3 id="213登录页面运行效果">2.1.3、登录页面运行效果：</h3>
<p><img src="/posts/project/20220529001925/image-20220529002052051.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="22创建用户注册页面">2.2、创建用户注册页面</h2>
<h3 id="221修改页面文件pagesregisterregisterwxml">2.2.1、修改页面文件：pages\register\register.wxml</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!--pages/register/register.wxml--&gt;</span>      
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span>  <span class="na">bindsubmit</span><span class="o">=</span><span class="s">&#34;formSubmit&#34;</span> <span class="na">bindreset</span><span class="o">=</span><span class="s">&#34;formReset&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span> <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;items&#34;</span><span class="p">&gt;</span>    
</span></span><span class="line"><span class="cl">    欢迎{{userInfo.nickName}}注册优学刷题系统
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;userName&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请设置4-20位用户名&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span> <span class="na">bingblur</span><span class="o">=</span><span class="s">&#34;accountblur&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item flex&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">password</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;password&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请设置5-20位登录密码&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>   
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;nickname&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;昵称&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;phone&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;手机号&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mobileInfo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mobile&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;email&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;请输入邮箱&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>    
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;items&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    性别:    
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;birth&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;生日(1979-12-20)&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;item&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;city&#34;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&#34;通信地址&#34;</span> <span class="na">placeholder-class</span><span class="o">=</span><span class="s">&#34;holder&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;btn&#34;</span>  <span class="na">form-type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span><span class="p">&gt;</span>注册<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span></code></pre></div><h3 id="222修改页面样式文件pagesregisterregisterwxss">2.2.2、修改页面样式文件：pages\register\register.wxss</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/* pages/company/company.wxss */
</span></span><span class="line"><span class="cl">.content{
</span></span><span class="line"><span class="cl">  width: 100%;
</span></span><span class="line"><span class="cl">  height: 700px;
</span></span><span class="line"><span class="cl">  background-color: #f2f2f2;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.hr{
</span></span><span class="line"><span class="cl">  padding-top: 40px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.item{
</span></span><span class="line"><span class="cl">  margin: 0 auto;
</span></span><span class="line"><span class="cl">  border: 1px solid #cccccc;
</span></span><span class="line"><span class="cl">  height: 40px;
</span></span><span class="line"><span class="cl">  width: 90%;
</span></span><span class="line"><span class="cl">  border-radius: 3px;
</span></span><span class="line"><span class="cl">  background-color: #ffffff;
</span></span><span class="line"><span class="cl">  margin-bottom: 15px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.items{
</span></span><span class="line"><span class="cl">  margin: 0 auto;
</span></span><span class="line"><span class="cl">  border: 1px solid #cccccc;
</span></span><span class="line"><span class="cl">  height: 40px;
</span></span><span class="line"><span class="cl">  width: 90%;
</span></span><span class="line"><span class="cl">  border-radius: 3px;
</span></span><span class="line"><span class="cl">  margin-bottom: 15px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.item input{
</span></span><span class="line"><span class="cl">  height: 40px;
</span></span><span class="line"><span class="cl">  line-height: 40px;
</span></span><span class="line"><span class="cl">  margin-left: 10px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.holder{
</span></span><span class="line"><span class="cl">  font-size: 14px;
</span></span><span class="line"><span class="cl">  color: #999999;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.flex{
</span></span><span class="line"><span class="cl">  display: flex;
</span></span><span class="line"><span class="cl">  flex-direction: row;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.flex input{
</span></span><span class="line"><span class="cl">  width: 300px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">item switch{
</span></span><span class="line"><span class="cl">  margin-top: 5px;
</span></span><span class="line"><span class="cl">  margin-right: 5px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.mobileInfo{
</span></span><span class="line"><span class="cl">  display: flex;
</span></span><span class="line"><span class="cl">  flex-direction: row;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.mobile{
</span></span><span class="line"><span class="cl">  margin: 0 auto;
</span></span><span class="line"><span class="cl">  border: 1px solid #cccccc;
</span></span><span class="line"><span class="cl">  height: 40px;
</span></span><span class="line"><span class="cl">  width: 90%;
</span></span><span class="line"><span class="cl">  border-radius: 3px;
</span></span><span class="line"><span class="cl">  background-color: #ffffff;
</span></span><span class="line"><span class="cl">  margin-bottom: 15px;
</span></span><span class="line"><span class="cl">  display: flex;
</span></span><span class="line"><span class="cl">  flex-direction: row;
</span></span><span class="line"><span class="cl">  margin-left: 5%;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.mobile input{
</span></span><span class="line"><span class="cl">  margin-top: 8px;
</span></span><span class="line"><span class="cl">  margin-left: 10px;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.code{
</span></span><span class="line"><span class="cl">  border: 1px solid #cccccc;
</span></span><span class="line"><span class="cl">  height: 40px;
</span></span><span class="line"><span class="cl">  width: 35%;
</span></span><span class="line"><span class="cl">  background-color: #edeeec;
</span></span><span class="line"><span class="cl">  border-radius: 3px;
</span></span><span class="line"><span class="cl">  text-align: center;
</span></span><span class="line"><span class="cl">  margin-left: 10px;
</span></span><span class="line"><span class="cl">  line-height: 40px;
</span></span><span class="line"><span class="cl">  color: #999999;
</span></span><span class="line"><span class="cl">  font-size: 15px;
</span></span><span class="line"><span class="cl">  margin-bottom: 15px;
</span></span><span class="line"><span class="cl">  margin-right: 5%;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">.btn{
</span></span><span class="line"><span class="cl">  width: 90%;
</span></span><span class="line"><span class="cl">  color: #999999;
</span></span><span class="line"><span class="cl">  margin-top: 40px;
</span></span><span class="line"><span class="cl"> }
</span></span></code></pre></div><h3 id="223配置从用户登录页面点击注册按钮跳转到用户注册页面">2.2.3、配置从用户登录页面点击注册按钮，跳转到用户注册页面</h3>
<h4 id="2231修改pagesaccountaccountjs">2.2.3.1、修改pages\account\account.js</h4>
<p>定义获取应用实例</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//获取应用实例
</span></span><span class="line"><span class="cl">const app = getApp()
</span></span></code></pre></div><p>增加获取用户信息方法，跳转到注册页面方法</p>
<p><a class="link" href="/posts/project/https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html"  target="_blank" rel="noopener"
    >https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">getUserProfile</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 推荐使用wx.getUserProfile获取用户信息，开发者每次通过该接口获取用户个人信息均需用户确认
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// 开发者妥善保管用户快速填写的头像昵称，避免重复弹窗
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">wx</span><span class="p">.</span><span class="nx">getUserProfile</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">desc</span><span class="o">:</span> <span class="s1">&#39;用于完善会员资料&#39;</span><span class="p">,</span> <span class="c1">// 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">success</span><span class="o">:</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">userInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//设置全局属性
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">userInfo</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">userInfo</span>       
</span></span><span class="line"><span class="cl">       
</span></span><span class="line"><span class="cl">         <span class="c1">//跳转到注册页码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">register</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl">   <span class="c1">//注册跳转
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="nx">register</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//跳转到注册页面
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="nx">wx</span><span class="p">.</span><span class="nx">redirectTo</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">       <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;../register/register&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="p">})</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span></code></pre></div><p>2.2.3.2、修改pages\account\account.wxml页面</p>
<p>修改页面上的注册按钮，触发调用获取用户信息方法，然后跳转到注册页面</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"> <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;loginBtn&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span>   <span class="na">bindtap</span><span class="o">=</span><span class="s">&#34;getUserProfile&#34;</span><span class="p">&gt;</span>开始注册<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>  
</span></span></code></pre></div><p>注意：用户点击该按钮时，会返回获取到的用户信息
<img src="/posts/project/20220529001925/image-20220529002105706.png"
    
    
    
    loading="lazy"
    
    
></p>
<h3 id="224配置在注册页面获取到微信用户信息">2.2.4、配置在注册页面获取到微信用户信息</h3>
<h4 id="2241修改pagesregisterregisterjs">2.2.4.1、修改pages\register\register.js</h4>
<p>定义获取应用实例</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//获取应用实例
</span></span><span class="line"><span class="cl">const app = getApp()
</span></span></code></pre></div><p>修改生命周期函数&ndash;监听页面加载 onLoad 增加获取微信用户信息方法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl">   * 生命周期函数--监听页面加载
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">  onLoad: function (options) {
</span></span><span class="line"><span class="cl">    //从全局变量获取用户信息
</span></span><span class="line"><span class="cl">    if (app.globalData.userInfo) {
</span></span><span class="line"><span class="cl">      console.log(app.globalData.userInfo)
</span></span><span class="line"><span class="cl">      this.setData({
</span></span><span class="line"><span class="cl">        userInfo: app.globalData.userInfo       
</span></span><span class="line"><span class="cl">      })
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  }
</span></span></code></pre></div><p>设置性别数据：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">data:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//设置性别选择数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="err">sex:</span> <span class="err">[{</span>
</span></span><span class="line"><span class="cl">      <span class="err">id:</span> <span class="err">1,</span>
</span></span><span class="line"><span class="cl">      <span class="err">value:</span> <span class="err">&#39;男&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="err">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="err">id:</span> <span class="err">0,</span>
</span></span><span class="line"><span class="cl">      <span class="err">value:</span> <span class="err">&#39;女&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="err">]</span>
</span></span><span class="line"><span class="cl">  <span class="err">},</span>
</span></span></code></pre></div><p>修改register.wxml增加显示性别</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> &lt;view class=&#34;items&#34;&gt;
</span></span><span class="line"><span class="cl">    性别:
</span></span><span class="line"><span class="cl">    &lt;radio-group class=&#34;radio-group&#34; bindchange=&#34;radioChange&#34;&gt;
</span></span><span class="line"><span class="cl">      &lt;label class=&#34;radio&#34; wx:for=&#34;{{sex}}&#34; wx:key=&#34;key&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;radio value=&#34;{{item.id}}&#34; checked=&#34;{{item.checked}}&#34;/&gt;{{item.value}}
</span></span><span class="line"><span class="cl">      &lt;/label&gt;
</span></span><span class="line"><span class="cl">    &lt;/radio-group&gt;
</span></span><span class="line"><span class="cl">  &lt;/view&gt;
</span></span></code></pre></div><p>修改register.js增加性别选择处理方法radioChange</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/**
</span></span><span class="line"><span class="cl">   * 
</span></span><span class="line"><span class="cl">   * 捕获单选框的选中值
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">  radioChange: function(e){
</span></span><span class="line"><span class="cl">    console.log(&#39;radio发生change事件，携带value值为：&#39;, e.detail.value)
</span></span><span class="line"><span class="cl">    //设置性别值给本地变量
</span></span><span class="line"><span class="cl">    this.setData({
</span></span><span class="line"><span class="cl">      gender: e.detail.value
</span></span><span class="line"><span class="cl">    })
</span></span><span class="line"><span class="cl">  }
</span></span></code></pre></div><h3 id="225测试运行效果">2.2.5、测试运行效果：</h3>
<p>在登录页面点击  注册 按钮，即可弹出获取微信用户信息是否允许窗口，选择允许，即可跳转到注册页面
<img src="/posts/project/20220529001925/image-20220529002114077.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>注册页面：
<img src="/posts/project/20220529001925/image-20220529002118870.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="23完成用户注册">2.3、完成用户注册</h2>
<h3 id="231修改pagesregisterregisterjs">2.3.1、修改pages\register\register.js</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl">  <span class="nx">formSubmit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;表单被提交&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">that</span><span class="o">=</span>  <span class="nx">e</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">value</span> 
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/member/member/save&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">header</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;content-type&#39;</span><span class="o">:</span><span class="s1">&#39;application/json&#39;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">userName</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">userName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">password</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">nickname</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">nickname</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">phone</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">phone</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">email</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">gender</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">gender</span><span class="p">,</span><span class="c1">//从本地变量获取性别
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">birth</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">birth</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">city</span><span class="o">:</span> <span class="nx">that</span><span class="p">.</span><span class="nx">city</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">code</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;注册成功&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wx</span><span class="p">.</span><span class="nx">showToast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;注册成功&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">icon</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">duration</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;haha&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">            <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">              <span class="c1">//要延时执行的代码
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">              <span class="nx">wx</span><span class="p">.</span><span class="nx">switchTab</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">                <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;../account/account&#39;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">              <span class="p">})</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">            <span class="p">},</span> <span class="mi">1000</span><span class="p">)</span> <span class="c1">//延迟时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>       
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nx">wx</span><span class="p">.</span><span class="nx">showToast</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">title</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">msg</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">icon</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">duration</span><span class="o">:</span> <span class="mi">2000</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">      
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><h3 id="232修改pagesregisterregisterwxml">2.3.2、修改pages\register\register.wxml</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;form  bindsubmit=&#34;formSubmit&#34; bindreset=&#34;formReset&#34;&gt;  
</span></span></code></pre></div><p>表单提交绑定formSubmit方法</p>
<h3 id="233用户注册演示效果">2.3.3、用户注册演示效果</h3>
<p><img src="/posts/project/20220529001925/image-20220529002126325.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>点击注册按钮，注册成功，跳转到用户登录页面
<img src="/posts/project/20220529001925/image-20220529002132669.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>等待1秒钟，跳转到登录页面</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">注意控制台如果报错：
</span></span><span class="line"><span class="cl">VM1540 asdebug.js:1  http://localhost:8888 不在以下 request 合法域名列表中，请参考文档：https://developers.weixin.qq.com/miniprogram/dev/framework/ability/network.html
</span></span><span class="line"><span class="cl">解决方案：
</span></span></code></pre></div><p><img src="/posts/project/20220529001925/image-20220529002139256.jpeg"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="24完成用户登录">2.4、完成用户登录</h2>
<h3 id="241修改pagesaccountaccountjs">2.4.1、修改pages\account\account.js</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">// 获取输入账号 
</span></span><span class="line"><span class="cl">  usernameInput: function (e) {
</span></span><span class="line"><span class="cl">    this.setData({
</span></span><span class="line"><span class="cl">      username: e.detail.value
</span></span><span class="line"><span class="cl">    })
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  // 获取输入密码 
</span></span><span class="line"><span class="cl">  passwordInput: function (e) {
</span></span><span class="line"><span class="cl">    this.setData({
</span></span><span class="line"><span class="cl">      password: e.detail.value
</span></span><span class="line"><span class="cl">    })
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">   // 登录处理
</span></span><span class="line"><span class="cl">  login: function () {
</span></span><span class="line"><span class="cl">    var that = this;
</span></span><span class="line"><span class="cl">    console.log(&#39;用户登录&#39;)
</span></span><span class="line"><span class="cl">    if (that.data.username.length == 0 || that.data.password.length == 0) {
</span></span><span class="line"><span class="cl">      wx.showToast({
</span></span><span class="line"><span class="cl">        title: &#39;账号或密码不能为空&#39;,
</span></span><span class="line"><span class="cl">        icon: &#39;none&#39;,
</span></span><span class="line"><span class="cl">        duration: 2000
</span></span><span class="line"><span class="cl">      })
</span></span><span class="line"><span class="cl">    } else {
</span></span><span class="line"><span class="cl">      let baseUrl = app.globalData.baseUrl;
</span></span><span class="line"><span class="cl">      wx.request({
</span></span><span class="line"><span class="cl">        url: baseUrl+&#39;/member/member/login&#39;,
</span></span><span class="line"><span class="cl">        method:&#39;POST&#39;,
</span></span><span class="line"><span class="cl">        header:{&#39;content-type&#39;:&#39;application/json&#39;},
</span></span><span class="line"><span class="cl">        data:{
</span></span><span class="line"><span class="cl">          username: that.data.username,
</span></span><span class="line"><span class="cl">          password: that.data.password
</span></span><span class="line"><span class="cl">          },
</span></span><span class="line"><span class="cl">        success:function(res){
</span></span><span class="line"><span class="cl">          console.log(res);
</span></span><span class="line"><span class="cl">          if(res.data.code==0){
</span></span><span class="line"><span class="cl">            console.log(&#34;登录成功&#34;)
</span></span><span class="line"><span class="cl">            //登录成功，存储token到本地存储 类似于cookie
</span></span><span class="line"><span class="cl">            wx.setStorageSync(&#39;token&#39;, res.data.token);
</span></span><span class="line"><span class="cl">            wx.setStorageSync(&#39;refreshToken&#39;, res.data.refreshToken);
</span></span><span class="line"><span class="cl">           //显示登录成功提示，跳转到题库分类页面
</span></span><span class="line"><span class="cl">            wx.showToast({
</span></span><span class="line"><span class="cl">              title: &#34;登录成功&#34;,
</span></span><span class="line"><span class="cl">              icon: &#39;none&#39;,
</span></span><span class="line"><span class="cl">              duration: 1000,
</span></span><span class="line"><span class="cl">              success:function(){    
</span></span><span class="line"><span class="cl">                console.log(&#39;haha&#39;);      
</span></span><span class="line"><span class="cl">                setTimeout(function () {      
</span></span><span class="line"><span class="cl">                  //要延时执行的代码      
</span></span><span class="line"><span class="cl">                  wx.switchTab({      
</span></span><span class="line"><span class="cl">                    url: &#39;../type/type&#39;      
</span></span><span class="line"><span class="cl">                  })      
</span></span><span class="line"><span class="cl">                }, 1000) //延迟时间      
</span></span><span class="line"><span class="cl">              }
</span></span><span class="line"><span class="cl">            })
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          }else{
</span></span><span class="line"><span class="cl">            console.log(res.data.msg)
</span></span><span class="line"><span class="cl">            wx.showToast({
</span></span><span class="line"><span class="cl">              title: res.data.msg,
</span></span><span class="line"><span class="cl">              icon: &#39;none&#39;,
</span></span><span class="line"><span class="cl">              duration: 2000
</span></span><span class="line"><span class="cl">            })
</span></span><span class="line"><span class="cl">          }
</span></span><span class="line"><span class="cl">          
</span></span><span class="line"><span class="cl">          
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">      })
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">  },
</span></span></code></pre></div><p>注意：用户登录传递给后端的是json格式的数据，所有后代代码要调整能接收json数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//用户登录方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;login&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">R</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">//调用服务，根据用户名、密码获取用户信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">MemberEntity</span> <span class="n">memberEntity</span> <span class="o">=</span> <span class="n">memberService</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">),</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;password&#34;</span><span class="o">));</span>
</span></span></code></pre></div><h3 id="242修改pagesaccountaccountwxml">2.4.2、修改pages\account\account.wxml</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;loginBtn&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;primary&#34;</span>  <span class="na">bindtap</span><span class="o">=</span><span class="s">&#34;login&#34;</span><span class="p">&gt;</span>登录<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>   
</span></span></code></pre></div><h3 id="243演示登录效果">2.4.3、演示登录效果</h3>
<p>输入账号密码错误，提示
<img src="/posts/project/20220529001925/image-20220529002148070.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>账号密码正确，提示登录成功，稍后跳转到分类列表页
<img src="/posts/project/20220529001925/image-20220529002153195.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="三题库分类功能开发">三、题库分类功能开发</h1>
<h2 id="31创建广告轮播图模板页面">3.1、创建广告轮播图模板页面</h2>
<p>pages/template/head.wxml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;view class=&#39;haibao&#39;&gt;
</span></span><span class="line"><span class="cl">  &lt;swiper 
</span></span><span class="line"><span class="cl">  indicator-dots=&#39;true&#39;
</span></span><span class="line"><span class="cl">   autoplay=&#39;true&#39; 
</span></span><span class="line"><span class="cl">   interval=&#39;3000&#39; 
</span></span><span class="line"><span class="cl">   duration=&#39;1000&#39; 
</span></span><span class="line"><span class="cl">   circular=&#39;true&#39; &gt;
</span></span><span class="line"><span class="cl"> &lt;block wx:for=&#34;{{imgurls}}&#34; wx:key=&#34;key&#34;&gt;
</span></span><span class="line"><span class="cl">    &lt;swiper-item&gt;
</span></span><span class="line"><span class="cl">    &lt;image src=&#34;{{item.imgUrl}}&#34; class=&#34;side-image&#34; style=&#34;width:100%&#34;&gt;&lt;/image&gt;
</span></span><span class="line"><span class="cl">    &lt;/swiper-item&gt;
</span></span><span class="line"><span class="cl"> &lt;/block&gt;
</span></span><span class="line"><span class="cl">  &lt;/swiper&gt;
</span></span><span class="line"><span class="cl">&lt;/view&gt;
</span></span></code></pre></div><h2 id="32创建题库分类页面">3.2、创建题库分类页面</h2>
<p>pages/type/type.wxml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">     &lt;!--pages/type/type.wxml--&gt;
</span></span><span class="line"><span class="cl">      &lt;include src=&#34;../template/head.wxml&#34; /&gt;
</span></span><span class="line"><span class="cl">      &lt;view class=&#34;cu-list menu sm-border solid-bottom card-menu margin-top&#34; wx:for=&#34;{{exams}}&#34; wx:for-item=&#34;item&#34; id=&#34;{{itemtap}}&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;view class=&#34;cu-item &#34;&gt;                   
</span></span><span class="line"><span class="cl">          &lt;view bindtap=&#34;getItem&#34; data-id=&#34;{{item.id}}&#34; class=&#34;action text-bold text-black text-lg&#34;&gt;
</span></span><span class="line"><span class="cl">            &lt;image src=&#34;{{item.logoUrl}}&#34; class=&#34;img&#34;&gt;&lt;/image&gt; 
</span></span><span class="line"><span class="cl">            &lt;text class=&#34;cu-title&#34;&gt;&lt;/text&gt;
</span></span><span class="line"><span class="cl">            {{item.type}}
</span></span><span class="line"><span class="cl">          &lt;/view&gt;
</span></span><span class="line"><span class="cl">        &lt;/view&gt;
</span></span><span class="line"><span class="cl">      &lt;/view&gt;
</span></span></code></pre></div><p>注意:点击分类名称跳转到题目列表方法 bindtap=&ldquo;getItem&rdquo;  传递分类编号 data-id=&quot;{{item.id}}&quot;</p>
<h2 id="33编写题库样式">3.3、编写题库样式</h2>
<p>修改type.wxss</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">top_title</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-family</span><span class="p">:</span> <span class="n">Neue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="mh">#888</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">left</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">26</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">img</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">  <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">scroll_item_name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">10</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">line-height</span><span class="p">:</span> <span class="mi">150</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">text-align</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">36</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">alter_name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">top</span><span class="p">:</span> <span class="mi">460</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">200</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">500</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">left</span><span class="p">:</span> <span class="mi">125</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">input_name</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">80</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">alter_btn</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">80</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">bottom</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">flex-item</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">150</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">80</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">round-click</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">height</span><span class="p">:</span> <span class="mi">120</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">width</span><span class="p">:</span> <span class="mi">120</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">background-color</span><span class="p">:</span><span class="mh">#fec432</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">border-radius</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">bottom</span><span class="p">:</span> <span class="mi">150</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">right</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">z-index</span><span class="p">:</span> <span class="mi">9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">round-click</span> <span class="nt">view</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">font-size</span><span class="p">:</span> <span class="mi">32</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">max-width</span><span class="p">:</span> <span class="mi">80</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="34修改js文件">3.4、修改js文件</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//获取应用实例
</span></span><span class="line"><span class="cl">const app = getApp()
</span></span></code></pre></div><p>编写获取分类数据方法、获取广告轮播图数据方法、设置页面加载时调用2个方法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"> <span class="nx">onShow</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wx</span><span class="p">.</span><span class="nx">showTabBar</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">animation</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//读取全部分类数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">loadAllType</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//读取广告轮播图数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">loadConext</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//读取全部分类数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loadAllType</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/question/type/findall&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">exams</span><span class="o">:</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//读取广告轮播图
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loadConext</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/context/banner/list?page=1&amp;limit=5&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;log ： &#34;</span><span class="o">+</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">imgurls</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;log ： &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><h2 id="35演示效果">3.5、演示效果</h2>
<p><img src="/posts/project/20220529001925/image-20220529002208097.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="36编写从分类跳转到题目列表页面">3.6、编写从分类跳转到题目列表页面</h2>
<p>修改type.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl">    <span class="c1">//点击分类，跳转到题目列表页
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">getItem</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">id</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;key : &#34;</span><span class="o">+</span><span class="nx">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="nx">wx</span><span class="p">.</span><span class="nx">navigateTo</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;../item/item?id=&#39;</span><span class="o">+</span><span class="nx">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span></code></pre></div><p>对应type.wxml调用跳转方法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> &lt;view bindtap=&#34;getItem&#34; data-id=&#34;{{item.id}}&#34; class=&#34;action text-bold text-black text-lg&#34;&gt;
</span></span><span class="line"><span class="cl">            &lt;image src=&#34;{{item.logoUrl}}&#34; class=&#34;img&#34;&gt;&lt;/image&gt; 
</span></span><span class="line"><span class="cl">            &lt;text class=&#34;cu-title&#34;&gt;&lt;/text&gt;
</span></span><span class="line"><span class="cl">            {{item.type}}
</span></span><span class="line"><span class="cl">&lt;/view&gt;
</span></span></code></pre></div><h1 id="四题目列表功能开发">四、题目列表功能开发</h1>
<h2 id="41创建题目列表页面">4.1、创建题目列表页面</h2>
<p>pages/item/item.wxml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">include</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../template/head.wxml&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;cu-list menu sm-border solid-bottom card-menu margin-top&#34;</span> <span class="na">wx:for</span><span class="o">=</span><span class="s">&#34;{{items}}&#34;</span> <span class="na">wx:for-item</span><span class="o">=</span><span class="s">&#34;item&#34;</span> <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;cu-item &#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">view</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&#34;getInfo&#34;</span> <span class="na">data-id</span><span class="o">=</span><span class="s">&#34;{{item.id}}&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;action text-bold text-black text-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;cuIcon-title text-blue&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {{item.title}}
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>          
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>               
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span></code></pre></div><h2 id="42创建题目列表样式">4.2、创建题目列表样式</h2>
<p>pages/item/item.wxss</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scss" data-lang="scss"><span class="line"><span class="cl"><span class="nc">.page_op</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">height</span><span class="o">:</span> <span class="mi">75</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span><span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/*flex-direction:row;*/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.btn_op</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">125</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">height</span><span class="o">:</span> <span class="mi">75</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">font-size</span><span class="o">:</span> <span class="mi">40</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">display</span><span class="o">:</span> <span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">justify-content</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">align-items</span><span class="o">:</span> <span class="ni">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.page_line</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="na">display</span><span class="o">:</span><span class="ni">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="cm">/*flex-direction:row;*/</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nc">.line1</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">left</span><span class="o">:</span> <span class="mi">188</span><span class="kt">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nc">.line2</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="na">position</span><span class="o">:</span> <span class="ni">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">left</span><span class="o">:</span> <span class="mi">562</span><span class="kt">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">width</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="na">background-color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="43创建题目列表js文件">4.3、创建题目列表js文件</h2>
<p>pages/item/item.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//获取应用实例
</span></span><span class="line"><span class="cl">const app = getApp()
</span></span></code></pre></div><p>设置页面初始化数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  /**
</span></span><span class="line"><span class="cl">   * 页面的初始数据
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">  data: {
</span></span><span class="line"><span class="cl">    pageNo: 1,
</span></span><span class="line"><span class="cl">    id: 1,
</span></span><span class="line"><span class="cl">    limit: 7,
</span></span><span class="line"><span class="cl">    totalPages: 1,
</span></span><span class="line"><span class="cl">    items: []
</span></span><span class="line"><span class="cl">  },
</span></span></code></pre></div><p>编写当页面加载的时候，获取题目列表数据、广告轮播图数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"> <span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 生命周期函数--监听页面加载
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onLoad</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>    
</span></span><span class="line"><span class="cl">    <span class="c1">//捕获分类列表页传递过来的分类id    
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">id</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">id</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>  
</span></span><span class="line"><span class="cl">    <span class="c1">//获取对应分类题目列表数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">getItemList</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">   <span class="c1">//读取广告轮播图数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">loadConext</span><span class="p">()</span>     
</span></span><span class="line"><span class="cl">  <span class="p">},</span> 
</span></span><span class="line"><span class="cl">  <span class="c1">//读取题目分类数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">getItemList</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/question/question/list?page=&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">pageNo</span><span class="o">+</span><span class="s1">&#39;&amp;limit=&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">limit</span><span class="o">+</span><span class="s1">&#39;&amp;key=&#39;</span><span class="o">+</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">items</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nx">totalPages</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">totalPage</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;log ： &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>  
</span></span><span class="line"><span class="cl"> <span class="c1">//获取广告轮播图数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loadConext</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/context/banner/list?page=1&amp;limit=5&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;log ： &#34;</span><span class="o">+</span><span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">imgurls</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;log ： &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span></code></pre></div><p>注意调整后端代码 u-question模块的&mdash;QuestionServiceImpl的queryPage方法，增加如下代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"> <span class="c1">//获取分类编号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="n">String</span> <span class="n">type</span><span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">params</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&#34;type&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="o">(!</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">type</span><span class="o">)){</span>
</span></span><span class="line"><span class="cl">            <span class="n">queryWrapper</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">&#34;type&#34;</span><span class="o">,</span><span class="n">type</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>
</span></span></code></pre></div><h2 id="44题目列表演示效果">4.4、题目列表演示效果</h2>
<p><img src="/posts/project/20220529001925/image-20220529002220222.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="45题目列表下拉获取更多数据处理">4.5、题目列表下拉获取更多数据处理</h2>
<p>修改pages/item/item.js</p>
<p>增加上拉触底获取下一页数据方法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> /**
</span></span><span class="line"><span class="cl">   * 页面上拉触底事件的处理函数
</span></span><span class="line"><span class="cl">   */
</span></span><span class="line"><span class="cl">  onReachBottom: function () {
</span></span><span class="line"><span class="cl">    var t=this;
</span></span><span class="line"><span class="cl">   console.log(&#39; 页面上拉触底事件的处理函数&#39;);
</span></span><span class="line"><span class="cl">   //判断当前页码小于总页码，就把当前页加1，获取下一页内容
</span></span><span class="line"><span class="cl">   if(t.data.pageNo&lt;t.data.totalPages){   
</span></span><span class="line"><span class="cl">   t.setData({
</span></span><span class="line"><span class="cl">     pageNo: t.data.pageNo+1
</span></span><span class="line"><span class="cl">   })   
</span></span><span class="line"><span class="cl">   console.log(t.data.pageNo);   
</span></span><span class="line"><span class="cl">   let baseUrl = app.globalData.baseUrl;   
</span></span><span class="line"><span class="cl">   wx.request({
</span></span><span class="line"><span class="cl">     url: baseUrl+&#39;/question/question/list?page=&#39;+this.data.pageNo+&#39;&amp;limit=&#39;+this.data.limit+&#39;&amp;key=&#39;+this.data.id,
</span></span><span class="line"><span class="cl">     method:&#39;GET&#39;,
</span></span><span class="line"><span class="cl">     header:{&#39;Authorization&#39;:wx.getStorageSync(&#39;token&#39;)},
</span></span><span class="line"><span class="cl">     success:function(res){      
</span></span><span class="line"><span class="cl">       //合并下一页的数据到当前集合 合并数组是把后一个数组的值依次push进前一个数组，使前一个数组发生改变
</span></span><span class="line"><span class="cl">       t.data.items.push.apply(t.data.items.list,res.data.page.list)     
</span></span><span class="line"><span class="cl">       t.setData({
</span></span><span class="line"><span class="cl">         items: t.data.items
</span></span><span class="line"><span class="cl">       })       
</span></span><span class="line"><span class="cl">     }
</span></span><span class="line"><span class="cl">   })
</span></span><span class="line"><span class="cl">  }else{
</span></span><span class="line"><span class="cl">    wx.showToast({
</span></span><span class="line"><span class="cl">      title: &#39;我是最后一页了！&#39;,
</span></span><span class="line"><span class="cl">      icon: &#39;none&#39;,
</span></span><span class="line"><span class="cl">      duration: 1000
</span></span><span class="line"><span class="cl">    })
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl"> },
</span></span></code></pre></div><p>newVideoList.concat(videoList),</p>
<p>演示效果，题目列表到了最后，上拉，即可自动加载显示更多数据</p>
<p>注意：数据必须铺满，才能演示下拉触底方法，可以用鼠标向下滚轮。
<img src="/posts/project/20220529001925/image-20220529002228042.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>拉倒最后一页，提示
<img src="/posts/project/20220529001925/image-20220529002233731.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="46编写点击题目标题跳转到题目详情页">4.6、编写点击题目标题跳转到题目详情页</h2>
<p>修改pages/item/item.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> //跳转到题目详情页
</span></span><span class="line"><span class="cl">  getInfo:function(e){
</span></span><span class="line"><span class="cl">    var id = e.currentTarget.dataset.id
</span></span><span class="line"><span class="cl">    console.log(&#34;key : &#34;+id);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    wx.navigateTo({
</span></span><span class="line"><span class="cl">      url: &#39;../info/info?id=&#39;+id,
</span></span><span class="line"><span class="cl">    })
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  },
</span></span></code></pre></div><p>修改页面item.wxml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span> <span class="na">bindtap</span><span class="o">=</span><span class="s">&#34;getInfo&#34;</span> <span class="na">data-id</span><span class="o">=</span><span class="s">&#34;{{item.id}}&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;action text-bold text-black text-lg&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;cuIcon-title text-blue&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{item.title}}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>         
</span></span></code></pre></div><h1 id="五题目详情开发">五、题目详情开发</h1>
<h2 id="51创建题目详情页面">5.1、创建题目详情页面</h2>
<p>pages/info/info.wxml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">include</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../template/head.wxml&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;news-detail-container&#34;</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;author-time&#34;</span><span class="p">&gt;</span>   
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;const-text&#34;</span><span class="p">&gt;</span>发表于<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;time&#34;</span><span class="p">&gt;</span>{{ question.createTime }}<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;const-text&#34;</span><span class="p">&gt;</span>评分:{{question.level}}<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>{{ question.title }}<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;tool&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">   
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">view</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;horizon&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">text</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;detail&#34;</span><span class="p">&gt;</span>{{ question.answer }}<span class="p">&lt;/</span><span class="nt">text</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">view</span><span class="p">&gt;</span>  
</span></span><span class="line"><span class="cl">        
</span></span></code></pre></div><h2 id="52创建题目详情样式">5.2、创建题目详情样式</h2>
<p>pages/info/info.wxss</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">news-detail-container</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">head-img</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">author-time</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">row</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">author-avatar</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">64</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">64</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">author-name</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-weight</span><span class="p">:</span> <span class="mi">700</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span><span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">const-text</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span><span class="mh">#999</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">time</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="mh">#999</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">title</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">40</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">36</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-weight</span><span class="p">:</span> <span class="mi">700</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">letter-spacing</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="mh">#4b556c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">tool</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">circle-img</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">float</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-right</span><span class="p">:</span> <span class="mi">40</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">circle-img</span> <span class="nt">image</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">50</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">share-img</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">horizon</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">660</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#e5e5e5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">top</span><span class="p">:</span> <span class="mi">46</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">z-index</span><span class="p">:</span> <span class="mi">-99</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">detail</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span><span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-right</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">30</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">line-height</span><span class="p">:</span> <span class="mi">44</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">letter-spacing</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mi">24</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">playermusic</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">60</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">60</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">vertical-align</span><span class="p">:</span> <span class="kc">middle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin-left</span><span class="p">:</span> <span class="mi">40</span><span class="n">rpx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="53编写题目详情js文件">5.3、编写题目详情js文件</h2>
<p>pages/info/info.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//获取应用实例
</span></span><span class="line"><span class="cl">const app = getApp()
</span></span></code></pre></div><p>页面加载获取详细数据、轮播图数据</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">   * 生命周期函数--监听页面加载
</span></span></span><span class="line"><span class="cl"><span class="cm">   */</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onLoad</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//获取跳转传递过来的题目编号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="kd">var</span> <span class="nx">id</span><span class="o">=</span><span class="nx">options</span><span class="p">.</span><span class="nx">id</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//读取广告轮播图
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="k">this</span><span class="p">.</span><span class="nx">loadContext</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">     <span class="c1">//读取题目信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>     <span class="k">this</span><span class="p">.</span><span class="nx">loadQuestionInfo</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//读取题目信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loadQuestionInfo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">baseUrl</span><span class="o">=</span><span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="k">this</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//发错请求读取题目信息
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/question/question/info/&#39;</span><span class="o">+</span><span class="nx">id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//把服务器响应数据设置到本地变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">         <span class="nx">question</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">question</span> 
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"> <span class="c1">//获取广告轮播图数据
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">loadContext</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">baseUrl</span><span class="o">=</span><span class="nx">app</span><span class="p">.</span><span class="nx">globalData</span><span class="p">.</span><span class="nx">baseUrl</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="k">this</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//发出请求
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">wx</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">url</span><span class="o">:</span> <span class="nx">baseUrl</span><span class="o">+</span><span class="s1">&#39;/context/banner/list&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">header</span><span class="o">:</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Authorization&#39;</span><span class="o">:</span><span class="nx">wx</span><span class="p">.</span><span class="nx">getStorageSync</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nx">t</span><span class="p">.</span><span class="nx">setData</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">          <span class="nx">imgurls</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">list</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><h2 id="54题目详情演示效果">5.4、题目详情演示效果</h2>
<p><img src="/posts/project/20220529001925/image-20220529002250637.png"
    
    
    
    loading="lazy"
    
    
></p>
<h1 id="六内网穿透选学">六、内网穿透（选学）</h1>
<h3 id="61-内网穿透">6.1. 内网穿透</h3>
<p>支付异步通知需要独立ip使阿里支付成功后可以回调我们的接口，所以前提条件就是内网穿透。</p>
<p>哲西云：https://cloud.zhexi.tech</p>
<p>cpolar：https://www.cpolar.com/</p>
<p>哲西云浏览器客户端配置隧道，映射网关的8888端口：
<img src="/posts/project/20220529001925/image-20220529002256742.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>具体配置如下：
<img src="/posts/project/20220529001925/image-20220529002302945.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>测试内网穿透：访问登录接口</p>
<p><a class="link" href="/posts/project/http://bumzmoegy0.52http.tech/member/member/login?username=test&amp;password=123"  target="_blank" rel="noopener"
    >http://bumzmoegy0.52http.tech/member/member/login?username=test&password=123</a>
<img src="/posts/project/20220529001925/image-20220529002308254.png"
    
    
    
    loading="lazy"
    
    
></p>
<h2 id="62修改微信小程序对接地址">6.2、修改微信小程序对接地址</h2>
<p>修改文件app.js</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"> <span class="err">globalData:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">userInfo:</span> <span class="err">null,</span>
</span></span><span class="line"><span class="cl">    <span class="err">baseUrl:</span> <span class="nt">&#34;http://bumzmoegy0.52http.tech&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></div><p>启动真机调试：
<img src="/posts/project/20220529001925/image-20220529002315822.png"
    
    
    
    loading="lazy"
    
    
></p>
<p><img src="/posts/project/20220529001925/image-20220529002322772.png"
    
    
    
    loading="lazy"
    
    
></p>
<p>微信扫描即可在手机端展开调试</p>

            </div>
            <hr>
            <div style="text-align: center;">
                <button class="btn"><a href="https://lovemjh.github.io/posts/blog/20220713223482/">← hugo图片和链接的问题</a></button>
                <button class="btn"><a href="https://lovemjh.github.io/posts/project/_20220529000803/">微信小程序开发入门 →</a></button>
            </div>

            
        </article><div class="aside_content" id="aside_content">
    <div class="card-widget card-info">
        <div class="card-content">
            <div class="card-info-avatar is-center">
                <img class="avatar-img" src="http://q1.qlogo.cn/g?b=qq&nk=2409741052&s=640" alt="avatar">
                <div class="author-info__name">青山</div>
                <div class="author-info__description">悟已往之不谏 知来者之可追</div>
            </div>
            
            <div class="card-info-social-icons is-center">
                <a class="social-icon" href="https://github.com/xioyito" target="_blank">
                    <i class="fa fa-github"></i>
                </a>
            </div>
            

        </div>
    </div>


    <div class="card-widget">
        <div class="card-content">
            <meting-js auto="https://y.qq.com/n/yqq/playlist/7713574197.html">
            </meting-js>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-bullhorn" aria-hidden="true"></i>
                <span>一言</span>
            </div>
            <div id="hitokoto"></div>
        </div>
    </div>
    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <span>今日诗词</span>
            </div>
            <div id="jinrishici-sentence"></div>
        </div>
    </div>

    <div class="card-widget">
        <div class="card-content">
            <div class="item-headline">
                <i class="fa fa-line-chart" aria-hidden="true"></i>
                <span>站点信息</span>
            </div>
            <div class="webinfo">
                <div class="webinfo-item">
                    <div class="webinfo-site-uv-name">本站访客数 :</div>
                    <div class="webinfo-site-uv-count" id="busuanzi_value_site_uv"></div>
                </div>
                <div class="webinfo-item">
                    <div class="webinfo-site-name">本站总访问量 :</div>
                    <div class="webinfo-site-pv-count" id="busuanzi_value_site_pv"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card-widget js-toc-w" id="js-toc-w">
        <div class="card-content js-toc">
            
        </div>
    </div>
    
</div></div>
</main>
<footer id="footer">
    <div id="footer-wrap">
        <div class="copyright">&copy;2019 - 2021 BY QING SHAN KE</div>
    </div>
</footer>
</div>

<div class="fan" id="fan" style="
position: fixed;
width: 40px;
height: 120px;
right: -200px;
bottom: 0px;
transition: all 0.5s;
z-index: 99999;
 ">
    <i class="fa fa-cog fa-spin fa-2x"></i><br>
    <i class="fa fa-align-justify fa-2x" id="ff"></i><br>
    <i class="fa fa fa-arrow-up fa-2x" id="aa"></i><br>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    var a = 0;
    ff.onclick = function () {
        if (a === 0) {
            $(".js-toc-w").css("position", "fixed"); 
            $(".js-toc-w").css("bottom", "10px");
            $(".js-toc-w").css("right", "40px");

            a++;
        } else {
            $(".js-toc-w").css("position", "static");
            a--;
        }
    }

    aa.onclick = function () {
        window.scrollTo({     
            top: 0,            
            behavior: "smooth"   
        })
    }

    
    window.onload = function () {
        $(".aplayer").css("background", "rgba(0, 0, 0, 0)");
        

        
    } 
</script>
<script>
    $(window).scroll(function () {
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop
        console.log(scrollY + "----------------------")
        if (scrollY > 40) {
            $('.fan').css("right", "0px");
        } else {
            $('.fan').css("right", "-220px");
        }
    });
    $(function () {
        
        var start_height = $(document).scrollTop();
        
        var navigation_height = $('.navigation').outerHeight();
        $(window).scroll(function () {
            
            var end_height = $(document).scrollTop();
            
            if (end_height > navigation_height) {
                $('.navigation').addClass('hide');
            } else {
                $('.navigation').removeClass('hide');
            }
            
            if (end_height < start_height) {
                $('.navigation').removeClass('hide');
            }
            
            start_height = $(document).scrollTop();
        });
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.js"></script>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js" async></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>


<script src="https://unpkg.com/nplayer@latest/dist/index.min.js"></script>


<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>





<script src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@3.0.8/js/maodian.js"></script>


<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3, h4, h5 ,h6',
        
        hasInnerContainers: false,
        
    });
</script>


<script type="text/javascript">
    console.clear();
    console.log("%c 有朋自远方来, 不亦说乎.", "background:#24272A; color:#ffffff", "");
    console.log("%c Github %c", "background:#24272A; color:#ffffff", "", "https://github.com/laoxuai");
    console.log("%c 版本号: %c", "background:#24272A; color:#ffffff", "", "1.0.0");

    (function ($) {
        $.fn.snow = function (options) {
            var $flake = $('<div id="snowbox" />').css({ 'position': 'absolute', 'z-index': '9999', 'top': '-50px' }).html('&#10052;'),
                documentHeight = $(document).height(),
                documentWidth = $(document).width(),
                defaults = {
                    minSize: 10,
                    maxSize: 20,
                    newOn: 1000,
                    flakeColor: "#AFDAEF"  
                },
                options = $.extend({}, defaults, options);
            var interval = setInterval(function () {
                var startPositionLeft = Math.random() * documentWidth - 100,
                    startOpacity = 0.5 + Math.random(),
                    sizeFlake = options.minSize + Math.random() * options.maxSize,
                    endPositionTop = documentHeight - 200,
                    endPositionLeft = startPositionLeft - 500 + Math.random() * 500,
                    durationFall = documentHeight * 10 + Math.random() * 5000;
                $flake.clone().appendTo('body').css({
                    left: startPositionLeft,
                    opacity: startOpacity,
                    'font-size': sizeFlake,
                    color: options.flakeColor
                }).animate({
                    top: endPositionTop,
                    left: endPositionLeft,
                    opacity: 0.2
                }, durationFall, 'linear', function () {
                    $(this).remove()
                });
            }, options.newOn);
        };
    })(jQuery);
    $(function () {
        $.fn.snow({
            minSize: 5,  
            maxSize: 50, 
            newOn: 800   
        });
    });

    
    var OriginTitle = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            
            document.title = '╭(°A°`)╮ 页面崩溃啦 ~';
            clearTimeout(titleTime);
        }
        else {
            $('[rel="icon"]').attr('href', "/favicon.ico");
            document.title = '(ฅ>ω<*ฅ) 噫又好啦 ~' + OriginTitle;
            titleTime = setTimeout(function () {
                document.title = OriginTitle;
            }, 2000);
        }
    });
</script></body>
</html>